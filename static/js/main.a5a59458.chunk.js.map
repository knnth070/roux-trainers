{"version":3,"sources":["lib/Defs.tsx","components/CubeSim.tsx","lib/Math.tsx","lib/CubeLib.tsx","lib/Selector.tsx","components/Select.tsx","components/CmllTrainerView.tsx","components/BlockTrainerView.tsx","components/PanoramaView.tsx","components/FavListView.tsx","components/AppView.tsx","Config.tsx","lib/Local.tsx","Version.tsx","reducers/AbstractStateM.tsx","lib/Algs.tsx","lib/Pruner.tsx","lib/min2phase/min2phase-wrapper.ts","lib/Solver.tsx","lib/CachedSolver.tsx","reducers/BlockTrainerStateM.tsx","reducers/CmllStateM.tsx","reducers/StateFactory.tsx","reducers/Reducer.tsx","theme.js","app/App.tsx","serviceWorker.js","index.js","lib/min2phase/min2phase.js"],"names":["Face","Typ","U","D","F","B","L","R","C","E","T","corners_coord","edges_coord","cstimer_corners_coord","cstimer_edges_coord","u","cpc","coc","epc","eoc","tpc","name","f","r","l","d","b","m","e","s","u_face","f_face","FBpairPos","color_map","defaultKeyMapping","TAU","Math","PI","axesInfo","THREE","cubeSim","width","height","colorScheme","mode","faces","stickers_tmpl","stickerwrap_tmpl","facesToReveal","scene","camera","renderer","antialias","geo","geo_border","setPixelRatio","window","devicePixelRatio","position","copy","lookAt","cubeG","add","updateWidthHeight","clearColor","canvas","domElement","setSize","setClearColor","aspect","updateProjectionMatrix","updateCube","cube","remove","i","cubie","rot","makeRotationFromEuler","rot1","setRotationFromMatrix","multiply","z","x","idx","curr_tmpl","sticker","clone","stickerwrap","indexOf","stickerhint","scale","set","drawCube","renderScene","render","cleanup","dispose","updateColorScheme","colorScheme_","materials","Array","fill","map","_","mat","color","side","alphaTest","mesh","setRotationFromEuler","materials_border","updateFacesToReveal","setup","CubeSim","props","mount","React","useRef","useEffect","dom","current","appendChild","bgColor","removeChild","ref","style","rand_int","floor","random","rand_incl","rand_choice","arr","length","getParity","perm","visited","follow","cnt","res","arrayEqual","arr1","arr2","CubieCube","id","cp","co","ep","eo","tp","apply_partial","o","p","oc","pc","mod","o_new","p_new","console","assert","src","dst","apply_one","move","toc","apply","isArray","from_move","_rotate_coord","fs","last_face","_backward_rotate_coord","first_face","apply_str","str","Move","parse","from_string","to_cstimer_cube","fm","custom_corners_coord","custom_edges_coord","idxOf","a_","target","a","getOriPerm","ori","coord_pair","pos","piece","newpos","newOri","newPerm","from_facelet_mapping","facelet_mapping","j","push","to_facelet_mapping","is_solveable","perm_correct","ori_correct","reduce","y","from_cube","get_change","acc_p","acc_o","from_moves","moves","make_rot_set","moveCost","Map","all_moves","us","rs","ls","ds","bs","ms","es","ss","rw","rws","lw","lws","uw","uws","xs","ys","flat","moves_dict","Object","create","forEach","generate_base_moves","combine","move1","move2","getCnt","getStr","all","tokens","token","ch","ord","charCodeAt","inv","undefined","slice","reverse","add_auf","auf_moves","auf_move","concat","to_string","join","evaluate","sum","get","collapse","newMoves","nextMove","shift","pop","combined","FaceletCube","mult_move","face","face_new","work","typ","mod_for_typ","p1","p2","p_curr","o_curr","color_of_c","o1","o2","color_of_e","color_of_t","color_of_sticker","Error","d_face","l_face","r_face","b_face","from_cubie","mask","facelet","X","from_cubie_partial_masked","from_cubie_partial","to_unfolded_cube_str","faceletCube","face_count","str_face_map","color_cube","face_char","hasOwnProperty","count","to_cubejs_str","lse_mask","CubeUtil","ext","stickers","find_pairs","edge_stickers","filter","corner_stickers","ep_stickers","cp_stickers","epcp_pairs","c","efs","cfs","match","get_color","connected_pairs","u_premove","m2_premove","get_random_with_mask","cp_rand","ep_rand","par","random_ori","ori_mask","random_perm","perm_mask","undecided","tmp","rand_shuffle","ori_to_color_scheme","colorMap","valid_scheme_mapper","split","sel","is_cmll_solved","premove","cube1","solved","is_mask_solved","get_random_lse","is_cube_solved","Mask","fs_back_mask","fs_front_mask","fbdr_mask","fb_mask","sb_mask","cmll_mask","ss_front_mask","ss_back_mask","empty_mask","dl_solved_mask","db_solved_mask","solved_mask","zhouheng_mask","getActiveNames","ans","flags","names","getActiveName","useStyles","makeStyles","theme","container","paddingTop","spacing","paddingBottom","backgroundColor","palette","background","default","button","paper","padding","display","overflow","flexDirection","canvasPaper","infoColumn","scrambleColumn","paddingLeft","textColumn","breakpoints","up","minHeight","fixedHeight","title","flexGrow","select","text","primary","selectLabel","secondary","SingleSelect","state","dispatch","config","classes","radioValue","label","FormControl","component","className","FormLabel","RadioGroup","aria-label","value","onChange","evt","n","new_flags","new_config","JSON","stringify","fbPairSolvedSelector","fbdrSelector","type","content","row","FormControlLabel","key","control","Radio","labelPlacement","MultiSelect","options","handleChange","checked","useState","open","setOpen","handleClose","manipChecked","setManipChecked","manipulator_row","manipulators","FormGroup","manip","enableIdx","Checkbox","fillValue","makeManipulator","Fragment","makeBox","noDialog","Box","Button","variant","borderWidth","onClick","fontSize","marginLeft","marginRight","Dialog","disableBackdropClick","disableEscapeKeyDown","onClose","DialogTitle","DialogContent","DialogActions","hint","fontWeight","borderBottom","prompt","CmllTrainerView","clsx","_getMask","cmllCubeMaskSelector","useTheme","simBackground","panel","cmllSelector","cmllAufSelector","triggerSelector","orientationSelector","setReveal","reveal","alg","case","desc","moves_c","Grid","item","Paper","margin","elevation","lineHeight","Typography","whiteSpace","onFocus","blur","size","sm","md","Divider","sourceIcon","sourceIconWrap","fab","top","left","ConfigPanelGroup","ssSelector","ssPairOnlySelector","solutionNumSelector","ssPosSelector","fbOnlySelector","fbdrScrambleSelector","fbPieceSolvedSelector","BlockTrainerView","kind","getMask","alt_algs","spaceButtonText","algs","minMove","min","algText","favSelected","setFav","justify","alignItems","icon","case_","solver","action","checkedIcon","root","flexWrap","justifyContent","textAlign","gridList","VisualCube","stage","sch","template","alt","PanoramaTable","GridList","cellHeight","cols","GridListTile","PanoramaView","table","minWidth","FavListView","play","favList","dialogID","setDialogID","dialogDelete","autoFocus","addDialogOpen","setAddDialogOpen","addString","setAddString","handleAddClose","dialogAdd","aria-labelledby","DialogContentText","TextField","multiline","fullWidth","event","onKeyDown","stopPropagation","trim","includes","parseAddString","Table","TableHead","TableRow","TableCell","align","rowSpan","IconButton","edge","TableBody","TabPanel","children","index","other","role","hidden","page","modes","_getInitialHashLocation","location","hash","AppView","useCallback","newValue","setValue","handleInfoClose","showFav","dividers","gutterBottom","AppBar","Tabs","scrollButtons","indicatorColor","Tab","theme_flag","paddingY","Container","maxWidth","initialFavList","initialConfig","arr_ori_flag","ssEOSelector","favListManager","cache","getFavList","localStorage","getItem","setFavList","setItem","configManager","getConfig","vers","item1","keys","item2","setConfig","partial","newConfig","assign","AbstractStateM","this","StateFactory","empty_alg","cmll_algs","trigger_algs","u_auf_algs","ori_algs","alg_generator","selector","algSet","lookup_algset","lookup","Set","get_active_names","prefix","has","Pruner","dist","encode","solved_states","max_depth","moveset","initialized","init","Uint8Array","frontier","total_expanded","log","new_frontier","newState","query","equal","cube2","fbdrPrunerConfig","pow","c1","c2","enc_c","e1","e2","e3","e4","fbPrunerConfig","enc_ce","t1","solve","min2phaseSolve","toMin2Phase","Solver","accum","min_depth","SState","is_solved","pruners","state_count","prune_count","solve_depth","min_depth_","max_depth_","accum_","search","moveTable","depth","solution","STOP","CONTINUE","solutions","capacity","flag","sol","try_push","availableMoves","seen_encodings","new_cube","enc","st","expand","getAvailableMove","k","base","prepareNextMoveTable","depth_l","depth_r","getPruner","SsSolver","is_front","prunerConfig","v","ssPrunerConfig","pruner","CachedSolver","FbdrSolver","FbSolver","min2phase_init","transformed_cube","min2phase_solve","BlockTrainerStateM","solverL","solverR","algdesc","solverName","updateSolutionOnly","use2PhaseScramble","_solve_min2phase","scramble","solutionCap","sort","getRandom","_solve","state1","_updateCase","movestr","conf","_updateCap","FbdrStateM","fbOnly","pairSolved","useMin2PhaseScramble","startsWith","active","_get_pair_solved_front","_get_random_fs_back","_get_random_fs_front","SsStateM","allowed_dr_eo_ep","find","eo_","ep_","drPositionMap","allowed_dr_eo_ep_patterns","_get_random_fb","FbStateM","is_l_only","centers","g_hard","pairs","cc_edges","_find_center_connected_edges","_get_random","CmllStateM","m2_away","algDesc","lse_cube","generator","trig_generator","u_auf_generator","ori_generator","trigger_alg","cmll_alg","u_auf_alg","alg_str","_get2PhaseSolution","history","_generateCase","SolvingStateM","SolvedStateM","getInitialState","initialStateName","scrSource","cubejs","reducer","code","stateM","reduceByKey","reactToConfig","reduceByConfig","rem","replay","reduceByFavlist","createMuiTheme","main","error","red","A400","themeDark","addEventListener","keyCode","document","body","preventDefault","App","useReducer","downHandler","toUpperCase","removeEventListener","appTheme","ThemeProvider","CssBaseline","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","then","registration","unregister","createArray","bitCount","get8Parity","get12Parity","binarySearch","mid","val","fact","perm3","ud2std","std2ud","Cnk","length1","length2","createArrays","move2str","urfMove","ckmv","ckmv2","getFlip","getFlipSym","FlipR2S","EdgeConjugate","SymInv","temps","FlipS2R","setFlip","bitOdd","getTwist","getTwistSym","TwistR2S","CornConjugate","TwistS2R","setTwist","twst","getUDSlice","setUDSlice","getMPerm","t","setMPerm","getMid3","idxA","idxB","setMid3","getURtoUL","getDRtoDL","setEdgePerm","getEdgePerm","getCPermSym","EPermR2S","get8Perm","e2c","CPermS2R","getEPermSym","EPermS2R","URFConjugate","CornMult","urf2","urf1","EdgeMult","invCubieCube","corn","cperm","twist","eperm","flip","set8Perm","cctemp","prod","oriA","oriB","ed","CubeSym","moveCube","SymMult","SymMove","Sym8Mult","Sym8Move","Sym8MultInv","SymMoveUD","MtoEPerm","merge","UDSliceMove","TwistMove","FlipMove","UDSliceConj","UDSliceTwistPrun","UDSliceFlipPrun","TwistFlipPrun","Mid3Move","Mid32MPerm","CParity","CPermMove","EPermMove","MPermMove","MPermConj","MCPermPrun","MEPermPrun","urfidx","csym","mid3","tsym","fsym","corn0","csym0","mid30","e10","e20","prun","maxlength2","valid1","valid2","phase1","maxl","lm","cornx","ex","get4Parity","esym","max","phase2","sb","urf","init2","slicex","twistx","tsymx","flipx","fsymx","midx","edgex","esymx","csymx","initialize","mc","temp","f2","u4","lr2","found","occ","CubieInit","SymState","SymStateF","check","done","sym","symF","fsymxx","idxx","symx","CoordInit","module","exports","cc","Solve","randomCube"],"mappings":"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","file":"static/js/main.a5a59458.chunk.js","sourcesContent":["export enum Face {\n    U = 0, D, F, B, L, R, X\n}\nconst U = Face.U;\nconst D = Face.D;\nconst F = Face.F;\nconst B = Face.B;\nconst L = Face.L;\nconst R = Face.R;\nexport {U, D, F, B, L, R};\n\nexport enum Typ {\n    C = 0, E, T\n}\nconst C = Typ.C;\nconst E = Typ.E;\nconst T = Typ.T;\nexport {C, E, T}\n\nexport type CubieT = {\n    co: Array<number>,\n    cp: Array<number>,\n    eo: Array<number>,\n    ep: Array<number>,\n    tp: Array<number>\n}\n\nexport type FaceletCube = Array<string>\n\nexport type CornerCoord = [Face, Face, Face]\nlet corners_coord : Array<CornerCoord> = [\n    [U,F,L], [U,L,B], [U,B,R], [U,R,F],\n    [D,L,F], [D,B,L], [D,R,B], [D,F,R]\n]\n\nexport type EdgeCoord = [Face, Face]\nlet edges_coord : Array<EdgeCoord> = [\n    [U,F], [U,L], [U,B], [U,R],\n    [D,F], [D,L], [D,B], [D,R],\n    [F,L], [B,L], [B,R], [F,R],\n]\n\nlet cstimer_corners_coord : Array<CornerCoord> = [\n    [U,R,F],[U,F,L], [U,L,B], [U,B,R],\n    [D,F,R],[D,L,F], [D,B,L], [D,R,B]\n]\n\nlet cstimer_edges_coord : Array<EdgeCoord> = [\n    [U, R], [U,F], [U,L], [U,B],\n    [D, R], [D,F], [D,L], [D,B],\n    [F, R], [F,L], [B,L], [B,R]\n]\n\nexport {corners_coord, edges_coord, cstimer_corners_coord, cstimer_edges_coord }\n\nexport type FaceletMapping = [Face[], Face[]][]\n\nexport type PermChg = [number, number]\nexport type OriChg = number\n\nexport type MoveT = {\n    cpc: Array<PermChg>,\n    coc: Array<OriChg>,\n    epc: Array<PermChg>,\n    eoc: Array<OriChg>,\n    tpc: Array<PermChg>,\n    name: string\n}\n\nlet u : MoveT = {\n    cpc: [[0, 1], [1, 2], [2, 3], [3, 0]],\n    coc: [0, 0, 0, 0],\n    epc: [[0, 1], [1, 2], [2, 3], [3, 0]],\n    eoc: [0, 0, 0, 0],\n    tpc: [],\n    name: \"U\"\n}\n\nlet f : MoveT = {\n    cpc: [[0, 3], [3, 7], [7, 4], [4, 0]],\n    coc: [1, 2, 1, 2],\n    epc: [[0, 11], [11, 4], [4, 8], [8, 0]],\n    eoc: [1, 1, 1, 1],\n    tpc: [],\n    name: \"F\",\n}\n\nlet r : MoveT = {\n    cpc: [[3, 2], [2, 6], [6, 7], [7, 3]],\n    coc: [1, 2, 1, 2],\n    epc: [[3, 10], [10, 7], [7, 11], [11, 3]],\n    eoc: [0, 0, 0, 0],\n    tpc: [],\n    name: \"R\",\n}\n\nlet l : MoveT = {\n    cpc: [[0, 4], [4, 5], [5, 1], [1, 0]],\n    coc: [2, 1, 2, 1],\n    epc: [[1, 8], [8, 5], [5, 9], [9, 1]],\n    eoc: [0, 0, 0, 0],\n    tpc: [],\n    name: \"L\",\n}\n\nlet d : MoveT = {\n    cpc: [[4, 7], [7, 6], [6, 5], [5, 4]],\n    coc: [0, 0, 0, 0],\n    epc: [[4, 7], [7, 6], [6, 5], [5, 4]],\n    eoc: [0, 0, 0, 0],\n    tpc: [],\n    name: \"D\",\n}\n\nlet b : MoveT = {\n    cpc: [[1, 5], [5, 6], [6, 2], [2, 1]],\n    coc: [2, 1, 2, 1],\n    epc: [[2, 9], [9, 6], [6, 10], [10, 2]],\n    eoc: [1, 1, 1, 1],\n    tpc: [],\n    name: \"B\",\n}\n\nlet m : MoveT = {\n    cpc: [],\n    coc: [],\n    epc: [[0, 4], [4, 6], [6, 2], [2, 0]],\n    eoc: [1, 1, 1, 1],\n    tpc: [[0, 2], [2, 1], [1, 3], [3, 0]],\n    name: \"M\",\n}\n\nlet e : MoveT = {\n    cpc: [],\n    coc: [],\n    epc: [[8, 9], [9, 10], [10, 11], [11, 8]],\n    eoc: [1, 1, 1, 1],\n    tpc: [[2, 4], [4, 3], [3, 5], [5, 2]],\n    name: \"E\",\n}\n\nlet s : MoveT = {\n    cpc: [],\n    coc: [],\n    epc: [[1, 3], [3, 7], [7, 5], [5, 1]],\n    eoc: [1, 1, 1, 1],\n    tpc: [[0, 5], [5, 1], [1, 4], [4, 0] ],\n    name: \"S\",\n}\n\nexport {u, d, f, b, l, r, m, e, s}\n\nexport type StickerT = [number, number, Typ]\nexport type StickerExtT = [number, number, Typ, Face]\nexport type FaceletT = Array<StickerT>\n\nlet u_face : FaceletT = [\n    [1, 0, C], [2, 0, E], [2, 0, C],\n    [1, 0, E], [0, 0, T], [3, 0, E],\n    [0, 0, C], [0, 0, E], [3, 0, C]\n  ]\n\nlet f_face : FaceletT = [\n    [0, 1, C], [0, 1, E], [3, 2, C],\n    [8, 0, E], [2, 0, T], [11,0, E],\n    [4, 2, C], [4, 1, E], [7, 1, C]\n]\n\nexport {u_face, f_face}\n\nconst FBpairPos : [number, number, number, number][] = [\n    [0, 0, 8, 1], [0, 1, 1, 0], [ 0, 2 , 0, 1],\n    [1, 1, 2, 0], [1, 2, 1, 1],\n    [2, 0, 10, 1], [2, 1, 3, 0], [2, 2, 2, 1],\n    [3, 0, 11, 0], [3, 1, 0, 0], [3, 2, 3, 1],\n    [4, 0, 8, 0], [4, 1, 4, 0],\n    [6, 0, 10, 0], [6, 1, 6, 0], [6, 2, 7, 1],\n    [7, 0, 11, 1], [7, 1, 7, 0], [7, 2, 4, 1]\n]\n\nexport {FBpairPos}\n\nexport type FaceletCubeT = Array<Array<Face>>\n\n// A Cube can be in two representations: cubieCube or faceletCube\n\nlet color_map =`\\\n   UUU\n   UUU\n   UUU\nLLLFFFRRRBBB\nLLLFFFRRRBBB\nLLLFFFRRRBBB\n   DDD\n   DDD\n   DDD`\n\nexport {color_map}\n\nconst defaultKeyMapping : { [key: string]: string } = {\n    \"I\": \"R\",\n    \"K\": \"R'\",\n    \"W\": \"B\",\n    \"O\": \"B'\",\n    \"S\": \"D\",\n    \"L\": \"D'\",\n    \"D\": \"L\",\n    \"E\": \"L'\",\n    \"J\": \"U\",\n    \"F\": \"U'\",\n    \"H\": \"F\",\n    \"G\": \"F'\",\n    \";\": \"y\",\n    \"A\": \"y'\",\n    \"U\": \"r\",\n    \"R\": \"l'\",\n    \"M\": \"r'\",\n    \"V\": \"l\",\n    \"T\": \"x\",\n    \"Y\": \"x\",\n    \"N\": \"x'\",\n    \"B\": \"x'\",\n    \".\": \"M'\",\n    \"X\": \"M'\",\n    \"5\": \"M\",\n    \"6\": \"M\",\n    \"P\": \"z\",\n    \"Q\": \"z'\",\n    \"Z\": \"d\",\n    \"C\": \"u'\",\n    \",\": \"u\",\n    \"/\": \"d'\",\n    \"ENTER\": \"#enter\",\n    \" \": \"#space\",\n  }\n\nexport {defaultKeyMapping}","import React, { useEffect } from 'react'\n\nimport { FaceletCubeT, Face } from \"../lib/Defs\";\nimport * as THREE from 'three';\nimport { useTheme } from '@material-ui/core';\nimport { getConfig } from '../lib/Local';\n\ntype Config = {\n    cube: FaceletCubeT, width: number, height: number, colorScheme: Array<number>, facesToReveal: Face[],\n    bgColor?: string\n}\n\n/*\nHow to propagate control of keypress ..? maybe not here, in the app.\n\nLet's look at click analogy: if a user click on sub-component,\nthat message should be propagated upwards to the parent.\n\nThat is, \"keydown\" should transform to some kind of message, e.g. the resulting cube state\nto be passed to the App, which then decides whether to trigger state change or let the cube keep being solved\n\n*/\n\n\ntype AxesInfo = [THREE.Vector3, THREE.Euler]\nconst TAU = Math.PI * 2;\nconst axesInfo: [THREE.Vector3, THREE.Euler][] = [\n    [new THREE.Vector3(0, 1, 0), new THREE.Euler(-TAU / 4, 0, 0)],\n    [new THREE.Vector3(0, -1, 0), new THREE.Euler(TAU / 4, 0, 0)],\n    [new THREE.Vector3(0, 0, 1), new THREE.Euler(0, 0, 0)],\n    [new THREE.Vector3(0, 0, -1), new THREE.Euler(0, TAU / 2, 0)],\n    [new THREE.Vector3(-1, 0, 0), new THREE.Euler(0, -TAU / 4, 0)],\n    [new THREE.Vector3(1, 0, 0), new THREE.Euler(0, TAU / 4, 0)],\n];\n\nconst setup = function (width: number, height: number, colorScheme?: Array<number>, mode?: string,\n    faces?: Face[]) {\n    let facesToReveal = faces || [Face.L, Face.B, Face.D]\n    const scene = new THREE.Scene()\n    const camera = new THREE.PerspectiveCamera(70, width / height, 0.1, 1000)\n    const renderer = new THREE.WebGLRenderer({ antialias: true })\n    const mag = 1.0\n    const alpha = 0.5\n    const enableBorder = true\n    const geo = new THREE.PlaneGeometry(0.89 * mag * 2, 0.89 * mag * 2)\n    const geo_border = new THREE.PlaneGeometry(1.0 * mag * 2, 1.0 * mag * 2)\n    //const geo_border = new THREE.EdgesGeometry(geo_border_0)\n    renderer.setPixelRatio(window.devicePixelRatio)\n\n    //let colorScheme_ = colorScheme || [0xffffff, 0xffff00,  0x00ff00, 0x0000ff, 0xff8800, 0xff0000]\n\n    mode = mode || \"FRU\"\n\n    if (mode === \"FRU\")\n        camera.position.copy(new THREE.Vector3(2.6 / 1.1, 3 / 1.1, 3 / 1.1))\n    else\n        camera.position.copy(new THREE.Vector3(0 / 1.1, 3 / 1.1, 3 / 1.1))\n\n    //camera.position.copy(new THREE.Vector3(2.5, 5, 5))\n    camera.lookAt(new THREE.Vector3(0, 0, 0))\n\n\n    let stickers_tmpl: THREE.Mesh[], stickerwrap_tmpl: THREE.Mesh\n\n    function updateFacesToReveal(faces: Face[]) {\n        facesToReveal = faces\n    }\n    function updateColorScheme(colorScheme: Array<number>) {\n        let colorScheme_ = colorScheme\n        //console.log(\"update color scheme \", colorScheme_)\n        let materials = Array(7).fill(0).map((_, i) => {\n            let mat = new THREE.MeshBasicMaterial({ color: colorScheme_[i], side: THREE.DoubleSide });\n            mat.alphaTest = alpha;\n            return mat\n        })\n\n        stickers_tmpl = materials.map((mat) => {\n            let mesh = new THREE.Mesh(geo, mat)\n            mesh.setRotationFromEuler(axesInfo[0][1])\n            return mesh\n        })\n\n        let materials_border = new THREE.MeshBasicMaterial({ color: 0x000000, side: THREE.FrontSide })\n        stickerwrap_tmpl = (() => {\n            let mesh = new THREE.Mesh(geo_border, materials_border)\n            mesh.setRotationFromEuler(axesInfo[0][1])\n            return mesh\n        })()\n    }\n\n    function drawCube(faces: FaceletCubeT): THREE.Group {\n        const cube = new THREE.Group();\n        for (let i = 0; i < 6; i++) {\n            const cubie = new THREE.Group();\n            const rot = new THREE.Matrix4().makeRotationFromEuler(axesInfo[i][1]);\n            const rot1 = new THREE.Matrix4().makeRotationFromEuler(axesInfo[1][1]);\n            cubie.setRotationFromMatrix(rot.multiply(rot1))\n            for (let z = -1; z <= 1; z++) {\n                for (let x = -1; x <= 1; x++) {\n                    let idx = (z + 1) * 3 + (x + 1)\n\n                    const curr_tmpl = stickers_tmpl[faces[i][idx]]\n                    const sticker = curr_tmpl.clone()\n                    const stickerwrap = stickerwrap_tmpl.clone()\n\n                    const eps = 0.05\n                    sticker.position.copy(new THREE.Vector3(x * 2, 3, z * 2))\n                    stickerwrap.position.copy(new THREE.Vector3(x * 2, 3 - eps, z * 2))\n\n                    if (facesToReveal.indexOf(i) > -1) { // (i === 5 && mode === \"UF\")) {\n                        const stickerhint = curr_tmpl.clone()\n                        stickerhint.position.copy(new THREE.Vector3(x * 2, 3 + 7 + 3, z * 2))\n                        cubie.add(stickerhint)\n\n                    }\n                    if (enableBorder)\n                        cubie.add(stickerwrap)\n\n                    cubie.add(sticker)\n                }\n\n            }\n            cube.add(cubie)\n        }\n        cube.scale.set(1 / 3, 1 / 3, 1 / 3)\n        return cube\n    }\n\n    let cubeG = new THREE.Group();\n    scene.add(cubeG)\n    const updateCube = (cube: FaceletCubeT) => {\n        scene.remove(cubeG)\n        cubeG = drawCube(cube)\n        scene.add(cubeG)\n    }\n\n    const renderScene = () => {\n        renderer.render(scene, camera)\n    }\n\n    const updateWidthHeight = (width: number, height: number, clearColor?: string) => {\n        const canvas = renderer.domElement;\n        const needResize = canvas.width !== width || canvas.height !== height;\n        if (needResize) {\n            renderer.setSize(width, height, true);\n            clearColor = clearColor || '#eeeeef';\n            //renderer.setViewport( 0, 0, width * window.devicePixelRatio, height * window.devicePixelRatio);\n            renderer.setClearColor(clearColor) // #70788a') //#5a606e') // '#373B43') // '#eeeeee')\n            camera.aspect = width / height;\n            camera.updateProjectionMatrix();\n        }\n    }\n\n\n    const cleanup = () => {\n        geo.dispose()\n        //materials.forEach(m => m.dispose())\n    }\n\n    //let defaultColorScheme = [ 0x00ff00, 0x0000ff, 0xff0000,0xff8800,0xffff00, 0xffffff]\n    updateWidthHeight(width, height)\n    //updateColorScheme(defaultColorScheme)\n    //updateCube(FaceletCube.from_cubie( CubieCube.id))\n\n\n    return {\n        domElement: () => { return renderer.domElement },\n        updateCube,\n        renderScene,\n        updateWidthHeight,\n        cleanup,\n        updateColorScheme,\n        updateFacesToReveal\n    }\n}\n\nlet cubeSim = setup(370, 370)\n\nfunction CubeSim(props: Config) {\n    const mount = React.useRef<HTMLDivElement | null>(null)\n    let { width, height } = props\n\n    useEffect(() => {\n        let dom = cubeSim.domElement()\n        let current = mount.current!\n\n        current.appendChild(dom)\n        cubeSim.updateFacesToReveal(props.facesToReveal)\n        cubeSim.updateWidthHeight(width, height, props.bgColor || \"#eeeeef\")\n        cubeSim.updateColorScheme(props.colorScheme)\n        cubeSim.updateCube(props.cube)\n        cubeSim.renderScene()\n\n        return () => {\n            current.removeChild(dom)\n        }\n    })\n\n    return <div\n        ref={mount}\n        style={{ width: props.width, height: props.height }}\n    />;\n}\n\nexport default CubeSim","let rand_int = (r: number) => {\n    return Math.floor(Math.random() * r)\n}\n\nlet rand_incl = (l: number, r: number) => {\n    return rand_int(r - l + 1) + l;\n}\nlet rand_choice = function<T>(arr: T[]) {\n    return arr[rand_int(arr.length)]\n}\n\nlet rand_shuffle = function<T>(arr: T[]) {\n    for (let i = 0, l = arr.length; i < l - 1; i++) {\n        let j = rand_incl(i, l - 1)\n        let tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp\n    }\n    return arr\n}\n\nlet getParity = (perm: number[]) => {\n    let visited = Array(perm.length).fill(false)\n    let follow = (i: number, cnt: number) : number => {\n        if (visited[i]) {\n            return 0\n        } else {\n            visited[i] = 1\n            if (visited[perm[i]]) {\n                return cnt;\n            } else\n                return follow(perm[i], cnt + 1)\n        }\n    }\n    let res = 0\n    for (let x of perm) {\n        res += follow(x, 0)\n    }\n    return res\n}\n\nlet arrayEqual = function<T>(arr1: T[], arr2: T[]) {\n    if (arr1.length !== arr2.length) return false;\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i]) return false;\n    }\n    return true;\n}\n\nlet encodeArr = function(base: number, rarr: number[]) {\n    let int = 0\n    for (let i = rarr.length - 1; i >= 0; i--)\n        int = rarr[i] + int * base\n    return int\n}\n\nexport {rand_int, rand_choice, rand_shuffle, getParity, arrayEqual, encodeArr}","import { MoveT, CubieT, OriChg, PermChg, StickerT, StickerExtT, CornerCoord, EdgeCoord, cstimer_corners_coord, cstimer_edges_coord } from \"./Defs\";\nimport { u, d, f, b, l, r, m, e, s} from \"./Defs\";\nimport { FaceletT, FaceletCubeT, corners_coord, edges_coord, u_face, f_face, color_map } from \"./Defs\";\nimport { Typ, Face, C, E, T, U, D, F, B, L, R } from \"./Defs\";\nimport { rand_int, rand_shuffle, getParity, rand_choice, arrayEqual } from \"./Math\";\n\nconst C_MOD = 3;\nconst E_MOD = 2;\nconst T_MOD = 1;\n\nlet CubieCube = (function () {\n    /*\n    Cube should be represented as a simple struct {cp, eo, ep, eo, tp}.\n    The addition of tp is not necessary, but helps us deal with slice moves in Roux during search and simcube.\n    */\n\n    /*\n    We will follow the programming pattern of returning an object with all the public functions.\n    These functions will mostly have no side effects, i.e. no 'this' will be used. instead, the object must pass itself\n    in as the first argument. This makes sense because cube moves usually changes the state representation by a lot,\n    and re-assigning the result to 'this' would be cumbersome.\n    */\n    let id: CubieT = {\n        // init state\n        cp: [0, 1, 2, 3, 4, 5, 6, 7],\n        co: [0, 0, 0, 0, 0, 0, 0, 0],\n        ep: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n        eo: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        tp: [0, 1, 2, 3, 4, 5] // UD FB LR\n    }\n\n    let apply_partial = (o: Array<number>, p: Array<number>, oc: Array<OriChg>, pc: Array<PermChg>, mod: number) => {\n        let o_new = [...o];\n        let p_new = [...p];\n        console.assert(oc.length === pc.length)\n\n        for (let i = 0; i < oc.length; i++) {\n            //let [src, dst] = pc[i];\n            let src = pc[i][0], dst = pc[i][1];\n            p_new[dst] = p[src];\n            o_new[dst] = (o[src] + oc[i]) % mod;\n        }\n        return [o_new, p_new]\n    }\n\n    let apply_one = (cube: CubieT, move: MoveT) => {\n        let [co, cp] = apply_partial(cube.co, cube.cp, move.coc, move.cpc, C_MOD)\n        let [eo, ep] = apply_partial(cube.eo, cube.ep, move.eoc, move.epc, E_MOD)\n        let toc = Array(move.tpc.length).fill(0)\n        let [, tp] = apply_partial([0, 0, 0, 0, 0, 0], cube.tp, toc, move.tpc, T_MOD)\n        return ({ co, cp, eo, ep, tp })\n    }\n\n    let apply = (cube: CubieT, move: MoveT | Array<MoveT>) => {\n        if (Array.isArray(move)) {\n            for (let i = 0; i < move.length; i++) {\n                cube = apply_one(cube, move[i])\n            }\n            return cube\n        } else {\n            return apply_one(cube, move)\n        }\n    }\n\n    let apply_str = (cube: CubieT, str: string) => {\n        return apply(cube, Move.parse(str))\n    }\n\n    let from_move = (move: MoveT | Array<MoveT>) => {\n        return apply(id, move)\n    }\n\n    let from_string = (str: string) => {\n        return from_move(Move.parse(str))\n    }\n\n    let clone = (cube: CubieT) => {\n        return {\n            co: [...cube.co],\n            cp: [...cube.cp],\n            eo: [...cube.eo],\n            ep: [...cube.ep],\n            tp: [...cube.tp]\n        }\n    }\n\n    let _rotate_coord = (fs: Face[]) => {\n        let faces = [...fs] as Face[]\n        let last_face = faces[faces.length - 1];\n        for (let i = faces.length - 1; i > 0; i--) {\n            faces[i] = faces[i - 1];\n        }\n        faces[0] = last_face\n        return faces\n    }\n    let _backward_rotate_coord = (fs: Face[]) => {\n        let faces = [...fs] as Face[]\n        let first_face = faces[0]\n        for (let i = 0; i < faces.length - 1; i++) {\n            faces[i] = faces[i + 1];\n        }\n        faces[faces.length - 1] = first_face\n        return faces\n    }\n\n    let to_facelet_mapping = (cube: CubieT,corners_coord: CornerCoord[], edges_coord: EdgeCoord[]) => {\n        let facelet_mapping : [Face[], Face[]][]= []\n\n        for (let i = 0; i < 8; i++) {\n            let pos = corners_coord[i] as Face[]\n            let piece = corners_coord[cube.cp[i]] as Face[]\n\n            for (let j = 0; j < cube.co[i];j++) {\n                piece = _rotate_coord(piece)\n            }\n            facelet_mapping.push([pos, piece])\n        }\n        for (let i = 0; i < 12; i++) {\n            let pos = edges_coord[i] as Face[]\n            let piece = edges_coord[cube.ep[i]] as Face[]\n            for (let j = 0; j < cube.eo[i];j++) {\n                piece = _rotate_coord(piece)\n            }\n            facelet_mapping.push([pos, piece])\n        }\n        return facelet_mapping\n    }\n\n    let from_facelet_mapping = (fm: [Face[], Face[]][], custom_corners_coord: CornerCoord[], custom_edges_coord: EdgeCoord[]) : CubieT => {\n        let cube = CubieCube.clone(CubieCube.id)\n        let idxOf = (a_: CornerCoord[] | EdgeCoord[], target: Face[]) => {\n            let a = a_ as Face[][]\n            for (let i = 0; i < a.length; i++) {\n                if (arrayEqual(a[i], target)) return i;\n            }\n            return -1;\n        }\n        let getOriPerm =(a_: CornerCoord[] | EdgeCoord[], target: Face[]): [number, number]  => {\n            let ori = 0;\n            let perm = idxOf(a_, target)\n\n            while (perm === -1) {\n                ori++;\n                target = _backward_rotate_coord(target) as any\n                perm = idxOf(a_, target)\n\n                if (ori > 3) break;\n            }\n            return [ori, perm]\n        }\n\n        for (let coord_pair of fm) {\n            let pos = coord_pair[0], piece = coord_pair[1]\n            if (pos.length === 2) {\n                let newpos = idxOf(custom_edges_coord, pos);\n                let [newOri, newPerm] = getOriPerm(custom_edges_coord, piece);\n                cube.eo[newpos] = newOri;\n                cube.ep[newpos] = newPerm;\n            } else {\n                let newpos = idxOf(custom_corners_coord, pos);\n                let [newOri, newPerm] = getOriPerm(custom_corners_coord, piece);\n                cube.co[newpos] = newOri;\n                cube.cp[newpos] = newPerm;\n            }\n        }\n        return cube\n    }\n\n    let to_cstimer_cube = (cube: CubieT) => {\n        let facelet_mapping = to_facelet_mapping(cube, corners_coord, edges_coord)\n        let cstimer_cube = from_facelet_mapping(facelet_mapping, cstimer_corners_coord, cstimer_edges_coord)\n\n        return cstimer_cube\n    }\n\n    let is_solveable = (cube: CubieT) => {\n        if (cube.tp[0] !== 0) {\n            cube = CubieCube.apply(cube, Move.parse(\"M2\"))\n        }\n        let perm_correct = (getParity(cube.cp) + getParity(cube.ep)) % 2 === 0\n        let ori_correct = (cube.co.reduce((x, y) => x + y, 0) % 3 === 0) && (cube.eo.reduce((x, y) => x + y, 0) % 2 === 0)\n        return perm_correct && ori_correct\n    }\n\n    return {\n        id,\n        apply,\n        apply_str,\n        clone,\n        from_move,\n        from_string,\n        to_cstimer_cube,\n        is_solveable\n    }\n\n})()\n\n\n/* Moves */\n/* We will generate all the moves based on the base moves and rotations, and return them in an array */\nlet Move = function () {\n    let from_cube = (cube: CubieT, name: string): MoveT => {\n        let get_change = (p: Array<number>, o: Array<number>, acc_p: Array<PermChg>, acc_o: Array<OriChg>) => {\n            for (let i = 0; i < p.length; i++) {\n                if (i === p[i] && o[i] === 0) {\n                } else {\n                    acc_p.push([p[i], i]);\n                    acc_o.push(o[i]);\n                }\n            }\n        }\n        let cpc: Array<PermChg> = [];\n        let coc: Array<OriChg> = [];\n        let epc: Array<PermChg> = [];\n        let eoc: Array<OriChg> = [];\n        let tpc: Array<PermChg> = [];\n        get_change(cube.cp, cube.co, cpc, coc);\n        get_change(cube.ep, cube.eo, epc, eoc);\n        get_change(cube.tp, [0, 0, 0, 0, 0, 0], tpc, []);\n        return {\n            cpc, coc, epc, eoc, tpc, name\n        }\n    }\n    let from_moves = (moves: Array<MoveT>, name: string): MoveT => {\n        let move = from_cube(CubieCube.apply(CubieCube.id, moves), name)\n        return move\n    }\n    let make_rot_set = (move: MoveT): Array<MoveT> => {\n        return [move,\n            from_moves([move, move], move.name + \"2\"),\n            from_moves([move, move, move], move.name + \"'\")\n        ]\n    }\n    let add_auf = (moves: Array<MoveT>, auf_moves?: Array<MoveT | MoveT[]>): MoveT[] => {\n        auf_moves = auf_moves || [[], Move.all[\"U\"], Move.all[\"U'\"], Move.all[\"U2\"]]\n        let auf_move = auf_moves[Math.floor(Math.random() * auf_moves.length)]\n        if (Array.isArray(auf_move)) {\n            return moves.concat(auf_move)\n        } else {\n            moves.push(auf_move)\n            return moves\n        }\n    }\n\n    let generate_base_moves = () => {\n        let us = make_rot_set(u);\n        let fs = make_rot_set(f)\n        let rs = make_rot_set(r)\n        let ls = make_rot_set(l)\n        let ds = make_rot_set(d)\n        let bs = make_rot_set(b)\n        let ms = make_rot_set(m)\n        let es = make_rot_set(e);\n        let ss = make_rot_set(s);\n\n        let rw = from_moves([r, ms[2]], \"r\")\n        let rws = make_rot_set(rw)\n        let lw = from_moves([l, m], \"l\")\n        let lws = make_rot_set(lw)\n        let uw = from_moves([u, e], \"u\")\n        let uws = make_rot_set(uw)\n\n        let x = from_moves([r, ls[2], ms[2]], \"x\")\n        let xs = make_rot_set(x)\n        let y = from_moves([u, e, ds[2]], \"y\")\n        let ys = make_rot_set(y)\n        let z = from_moves([x, y, x, x, x], \"z\")\n        let zs = make_rot_set(z)\n        let moves = [\n            us, fs, rs, ls, ds, bs, ms, es, ss,\n            xs, ys, zs,\n            rws, lws, uws\n        ].flat()\n        let moves_dict: { [key: string]: MoveT } = Object.create({})\n        moves.forEach(m => moves_dict[m.name] = m)\n        return moves_dict\n    }\n\n    const moveCost = function() {\n        let pairs : [string, number][]= [\n            [\"U\", 1], [\"U'\", 1], [\"U2\", 1.4],\n            [\"R\", 1], [\"R'\", 1], [\"R2\", 1.4],\n            [\"r\", 1], [\"r'\", 1], [\"r2\", 1.5],\n            [\"L\", 1], [\"L'\", 1], [\"L2\", 1.4],\n            [\"F\", 1.4], [\"F'\", 1.4], [\"F2\", 1.8],\n            [\"B\", 1.6], [\"B'\", 1.6], [\"B2\", 2.2],\n            [\"D\", 1.4], [\"D'\", 1.4], [\"D2\", 1.7],\n            [\"M\", 1.5], [\"M'\", 1.2], [\"M2\", 1.8],\n            [\"S\", 1.7], [\"S'\", 1.7], [\"S2\", 3.0],\n            [\"E\", 1.5], [\"E'\", 1.5], [\"E2\", 2.4],\n        ]\n        let costMap = new Map(pairs)\n        return costMap\n    }()\n    function evaluate(moves : MoveT[]) {\n        let sum = 0\n        for (let m of moves) {\n            const value = (moveCost.get(m.name)) || 1.4\n            sum += value\n        }\n        return sum\n    }\n\n    let all_moves = generate_base_moves()\n    let parse = (str: string) => {\n        let tokens = []\n        let token = \"\"\n        for (let i = 0; i < str.length; i++) {\n            let ch = str[i]\n            if (ch === '2' || ch === '\\'') {\n                if (token.length === 1) {\n                    token += str[i];\n                    tokens.push(token)\n                    token = \"\"\n                }\n            } else if (ch === ' ') {\n                if (token.length > 0) {\n                    tokens.push(token); token = \"\";\n                }\n            } else {\n                const ord = ch.charCodeAt(0)\n                if ( (65 <= ord && ord < 65 + 26) || (97 <= ord && ord < 97 + 26)) {\n                    if (token.length > 0) {\n                        tokens.push(token)\n                        token = \"\"\n                    }\n                    token += str[i]\n                }\n            }\n        }\n        if (token.length > 0) tokens.push(token);\n\n        let res: MoveT[] = []\n        for (let token of tokens) {\n            let move = all_moves[token]\n            if (move) {\n                res.push(move)\n            } else {\n                return []\n                //throw Error(\"Invalid move sequence \" + move)\n            }\n        }\n        return res\n    }\n\n    let combine = (move1: MoveT, move2: MoveT) : MoveT[] => {\n        const getCnt = (name : string) => {\n            if (name.length === 1) return 1\n            return name[1] === \"2\" ? 2 : 3\n        }\n        const getStr = (cnt : number) => {\n            return (cnt === 1) ? \"\" : (cnt === 2 ? \"2\" : \"'\")\n        }\n        if (move1.name[0] === move2.name[0]) {\n            let cnt = (getCnt(move1.name) + getCnt(move2.name)) % 4\n            if (cnt === 0) return []\n            else return [ all_moves[move1.name[0] + getStr(cnt)] ]\n        } else {\n            return [move1, move2]\n        }\n    }\n    let collapse = (moves: MoveT[]) : MoveT[] => {\n        let newMoves : MoveT[] = []\n        while (moves.length > 0) {\n            const nextMove = moves.shift()!\n            if (newMoves.length === 0) {\n                newMoves.push(nextMove)\n            } else {\n                const move = newMoves.pop()!\n                const combined = combine(move, nextMove)\n                for (let m of combined)\n                    newMoves.push(m)\n            }\n        }\n        return newMoves;\n    }\n    let inv = (move: MoveT | MoveT[]): MoveT[] => {\n        if (move === undefined || move === null) {\n            return []\n        }\n        if (Array.isArray(move)) {\n            return move.slice(0).reverse().map(inv).flat()\n        } else {\n            let name: string\n            switch (move.name[move.name.length - 1]) {\n                case \"'\": name = move.name.slice(0, move.name.length - 1); break\n                case \"2\": name = move.name; break\n                default: name = move.name + \"'\"\n            }\n            return [all_moves[name]]\n        }\n    }\n\n    let to_string = (move: MoveT | MoveT[]): string => {\n        if (Array.isArray(move)) {\n            return move.map(to_string).join(\" \") + \" \"\n        } else {\n            return move.name\n        }\n    }\n    \n    return {\n        all: all_moves,\n        parse: parse,\n        inv: inv,\n        add_auf: add_auf,\n        to_string: to_string,\n        from_moves,\n        from_cube,\n        evaluate,\n        collapse,\n    }\n}()\n\n/* Faces */\nlet FaceletCube = function () {\n    let mult_move = (face: FaceletT, move: MoveT): FaceletT => {\n        let face_new: FaceletT = [...face]\n        let mod_for_typ = (typ: Typ) => {\n            switch (typ) {\n                case C: return 3;\n                case E: return 2;\n                case T: return 1\n            }\n        }\n        let work = (p: PermChg, o: number, typ: Typ) => {\n            let mod = mod_for_typ(typ)\n            let [p1, p2] = p\n            for (let i = 0; i < face.length; i++) {\n                let [p_curr, o_curr, typ_curr] = face[i];\n                if (typ_curr === typ && p_curr === p1) {\n                    face_new[i] = [p2, (o_curr + o) % mod, typ]\n                }\n            }\n        }\n        for (let i = 0; i < move.cpc.length; i++) {\n            work(move.cpc[i], move.coc[i], C)\n        }\n        for (let i = 0; i < move.epc.length; i++) {\n            work(move.epc[i], move.eoc[i], E)\n        }\n        for (let i = 0; i < move.tpc.length; i++) {\n            work(move.tpc[i], 0, T)\n        }\n        return face_new\n    }\n    let color_of_c = (p: number, o1: number, o2: number) =>\n    corners_coord[p][(3 - o1 + o2) % 3];\n    let color_of_e = (p: number, o1: number, o2: number) =>\n        edges_coord[p][(2 - o1 + o2) % 2];\n    let color_of_t = (p: number) => [U, D, F, B, L, R][p]\n\n    let color_of_sticker = (cube: CubieT, sticker: StickerT) => {\n        let [p, o, typ] = sticker\n        if (typ === C) {\n            return color_of_c(cube.cp[p], cube.co[p], o)\n        } else if (typ === E) {\n            return color_of_e(cube.ep[p], cube.eo[p], o)\n        } else if (typ === T) {\n            return color_of_t(cube.tp[p])\n        } else {\n            throw Error(\"unidentified type \" + typ)\n        }\n    }\n\n    let from_cubie_partial = (cube: CubieT, facelet: FaceletT) => {\n        return facelet.map(s => color_of_sticker(cube, s))\n    }\n    let from_cubie_partial_masked = (cube: CubieT, facelet: FaceletT, mask: Mask) => {\n        return facelet.map(([p, o, typ]) => {\n            if (typ === C) {\n                if (mask.cp[cube.cp[p]] === 1)\n                    return color_of_c(cube.cp[p], cube.co[p], o)\n                else\n                    return Face.X\n            } else if (typ === E) {\n                if (mask.ep[cube.ep[p]] === 1)\n                    return color_of_e(cube.ep[p], cube.eo[p], o)\n                else\n                    return Face.X\n            } else if (typ === T) {\n                if (mask.tp && mask.tp[cube.tp[p]] === 0)\n                    return Face.X\n                else\n                    return color_of_t(cube.tp[p])\n            } else {\n                throw Error(\"unidentified type \" + typ)\n            }\n        })\n    }\n\n    let moves = Move.all\n    let generate_base_facelets = () => {\n        let d_face = mult_move(f_face, moves[\"x'\"])\n        let l_face = mult_move(f_face, moves[\"y\"])\n        let r_face = mult_move(f_face, moves[\"y'\"])\n        let b_face = mult_move(f_face, moves[\"y2\"])\n        return {\n            d_face, l_face, r_face, b_face\n        }\n    }\n    let { d_face, l_face, r_face, b_face } = generate_base_facelets()\n\n    let from_cubie = (cube: CubieT, mask?: Mask): FaceletCubeT => {\n        //console.log(\"converting from cube\", cube)\n        let faces = [u_face, d_face, f_face, b_face, l_face, r_face]\n        if (mask)\n            return faces.map((facelet) => from_cubie_partial_masked(cube, facelet, mask))\n        else\n            return faces.map((facelet) => from_cubie_partial(cube, facelet))\n    }\n\n    let to_unfolded_cube_str = (faceletCube: FaceletCubeT): String => {\n        let face_count = [0, 0, 0, 0, 0, 0];\n        let str_face_map: { [key: string]: Face } = {\n            \"U\": U, \"D\": D, \"F\": F, \"B\": B, \"L\": L, \"R\": R\n        }\n        let face_str_map = \"UDFBLR\"\n        let color_cube = \"\"\n        for (let i = 0; i < color_map.length; i++) {\n            let face_char = color_map[i];\n            if (str_face_map.hasOwnProperty(face_char)) {\n                let face: number = str_face_map[face_char] as number;\n                let count = face_count[face];\n                let color = faceletCube[face][count]\n                color_cube += face_str_map[color]\n                face_count[face] += 1;\n            } else {\n                color_cube += color_map[i];\n            }\n        }\n        return color_cube;\n    }\n\n    let to_cubejs_str = (faceletCube: FaceletCubeT) : String => {\n        let face_order = [U, R, F, D, L, B];\n        let face_str_map = \"UDFBLR\";\n        let s = \"\";\n        for (let face of face_order) {\n            for (let i = 0 ; i < 9; i++) {\n                s += face_str_map[faceletCube[face][i]]\n            }\n        }\n        return s\n    }\n\n    return {\n        from_cubie,\n        to_unfolded_cube_str,\n        to_cubejs_str,\n        color_of_sticker,\n        faces: {\n            u_face, d_face, l_face, r_face, f_face, b_face\n        }\n    }\n}()\n\ntype Mask = {\n    co?: number[],\n    eo?: number[],\n    tp?: number[],\n    cp: number[],\n    ep: number[],\n}\nfunction mask_copy (m: Mask) {\n    return {\n        co: m.co && [...m.co],\n        eo: m.eo && [...m.eo],\n        tp: m.tp && [...m.tp],\n        cp: [...m.cp],\n        ep: [...m.ep]\n    }\n}\n\nconst lse_mask: Mask = {\n    cp: [1, 1, 1, 1, 1, 1, 1, 1],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1],\n}\n\nconst solved_mask : Mask = {\n    cp: [1, 1, 1, 1,  1, 1, 1, 1],\n    ep:[1, 1, 1, 1,  1, 1, 1, 1, 1, 1, 1, 1],\n}\nconst empty_mask : Mask = {\n    cp: [0, 0, 0, 0, 0, 0, 0, 0],\n    ep: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n}\nconst dl_solved_mask : Mask = {\n    cp: [0, 0, 0, 0, 0, 0, 0, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]\n}\nconst db_solved_mask : Mask = {\n    cp: [0, 0, 0, 0, 0, 0, 0, 0],\n    ep: [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0]\n}\nconst fs_back_mask: Mask = {\n    cp: [0, 0, 0, 0, 0, 1, 0, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0]\n}\nconst fs_front_mask: Mask = {\n    cp: [0, 0, 0, 0, 1, 0, 0, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0]\n}\nconst fb_mask: Mask = {\n    cp: [0, 0, 0, 0, 1, 1, 0, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0],\n    tp: [0, 0, 0, 0, 1, 1]\n}\nconst zhouheng_mask: Mask = {\n    cp: [0, 0, 0, 0, 0, 0, 0, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0],\n    tp: [0, 0, 0, 0, 1, 1]\n}\nconst fbdr_mask: Mask = {\n    cp: [0, 0, 0, 0, 1, 1, 0, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0],\n    tp: [0, 0, 0, 0, 1, 1]\n}\nconst ss_front_mask: Mask = {\n    cp: [0, 0, 0, 0, 1, 1, 0, 1],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1],\n    tp: [0, 0, 0, 0, 1, 1]\n}\nconst ss_back_mask: Mask = {\n    cp: [0, 0, 0, 0, 1, 1, 1, 0],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0],\n    tp: [0, 0, 0, 0, 1, 1]\n}\nconst sb_mask : Mask = {\n    cp: [0, 0, 0, 0, 1, 1, 1, 1],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1],\n    tp: [0, 0, 0, 0, 1, 1]\n}\nconst cmll_mask : Mask = {\n    cp: [1, 1, 1, 1, 1, 1, 1, 1],\n    ep: [0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1],\n    tp: [0, 0, 0, 0, 1, 1]\n}\n\nlet CubeUtil = (() => {\n    let is_cube_solved = (cube: CubieT) => {\n        let id = CubieCube.id\n        return arrayEqual(cube.co, id.co) &&\n               arrayEqual(cube.eo, id.eo) &&\n               arrayEqual(cube.cp, id.cp) &&\n               arrayEqual(cube.ep, id.ep)\n    }\n\n    function ext(stickers: StickerT[], f: Face) : StickerExtT[] {\n        return stickers.map(x => {\n            let [a, b, c] = x;\n            return [a,b,c,f]\n        })\n    }\n\n    let { u_face, d_face, l_face, r_face, f_face, b_face } = FaceletCube.faces\n    let stickers = [ ...ext(u_face, U), ...ext(d_face, D),\n        ...ext(l_face, L), ...ext(r_face, R), ...ext(f_face,F),  ...ext(b_face, B)]\n\n    let find_pairs = function() {\n        // enumerate each sticker\n        let edge_stickers = stickers.filter(s => s[2] === Typ.E)\n        let corner_stickers = stickers.filter(s => s[2] === Typ.C)\n\n        let ep_stickers : StickerExtT[][] = Array(12).fill(0).map(_ => Array(0))\n        edge_stickers.map(s => ep_stickers[s[0]].push(s) )\n\n        let cp_stickers : StickerExtT[][] = Array(8).fill(0).map(_ => Array(0))\n        corner_stickers.map(s => cp_stickers[s[0]].push(s))\n\n        const epcp_pairs : [number, number][] = []\n        for (let e = 0; e < 12; e++) {\n            for (let c = 0; c < 8; c++) {\n                let efs = ep_stickers[e]\n                let cfs = cp_stickers[c]\n\n                let match = 0;\n                efs.forEach( (e) => {\n                    cfs.forEach( (c) => { if (e[3] === c[3]) match++ })\n                })\n                if (match === 2) {\n                    epcp_pairs.push( [e, c] )\n                }\n            }\n        }\n\n\n        let get_color = (cube: CubieT, s: StickerExtT) => {\n            return FaceletCube.color_of_sticker(cube, [s[0], s[1], s[2]] )\n        }\n        let func = (cube: CubieT) => {\n            // now we process the cube\n            let connected_pairs : [number, number][]= []\n            //console.log(\"All neighboring pairs \", epcp_pairs)\n            for (let [ep, cp] of epcp_pairs) {\n                let efs = ep_stickers[ep]\n                let cfs = cp_stickers[cp]\n                let cnt = 0;\n                efs.forEach( (e) => {\n                    const c = cfs.filter( (c) => e[3] === c[3])[0]\n                    if (get_color(cube, e) === get_color(cube, c)) cnt++;\n                })\n                if (cnt === 2) {\n                    connected_pairs.push([ep, cp])\n                }\n            }\n            return connected_pairs\n        }\n        return func\n    }()\n\n    let is_mask_solved = (cube: CubieT, { co, eo, cp, ep }: Mask, premove: (MoveT | MoveT[])[]) => {\n        //let moves = [ [], Move.all[\"U\"], Move.all[\"U'\"], Move.all[\"U2\"] ]\n        co = co || cp\n        eo = eo || ep\n        for (let move of premove) {\n            let cube1 = CubieCube.apply(cube, move)\n            let solved = true\n            for (let i = 0; i < 8 && solved; i++) {\n                if ((co[i] && cube1.co[i] !== 0)\n                    || (cp[i] && cube1.cp[i] !== i)) {\n                    solved = false;\n                }\n            }\n            for (let i = 0; i < 12 && solved; i++) {\n                if ((eo[i] && cube1.eo[i] !== 0)\n                    || (ep[i] && cube1.ep[i] !== i)) {\n                    solved = false;\n                }\n            }\n            if (solved) return true;\n        }\n        return false;\n    }\n\n    const u_premove = [[], Move.all[\"U\"], Move.all[\"U'\"], Move.all[\"U2\"]]\n    const m2_premove = [[], Move.all[\"M2\"]]\n    //let m2u_premove = [[], Move.parse(\"U\"), Move.parse(\"U'\"), Move.parse(\"U2\"),\n    //Move.parse(\"M2\"), Move.parse(\"M2U\"), Move.parse(\"M2U'\"), Move.parse(\"M2U2\")]\n\n    let is_cmll_solved = (cube: CubieT) => {\n        return is_mask_solved(cube, lse_mask, u_premove)\n    }\n\n    let get_random_with_mask = ({ co, eo, cp, ep }: Mask): CubieT => {\n        co = co || cp\n        eo = eo || ep\n        // get_random -- figure out which masks are 0, and assign random to these\n        let random_ori = (ori_mask: number[], typ: Typ) => {\n            let ori = Array(ori_mask.length).fill(0)\n            let mod = (typ === C) ? 3 : 2\n            let sum: number\n            do {\n                sum = 0\n                for (let i in ori_mask) {\n                    if (ori_mask[i] === 0) {\n                        ori[i] = rand_int(mod)\n                        sum += ori[i]\n                    }\n                }\n            } while (sum % mod > 0)\n            return ori\n        }\n        let random_perm = (perm_mask: number[]) => {\n            let perm: number[] = Array(perm_mask.length).fill(0)\n            let undecided: number[] = []\n            for (let i = 0; i < perm_mask.length; i++) {\n                if (perm_mask[i] === 0) {\n                    undecided.push(i)\n                } else {\n                    perm[i] = i\n                }\n            }\n            rand_shuffle(undecided)\n            for (let i = 0, cnt = 0; i < perm_mask.length; i++) {\n                if (perm_mask[i] === 0) {\n                    perm[i] = undecided[cnt]\n                    cnt += 1\n                }\n            }\n            return perm\n        }\n        let cp_rand, ep_rand, par\n        do {\n            [cp_rand, ep_rand] = [random_perm(cp), random_perm(ep)]\n            par = (getParity(cp_rand) + getParity(ep_rand)) & 1\n        } while (par > 0)\n\n        return {\n            co: random_ori(co, C),\n            cp: cp_rand,\n            eo: random_ori(eo, E),\n            ep: ep_rand,\n            tp: [0, 1, 2, 3, 4, 5]\n        }\n    }\n\n    let get_random_lse = (): CubieT => {\n        let cube = get_random_with_mask(lse_mask)\n        return CubieCube.apply(cube, rand_choice(m2_premove))\n    }\n\n    const ori_to_color_scheme = (() => {\n        // UDFBLR\n        // specify the colors for uf\n        // how to do this?\n        const arr: [string, number][] = [\n            [\"G\", 0x00ff00],\n            [\"B\", 0x0000ff],\n            [\"R\", 0xff0000],\n            [\"O\", 0xff8800],\n            [\"Y\", 0xffff00],\n            [\"W\", 0xffffff],\n            [\"X\", 0xcccccc]\n        ]\n        const colorMap = new Map<string, number>(arr)\n        // UDFBLR from UF\n        // INFERR UFR from UF?\n        const valid_schemes = [\n            \"WYGBOR\",\n            \"WYBGRO\",\n            \"WYROGB\",\n            \"WYORBG\",\n            \"YWGBRO\",\n            \"YEBGOR\",\n            \"YWROBG\",\n            \"YWORGB\",\n\n            \"GBWYRO\",\n            \"GBYWOR\",\n            \"GBROYW\",\n            \"GBORWY\",\n            \"BGWYOR\",\n            \"BGYWRO\",\n            \"BGROWY\",\n            \"BGORYW\",\n\n            \"ORWYGB\",\n            \"ORYWBG\",\n            \"ORGBYW\",\n            \"ORBGWY\",\n            \"ROWYBG\",\n            \"ROYWGB\",\n            \"ROGBWY\",\n            \"ROBGYW\",\n        ]\n        const valid_scheme_mapper: { [key: string]: number[] } = Object.create({})\n        valid_schemes.forEach(s => {\n            let arr = s.split('').map(ch => colorMap.get(ch)!)\n            arr.push(colorMap.get(\"X\")!)\n            valid_scheme_mapper[s[0] + s[2]] = arr\n        })\n\n        const mapper = (sel: string) => {\n            return valid_scheme_mapper[sel]\n        }\n\n        return mapper\n    })()\n\n    return {\n        is_cmll_solved,\n        get_random_lse,\n        get_random_with_mask,\n        ori_to_color_scheme,\n        is_cube_solved,\n        find_pairs,\n        stickers\n    }\n})()\n\nlet Mask = {\n    lse_mask, fs_back_mask, fs_front_mask, fbdr_mask, fb_mask, sb_mask, cmll_mask, ss_front_mask, ss_back_mask,\n    empty_mask, dl_solved_mask, db_solved_mask, solved_mask, zhouheng_mask,\n    copy: mask_copy\n}\n\nexport { CubieCube, Move, FaceletCube, CubeUtil, Mask }\n","export type Selector = {\n    names: string[],\n    flags: number[],\n    kind: string,\n    label?: string\n}\n\nfunction getActiveNames(s : Selector) {\n    let ans = []\n    for (let i = 0; i < s.flags.length; i++) {\n        if (s.flags[i] === 1) {\n            ans.push(s.names[i])\n        }\n    }\n    return ans\n}\n\nfunction getActiveName(s : Selector) {\n    for (let i = 0; i < s.flags.length; i++) {\n        if (s.flags[i] === 1) {\n            return (s.names[i])\n        }\n    }\n    return \"\"\n}\n\nexport {getActiveNames, getActiveName}\n","import React from 'react'\n\nimport {\n    FormControlLabel, FormGroup, Button, makeStyles, Box,\n    FormControl, FormLabel, RadioGroup, Checkbox, Dialog, DialogTitle, DialogContent, DialogActions\n} from '@material-ui/core';\n\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport Radio from '@material-ui/core/Radio';\n\nimport { AppState, Config, Action } from '../Types';\nimport { Selector } from '../lib/Selector';\n\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n      paddingTop: theme.spacing(0),\n      paddingBottom: theme.spacing(2),\n      backgroundColor: theme.palette.background.default\n    },\n    button: {\n      width: \"100%\",\n    },\n    paper: {\n      padding: theme.spacing(3),\n      display: 'flex',\n      overflow: 'auto',\n      flexDirection: 'column',\n    },\n    canvasPaper: {\n      padding: theme.spacing(0),\n      display: 'flex',\n      overflow: 'auto',\n      flexDirection: 'column',\n    },\n    infoColumn: {\n      color: theme.palette.background.paper\n    },\n    scrambleColumn: {\n      paddingLeft: theme.spacing(3)\n    },\n    textColumn: {\n      // color: \"black\",\n      [theme.breakpoints.up('sm')]: {\n        minHeight: 138\n      },\n    },\n    fixedHeight: {\n      height: 250,\n    },\n    title : {\n        flexGrow: 1,\n    },\n    select: {\n      color: theme.palette.text.primary\n    },\n    selectLabel: {\n      color: theme.palette.text.secondary\n    }\n\n}))\n\nfunction SingleSelect(props: {state: AppState, dispatch: React.Dispatch<Action>,\n    select: (c: Config) => Selector, label?: string}) {\n    let { state, dispatch, select } = props\n    let { config } = state\n    let sel = select(config)\n    let classes = useStyles()\n\n    const handleChange = (evt: { target: { value: string; }; }) => {\n      let { names } = sel\n      let n = names.length\n      let new_flags = Array(n).fill(0)\n\n      for (let i = 0; i < names.length; i++) {\n        if (names[i] === evt.target.value) {\n          new_flags[i] = 1\n        }\n      }\n      let new_config = JSON.parse(JSON.stringify(config))\n      select(new_config).flags = new_flags\n      if (new_config.fbPairSolvedSelector.flags[1] === 1) {\n        new_config.fbdrSelector.flags = [1, 0, 0]\n      }\n      dispatch( { type: \"config\", content: new_config })\n    }\n\n    let radioValue = function() {\n      let { names, flags } = sel\n      for (let i = 0; i < flags.length; i++) {\n        if (flags[i] === 1) return names[i]\n      }\n      return \"\"\n    }()\n\n    let label = sel.label || props.label || \"\"\n    return (\n      <FormControl component=\"fieldset\" className={classes.select}>\n      <FormLabel component=\"legend\"className={classes.selectLabel} >{label}</FormLabel>\n      <RadioGroup aria-label=\"position\" name=\"position\" value={radioValue} onChange={handleChange} row>\n        {\n          sel.names.map(name => (\n            <FormControlLabel\n              key={name}\n              value={name}\n              control={<Radio color=\"primary\" />}\n              label={name}\n              labelPlacement=\"end\"\n            />\n          ))\n        }\n      </RadioGroup>\n    </FormControl>)\n  }\n\n\n\n  type MultiOptions = {\n    label?: string, noDialog?: boolean,\n    manipulators?: {name: string, enableIdx: number[]}[]\n  }\n  function MultiSelect(props: {state: AppState, dispatch: React.Dispatch<Action>, select: (c: Config) => Selector, options?: MultiOptions }) {\n    let { state, dispatch, select, options } = props\n    options = options || {}\n    let { config } = state\n\n    let classes = useStyles()\n    let sel = select(config)\n    const handleChange = (evt: { target: { value: string; checked: boolean }; }) => {\n      let { names, flags } = sel\n      let new_flags = [...flags]\n\n      for (let i = 0; i < names.length; i++) {\n        if (names[i] === evt.target.value) {\n          new_flags[i] = (evt.target.checked)? 1 : 0\n        }\n      }\n      let new_config = JSON.parse(JSON.stringify(config))\n      select(new_config).flags = new_flags\n      dispatch( { type: \"config\", content: new_config })\n    }\n\n    let makeBox = (name: string, checked: boolean) => {\n      return (\n      <FormControlLabel\n          control={\n          <Checkbox color=\"primary\" checked={checked} onChange={handleChange} />\n          }\n          label={name}\n          key={name}\n          value={name}\n      />)\n    }\n    const [open, setOpen] = React.useState(false);\n    const handleClickOpen = () => {\n      setOpen(true);\n    };\n    const handleClose = () => {\n      setOpen(false);\n    }\n    const [manipChecked, setManipChecked] = React.useState< { [ name: string ]: boolean } >({})\n    let label = sel.label || options.label || \"\"\n    let makeManipulator = (manip: {name: string, enableIdx: number[]}) => {\n      let {name, enableIdx} = manip\n      let handleChange = (evt: { target: { value: string; checked: boolean }; }) => {\n        setManipChecked( {...manipChecked, [name] : evt.target.checked } )\n        let fillValue = (evt.target.checked);\n        let { flags } = sel\n        let new_flags = [...flags]\n        for (let i of enableIdx) {\n          new_flags[i] = fillValue ? 1 : 0;\n        }\n        let new_config = JSON.parse(JSON.stringify(config))\n        select(new_config).flags = new_flags;\n        dispatch( { type: \"config\", content: new_config } )\n      }\n      return (\n        <FormControlLabel\n        control={\n        <Checkbox color=\"primary\" checked={manipChecked[name]} onChange={handleChange} />\n        }\n        label={name}\n        key={name}\n        value={name}\n        />)\n    }\n    let manipulator_row = options.manipulators ?\n      (<FormGroup row>\n      {options.manipulators.map(x => makeManipulator(x)) }\n      </FormGroup>) : null;\n    const content = (\n      <React.Fragment>\n        {manipulator_row}\n        <FormGroup row>\n        {sel.names.map( (name, i) => makeBox(name, !!sel.flags[i]))}\n        </FormGroup>\n      </React.Fragment>\n    )\n\n    if (options.noDialog)\n    return (\n      <FormControl component=\"fieldset\" className={classes.select}>\n        <FormLabel component=\"legend\"className={classes.selectLabel} >{label}</FormLabel>\n        {content}\n      </FormControl>\n    )\n\n    return (\n    <div>\n      <FormLabel component=\"legend\">{label}</FormLabel>\n      <Box height={8}/>\n      <Button color=\"primary\" variant=\"outlined\" style={{borderWidth: 2}} onClick={handleClickOpen}>\n      <SettingsIcon fontSize=\"small\" color=\"primary\" style={{marginLeft: -6, marginRight: 3}}></SettingsIcon>\n        SET\n      </Button>\n      <Box height={8}/>\n      <Dialog disableBackdropClick disableEscapeKeyDown open={open} onClose={handleClose}>\n        <DialogTitle>Color Scheme</DialogTitle>\n        <DialogContent>\n          {content}\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Ok\n            </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n    )\n  }\n\n  export { SingleSelect, MultiSelect }","import React, { Fragment } from 'react'\n\nimport CubeSim from './CubeSim'\nimport { Divider, makeStyles, useTheme, FormControl, FormLabel, Typography, Button} from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport { FaceletCube, CubeUtil, Move, Mask } from '../lib/CubeLib';\n\nimport { AppState, Action, Config } from \"../Types\";\nimport clsx from 'clsx';\nimport { Face } from '../lib/Defs';\nimport { getActiveName } from '../lib/Selector';\nimport { MultiSelect, SingleSelect } from './Select';\n\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n      paddingTop: theme.spacing(0),\n      paddingBottom: theme.spacing(2),\n      backgroundColor: theme.palette.background.default\n    },\n    paper: {\n      padding: theme.spacing(3),\n      display: 'flex',\n      overflow: 'auto',\n      flexDirection: 'column',\n    },\n    fixedHeight: {\n      height: 300,\n    },\n    canvasPaper: {\n      padding: theme.spacing(0),\n      display: 'flex',\n      overflow: 'auto',\n      flexDirection: 'column',\n    },\n    title : {\n        color: theme.palette.text.hint,\n        fontWeight: 500,\n        fontSize: 18,\n        borderBottom: \"2px solid\",\n    },\n    prompt: {\n      color: theme.palette.text.secondary,\n    },\n    button: {\n      width: \"100%\"\n    },\n\n  }))\n\n\n\nfunction _getMask(name: string) {\n  switch (name) {\n    case \"Show\": return Mask.solved_mask;\n    case \"Hide\": return Mask.empty_mask;\n    case \"Hide LSE\": return Mask.lse_mask;\n    default: return Mask.solved_mask\n  }\n}\nfunction CmllTrainerView(props: { state: AppState, dispatch: React.Dispatch<Action> } ) {\n    let { state, dispatch } = props\n    let cube = state.cube.state\n    let classes = useStyles()\n    const canvasPaper = clsx(classes.canvasPaper, classes.fixedHeight);\n    let facelet = FaceletCube.from_cubie(cube,\n      _getMask(getActiveName( state.config.cmllCubeMaskSelector) || \"Show\"))\n\n    const theme = useTheme()\n    const simBackground = getActiveName(state.config.theme) === \"bright\" ? \"#eeeeef\" : theme.palette.background.paper\n\n    const cmll = (c: Config) => c.cmllSelector;\n    const cmllcubemask = (c : Config) => c.cmllCubeMaskSelector;\n    const cmllauf = (c: Config) => c.cmllAufSelector;\n    const trigger = (c: Config) => c.triggerSelector;\n    const ori = (c: Config) => c.orientationSelector;\n\n    const panel = (\n      <Fragment>\n        <SingleSelect {...{state, dispatch, select: cmllcubemask, label: \"Virtual Cube\"}} />\n        <MultiSelect {...{state, dispatch, select: cmll, options: { label: \"CMLL Case\", noDialog: true} }} />\n        <MultiSelect {...{state, dispatch, select: cmllauf, options: { label: \"CMLL Auf\", noDialog: true} }} />\n        <MultiSelect {...{state, dispatch, select: trigger, options: { label: \"SB Last Pair Trigger (Uncheck all for pure CMLL)\", noDialog: true} } } />\n        <MultiSelect {...{state, dispatch, select: ori}} />\n      </Fragment>\n    )\n\n    React.useEffect( () =>  {\n      setReveal(false)\n    }, [ state ])\n    const [reveal, setReveal] = React.useState(false)\n    const handleClick = () => {\n      setReveal(true)\n    }\n    const handleNext = () => {\n      dispatch({type: \"key\", content: \"#space\"})\n    }\n\n\n    let alg = \"\"\n    let setup = \"\"\n    if (state.case.desc.length === 4) {\n      setup = state.case.desc[3].alg\n    }\n    if (reveal && state.case.desc.length >= 3) {\n      const moves = Move.parse(state.case.desc[1].alg +state.case.desc[2].alg)\n      let moves_c = Move.collapse(moves)\n      if (moves_c.length > 0) {\n        if (moves_c[0].name[0] === \"U\") {\n          alg += \"(\" + moves_c[0].name + \") \";\n          moves_c = moves_c.slice(1)\n        }\n        alg += Move.to_string(moves_c)\n      }\n    }\n    return (\n    <Box className={classes.container}>\n    <Grid container >\n      <Grid item xs={12} >\n            <Paper className={canvasPaper}>\n              <Box margin=\"auto\">\n              <CubeSim\n                width={300}\n                height={300}\n                cube={facelet}\n                colorScheme={CubeUtil.ori_to_color_scheme(props.state.cube.ori)}\n                bgColor={simBackground}\n                facesToReveal={[Face.L]}\n              />\n              </Box>\n            </Paper>\n      </Grid>\n    </Grid>\n\n    <Box height = {5}/>\n\n    <Paper className={classes.paper} elevation={2}>\n    <Grid container spacing={2}>\n\n      <Grid item xs={3}>\n\n      <Box display=\"flex\">\n              <Box>\n              <Box className={classes.title} >\n                Scramble\n              </Box> </Box>\n      </Box>\n      </Grid>\n      <Grid item xs={9}>\n        <Box paddingBottom={1} lineHeight={1} >\n          <Typography style={{whiteSpace: 'pre-line', fontSize: 18, fontWeight: 500}}>\n            { setup }\n          </Typography>\n        </Box>\n\n      </Grid>\n      <Grid item xs={3}>\n\n      <Box display=\"flex\">\n              <Box>\n              <Box className={classes.title} >\n                Case\n              </Box> </Box>\n      </Box>\n      </Grid>\n      { (!reveal) ?\n      <Grid item xs={3}>\n      <Button onFocus={(evt) => evt.target.blur() } className={classes.button}\n      size=\"medium\" variant=\"outlined\" color=\"primary\" onClick={handleClick}> { /* className={classes.margin}>  */ }\n          Show\n      </Button>\n      </Grid>\n      :\n      <Grid item xs={9}>\n        <Box paddingBottom={1} lineHeight={1} >\n          <Typography style={{whiteSpace: 'pre-line', fontSize: 18, fontWeight: 500}}>\n            { alg }\n          </Typography>\n        </Box>\n\n      </Grid>\n      }\n    </Grid>\n    <Box height={30}/>\n\n    <Grid container spacing={0}>\n        <Grid item xs={4} sm={4} md={3}>\n          <Button onFocus={(evt) => evt.target.blur() } className={classes.button}\n          size=\"medium\" variant=\"contained\" color=\"primary\" onClick={handleNext}>\n              Next\n          </Button>\n        </Grid>\n    </Grid>\n    </Paper>\n\n\n    <Box height={20}/>\n      <Divider/>\n    <Box height={20}/>\n    { panel }\n\n    <Box height={20}/>\n      <Divider/>\n    <Box height={15}/>\n\n    <Box>\n    <FormControl component=\"fieldset\" className={classes.prompt}>\n      <FormLabel component=\"legend\">\n         Usage: Press space for next case. Enter to redo.\n      </FormLabel>\n      </FormControl>\n    </Box>\n\n    </Box>\n    );\n}\n\nexport default CmllTrainerView\n\n\n","import React, { Fragment } from 'react'\n\nimport CubeSim from './CubeSim'\nimport { Button, makeStyles, Divider, Typography, useTheme } from '@material-ui/core';\n\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport FavoriteIcon from '@material-ui/icons/Favorite';\n\nimport { FaceletCube, CubeUtil, Mask, Move } from '../lib/CubeLib';\n\nimport { AppState,  Action, Config, FavCase} from \"../Types\";\nimport 'typeface-roboto-mono';\nimport clsx from 'clsx';\nimport { Face } from '../lib/Defs';\nimport { getActiveName } from '../lib/Selector';\n\nimport { SingleSelect, MultiSelect } from './Select';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n      paddingTop: theme.spacing(0),\n      paddingBottom: theme.spacing(2),\n      backgroundColor: theme.palette.background.default,\n    },\n    button: {\n      width: \"100%\",\n    },\n    paper: {\n      padding: theme.spacing(3),\n      display: 'flex',\n      overflow: 'auto',\n      flexDirection: 'column',\n    },\n    canvasPaper: {\n      padding: theme.spacing(0),\n      display: 'flex',\n      overflow: 'auto',\n      flexDirection: 'column',\n    },\n    infoColumn: {\n      color: theme.palette.background.paper\n    },\n    scrambleColumn: {\n      paddingLeft: theme.spacing(3)\n    },\n    textColumn: {\n      // color: \"black\",\n      [theme.breakpoints.up('sm')]: {\n        minHeight: 138\n      },\n    },\n    fixedHeight: {\n      height: 250,\n    },\n    title : {\n        color: theme.palette.text.hint,\n        fontWeight: 500,\n        borderBottom: \"3px solid\",\n    },\n    sourceIcon : {\n        color: theme.palette.text.hint,\n        fontSize: 18,\n        padding: 0\n    },\n    sourceIconWrap : {\n        height: 32,\n    },\n    fab: {\n      position: 'absolute',\n      top: theme.spacing(7),\n      left: theme.spacing(2),\n    },\n  }))\n\n\nfunction getMask(state: AppState) : Mask {\n    if (state.mode === \"fbdr\") {\n      const fbOnly = (state.case.desc.length === 0 || state.case.desc[0].kind === \"fb\")\n      //   getActiveName(state.config.fbOnlySelector) === \"FB Last Pair\"\n      return fbOnly ? Mask.fb_mask : Mask.fbdr_mask\n    }\n    else if (state.mode === \"ss\") {\n      if (state.case.desc.length === 0) return Mask.sb_mask\n      if (state.case.desc[0].kind === \"ss-front\")\n        return Mask.ss_front_mask\n      else\n        return Mask.ss_back_mask\n    }\n    else if (state.mode === \"fb\") {\n      if (state.case.desc.length === 0 || state.case.desc[0].kind === \"fb\") {\n        return Mask.fb_mask\n      }\n      else if (state.case.desc[0].kind === \"fbdr\") {\n        return Mask.fbdr_mask\n      } else {\n        return Mask.solved_mask\n      }\n    }\n    else return Mask.sb_mask\n}\n\nfunction BlockTrainerView(props: { state: AppState, dispatch: React.Dispatch<Action> } ) {\n    let { state, dispatch } = props\n    let cube = state.cube.state\n    let classes = useStyles()\n\n    let facelet = FaceletCube.from_cubie(cube, getMask(state))\n\n    let desc = state.case.desc[0] || { alg: \"\", setup:\"Press next for new case\"}\n    let { alg, setup, alt_algs } = desc\n\n    let spaceButtonText = (state.name === \"hiding\") ? \"Reveal\" : \"Next\"\n    let algs = (alt_algs !== undefined) ? ( [alg, ...alt_algs] ) : [alg]\n\n    // For debug\n    // let alg_scores = algs.map(a => a + \",\" + Move.evaluate(Move.parse(a)).toFixed(2) )\n\n    let minMove = algs.map(a => Move.parse(a).length).reduce( (a, b) => Math.min(a, b), 100 )\n    let algText = (state.name === \"hiding\") ? `(Best = ${minMove} STM)`\n      : (state.name === \"revealed\" && alg.length > 0) ? algs.join(\"\\n\") : \"\"\n\n    const handleSpace = () => {\n      dispatch({type: \"key\", content: \"#space\"})\n      if (spaceButtonText === \"Next\") {\n        setFav(false)\n      }\n    }\n\n    const theme = useTheme()\n    const simBackground = getActiveName(state.config.theme) === \"bright\" ? \"#eeeeef\" : theme.palette.background.paper\n\n    // source\n\n\n    const [favSelected, setFav] = React.useState(false)\n    const handleFav = () => {\n      if (state.case.desc.length === 0) return\n      const case_ : FavCase = {\n        mode: state.mode,\n        solver: state.case.desc[0].kind,\n        setup: state.case.desc[0].setup!\n      }\n      if (!favSelected){\n        setFav(true)\n        dispatch({type: \"favList\", content: [ case_ ], action: \"add\"})\n      } else {\n        setFav(false)\n        dispatch({type: \"favList\", content: [ case_ ], action: \"remove\" })\n      }\n    }\n\n    return (\n    <Box className={classes.container}>\n\n      <Grid container>\n        <Grid item xs={12}>\n        <Paper className={ clsx(classes.canvasPaper, classes.fixedHeight) }>\n          <Box margin=\"auto\">\n            <CubeSim\n              width={250}\n              height={250}\n              cube={facelet}\n              colorScheme={CubeUtil.ori_to_color_scheme(props.state.cube.ori)}\n              bgColor={simBackground}\n              facesToReveal={ [Face.L, Face.B, Face.D]  }\n            />\n          </Box>\n        </Paper>\n        </Grid>\n      </Grid>\n\n      <Paper className={classes.paper} elevation={2}>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6} className={classes.scrambleColumn} >\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\n          <Grid item xs={12} className={classes.infoColumn} >\n            <Box display=\"flex\">\n              <Box>\n              <Box className={classes.title} >\n                Scramble\n              </Box> </Box>\n            <Box flexGrow={0.2}></Box>\n            <Box >\n            {/* <Checkbox  className={classes.sourceIconWrap}\n              icon={<CreateIcon />}\n              checked={sourceSelected}\n              onChange = {handleSource}\n              checkedIcon={<CreateIcon color=\"primary\" />}\n              name=\"source\" /> */}\n\n            <Checkbox  className={classes.sourceIconWrap}\n              icon={<FavoriteIcon />}\n              checked={favSelected}\n              onChange = {handleFav}\n              checkedIcon={<FavoriteIcon color=\"primary\" />}\n              name=\"fav\" />\n\n            </Box>\n\n            </Box>\n\n          </Grid>\n\n          <Grid item xs={12}  >\n            <Box paddingBottom={1} lineHeight={1} className={classes.textColumn}>\n            <Typography style={{whiteSpace: 'pre-line', fontSize: 20, fontWeight: 400}}>\n                {setup}\n              </Typography>\n\n            </Box>\n          </Grid>\n\n\n        </Grid>\n        </Grid>\n\n        <Grid item xs={12} sm={6}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\n          <Grid item xs={12}className={classes.infoColumn} >\n            <Box display=\"flex\" >\n                <Box className={classes.title} >\n                  Solution\n                </Box>\n            </Box>\n          </Grid>\n\n          <Grid item xs={12} className={classes.textColumn} >\n            <Box paddingBottom={2} lineHeight={1}>\n              <Typography style={{whiteSpace: 'pre-line', fontSize: 16}} >\n                {algText}\n              </Typography>\n            </Box>\n\n          </Grid>\n        </Grid>\n        </Grid>\n\n      </Grid>\n\n      <Grid container spacing={0}>\n        <Grid item xs={4} sm={4} md={3}>\n          <Button onFocus={(evt) => evt.target.blur() } className={classes.button} size=\"medium\" variant=\"contained\" color=\"primary\" onClick={handleSpace}> { /* className={classes.margin}>  */ }\n              {spaceButtonText}\n          </Button>\n        </Grid>\n      </Grid>\n\n      </Paper>\n\n      <Box height={20}/>\n      <Divider/>\n      <Box height={20}/>\n\n      <ConfigPanelGroup {...{state, dispatch} } />\n    </Box>\n    );\n}\n\n\n\nfunction ConfigPanelGroup(props: {state: AppState, dispatch: React.Dispatch<Action> }) {\n  let { state, dispatch } = props\n  if (state.mode === \"ss\") {\n    let select1 = (config: Config) => { return config.ssSelector }\n    let select2 = (config: Config) => { return config.ssPairOnlySelector }\n    let select3 = (config: Config) => { return config.solutionNumSelector }\n    let select4 = (config: Config) => { return config.ssPosSelector }\n    let select5 = (config: Config) => { return config.orientationSelector }\n\n    let DRManip = [\n      // names: [\"UF\", \"FU\", \"UL\", \"LU\", \"UB\", \"BU\", \"UR\", \"RU\", \"DF\", \"FD\", \"DB\", \"BD\",\n      // \"DR\", \"RD\", \"BR\", \"RB\", \"FR\", \"RF\"],\n      { name: \"Toggle Select All\", enableIdx: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17] },\n      { name: \"Toggle All Oriented\", enableIdx: [0, 2, 4, 6, 8, 10, 12, 14, 16] },\n    ]\n    return (\n      <Fragment>\n      <SingleSelect {...{state, dispatch, select: select1}}> </SingleSelect>\n      <SingleSelect {...{state, dispatch, select: select2}}> </SingleSelect>\n      <SingleSelect {...{state, dispatch, select: select3}}> </SingleSelect>\n      <MultiSelect {...{state, dispatch, select: select4, options: {manipulators: DRManip} }}> </MultiSelect>\n      <MultiSelect {...{state, dispatch, select: select5}}> </MultiSelect>\n      </Fragment>\n    )\n  } else if (state.mode === \"fbdr\") {\n    let select1 = (config: Config) => { return config.fbdrSelector }\n    let select2 = (config: Config) => { return config.fbOnlySelector }\n    let select3 = (config: Config) => { return config.fbPairSolvedSelector }\n    let select6 = (config: Config) => { return config.fbdrScrambleSelector }\n    let select4 = (config: Config) => { return config.solutionNumSelector }\n    let select5 = (config: Config) => { return config.orientationSelector }\n    return (\n      <Fragment>\n      <SingleSelect {...{state, dispatch, select: select1}}> </SingleSelect>\n      <SingleSelect {...{state, dispatch, select: select2}}> </SingleSelect>\n      <SingleSelect {...{state, dispatch, select: select3}}> </SingleSelect>\n      <SingleSelect {...{state, dispatch, select: select6}}> </SingleSelect>\n      <SingleSelect {...{state, dispatch, select: select4}}> </SingleSelect>\n      <MultiSelect {...{state, dispatch, select: select5}}> </MultiSelect>\n      </Fragment>\n    )\n  } else if (state.mode === \"fb\") {\n    let select3 = (config: Config) => { return config.fbPieceSolvedSelector }\n    let select4 = (config: Config) => { return config.solutionNumSelector }\n    let select5 = (config: Config) => { return config.orientationSelector }\n\n    return (\n      <Fragment>\n        <SingleSelect {...{ state, dispatch, select: select3 }}> </SingleSelect>\n        <SingleSelect {...{ state, dispatch, select: select4 }}> </SingleSelect>\n        <MultiSelect {...{ state, dispatch, select: select5 }}> </MultiSelect>\n      </Fragment>\n    )\n   } else return <Fragment/>\n}\n\n\n\nexport default BlockTrainerView\n\n\n","import React, { Dispatch } from 'react'\n\nimport { makeStyles } from '@material-ui/core';\nimport { Grid, GridList, GridListTile, Paper, Container } from '@material-ui/core';\n\nimport { AlgDesc } from \"../lib/Algs\";\nimport { AppState, Action } from '../Types';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper,\n      },\n    container: {\n        paddingTop: theme.spacing(0),\n        paddingBottom: theme.spacing(2),\n        backgroundColor: theme.palette.background.default,\n      },\n    paper: {\n        padding: theme.spacing(1),\n        textAlign: 'center',\n        color: theme.palette.text.secondary,\n      },\n      gridList: {\n        width: 600,\n        height: 450,\n      },\n}))\n\ntype VisualCubeConfig = {\n    alg: string;\n    stage: string;\n    sch: string; //yrbwog\n}\nfunction VisualCube(props: VisualCubeConfig) {\n  let { alg, stage, sch } = props\n  const template =\n  `http://localhost:8000/visualcube.php?fmt=svg&r=y30x-24&size=150&co=40&fo=100&cc=ccc`\n    + `&stage=${stage}&sch=${sch}&case=${alg}`\n  return <img src={template} alt=\"\"/>\n}\n\nfunction PanoramaTable(props: {algs: AlgDesc[]}){\n    let classes = useStyles()\n    let { algs } = props\n    return <GridList cellHeight={160} className={classes.gridList} cols={3}>\n            {algs.map((alg) => (\n                <GridListTile key={alg.id} cols={1}>\n                    <VisualCube alg={alg.alg} stage=\"f2b\" sch=\"yrbwog\"/>\n                </GridListTile>\n            ))}\n        </GridList>\n}\n\nexport default function PanoramaView(props: { state: AppState, dispatch: Dispatch<Action> }) {\n    let classes = useStyles()\n    let algs : AlgDesc[] = [\n        \"RUR\", \"RU'R'\"\n    ].map( str => ({\n        id: str,\n        alg: str,\n        kind: \"sb\"\n    }))\n\n    return <div className={classes.root}>\n        <div>\n        <PanoramaTable algs={algs}/>\n        </div>\n        <div>\n        <PanoramaTable algs={algs}/>\n        </div>\n    </div>\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport {\n  Button,\n  Checkbox, IconButton, DialogContent, TextField, DialogContentText\n} from '@material-ui/core';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { Table, Paper, TableBody, TableCell, TableHead, TableRow } from '@material-ui/core';\n\nimport PlaylistPlayIcon from '@material-ui/icons/PlaylistPlay';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport AddIcon from '@material-ui/icons/Add';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport { AppState, Action, FavCase } from '../Types';\n\n\nconst useStyles = makeStyles(theme => ({\n  table: {\n    width: '100%',\n    minWidth: 200,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nexport function warnDialog(props: { confirm: () => void} ) {\n\n}\n\nfunction parseAddString(state: AppState, s : string) : [ FavCase[], boolean] {\n  const res : FavCase[] = []\n  for (const line of s.split('\\n')) {\n    let cols = line.split(',')\n    if (cols.length !== 2) continue\n    let solver = cols[0].trim()\n    let setup = cols[1].trim()\n    if ([\"fb\", \"fbdr\", \"ss-front\", \"ss-back\"].includes(solver)) {\n      let case_ : FavCase = {\n        mode: state.mode,\n        solver,\n        setup\n      }\n      res.push(case_)\n    }\n  }\n  if (res.length > 0) return [res, true]\n  else return [ [], false]\n}\n\nexport default function FavListView(props: { state: AppState, dispatch: React.Dispatch<Action> }) {\n  const {state, dispatch} = props\n  const classes = useStyles();\n  const play = (i: number) => () => {\n    dispatch({ type: \"favList\", content: [ state.favList[i] ], action: \"replay\" })\n  }\n  const remove = () => {\n    if (dialogID >= 0 && dialogID < state.favList.length)\n    dispatch({ type: \"favList\", content: [ state.favList[dialogID] ], action: \"remove\" })\n  }\n  const favList = state.favList.filter(c => c.mode === state.mode)\n\n  const [ dialogID, setDialogID ] = React.useState(-1)\n\n  const handleClose = () => setDialogID(-1)\n  const handleRemove = () => { remove(); setDialogID(-1); }\n  const dialogDelete = (<Dialog open={dialogID >= 0} onClose={handleClose} >\n    <DialogTitle id=\"alert-dialog-title\">{\"Delete this alg from favorites?\"}</DialogTitle>\n    <DialogActions>\n      <Button onClick={handleClose} color=\"primary\">\n        No\n    </Button>\n      <Button onClick={handleRemove} color=\"primary\" autoFocus>\n        Yes\n    </Button>\n    </DialogActions>\n  </Dialog>)\n\n  const [ addDialogOpen, setAddDialogOpen ] = React.useState(false)\n  const [ addString, setAddString ] = React.useState(\"\")\n  const handleAdd = () => setAddDialogOpen(true)\n  const handleAddClose = () => setAddDialogOpen(false)\n  const handleAddSuccess = () => {\n    let [res, status] = parseAddString(state, addString)\n    if (status) {\n      dispatch({ type: \"favList\", content: res, action: \"add\" })\n    }\n    handleAddClose()\n  }\n  const handleTextChange = (event: { target: { value: React.SetStateAction<string>; }; }) => {\n    setAddString(event.target.value)\n  }\n  const dialogAdd = <Dialog open={addDialogOpen} onClose={handleAddClose} aria-labelledby=\"form-dialog-title\">\n    <DialogTitle id=\"form-dialog-title\">Add New Cases</DialogTitle>\n    <DialogContent>\n      <DialogContentText>\n        Input your cases here. (one per line) <br></br>\n        Format: [category], [setup algorithm].\n        category := fb | fbdr | ss-front | ss-back\n      </DialogContentText>\n      <TextField\n        autoFocus\n        multiline\n        margin=\"dense\"\n        id=\"name\"\n        fullWidth\n        onChange={handleTextChange}\n        onKeyDown={ (event) => { event.stopPropagation() } }\n      />\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={handleAddClose} color=\"primary\">\n        Cancel\n    </Button>\n      <Button onClick={handleAddSuccess} color=\"primary\">\n        Add All\n    </Button>\n    </DialogActions>\n  </Dialog>\n\n\n  return (\n    <div>\n    {dialogDelete}\n    {dialogAdd}\n    <Paper>\n      <Table className={classes.table} size=\"small\" >\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\"> Scramble </TableCell>\n            <TableCell align=\"center\" rowSpan={1}>\n              <IconButton   onClick={handleAdd} component=\"span\" edge=\"end\" size=\"small\" color=\"primary\">\n                <AddIcon />\n              </IconButton>\n            {/* <IconButton component=\"span\" edge=\"end\" size=\"small\" color=\"primary\">\n                <FileCopyIcon />\n              </IconButton> */}\n             </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {favList.map((value, i) => {\n            //const labelId = `favlist-label-${i}`;\n            return (\n              <TableRow key={i}>\n                {/* <TableCell align=\"center\" >\n                  {/* padding=checkbox <Checkbox></Checkbox> */}\n\n                <TableCell align=\"center\"> {value.solver + \" , \" + value.setup} </TableCell>\n                <TableCell align=\"center\">\n                  <IconButton onFocus={(e: { target: { blur: () => void; }; }) => e.target.blur() } onClick={play(i)}\n                  component=\"span\" edge=\"end\" size=\"small\" color=\"primary\">\n                    <PlaylistPlayIcon />\n                  </IconButton>\n\n                  <IconButton onFocus={(e: { target: { blur: () => void; }; }) => e.target.blur() } onClick={() => setDialogID(i)}\n                  component=\"span\" edge=\"end\" size=\"small\" color=\"primary\">\n                    <DeleteOutlineIcon />\n                  </IconButton>\n\n                </TableCell>\n              </TableRow>\n            )\n          })}</TableBody>\n      </Table>\n    </Paper>\n    </div>\n  )\n}","import React from 'react'\nimport { AppState, Mode, Action } from \"../Types\";\n\nimport { Box, AppBar, Typography,Button,  Tabs, Tab, makeStyles } from '@material-ui/core';\nimport { Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core';\nimport { Grid, Container } from '@material-ui/core';\n\nimport CmllTrainerView from './CmllTrainerView';\nimport BlockTrainerView from './BlockTrainerView';\nimport PanoramaView from './PanoramaView';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Brightness6Icon from '@material-ui/icons/Brightness6';\nimport InfoIcon from '@material-ui/icons/Info';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\n\nimport 'typeface-roboto';\n\nimport FavListView from './FavListView';\n\nimport { ENABLE_DEV } from '../settings';\n\ninterface TabPanelProps {\n  value: number,\n  index: number,\n  children: any,\n  [key: string]: any\n}\nfunction TabPanel(props: TabPanelProps ) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={0}>{children}</Box>}\n    </Typography>\n  );\n}\nconst useStyles = makeStyles(theme => ({\n  page: {\n    backgroundColor: theme.palette.background.default\n  },\n  container: {\n    display: \"flex\"\n  },\n  icon: {\n    minWidth: 0\n  },\n  root: {\n    display: \"flex\"\n  }\n}))\n\n\nconst modes : Mode[] = [\"fbdr\", \"ss\", \"fb\", \"cmll\", \"experimental\"]\n\nfunction _getInitialHashLocation() {\n  if (window.location.hash) {\n    let idx = (modes as string[]).indexOf(window.location.hash.slice(1))\n    if (idx === -1) {\n      window.location.hash = \"\";\n      return 0;\n    } else {\n      return idx;\n    }\n  } else {\n    return 0\n  }\n}\n\n\n// TODO: Write getter and setter for config items, and also write handlers that map to setters\nfunction AppView(props: { state: AppState, dispatch: React.Dispatch<Action> } ) {\n  //const [locations, setLocations] = React.useState([])\n  let { state, dispatch } = props\n  let classes = useStyles()\n\n  const handleChange = React.useCallback( (_:any, newValue:number) => {\n    if (newValue < modes.length) {\n      setValue(newValue)\n      let mode = modes[newValue]\n      dispatch({type: \"mode\", content: mode})\n    }\n  }, [dispatch])\n\n  const [ open, setOpen ] = React.useState(false)\n\n  const [value, setValue] = React.useState(_getInitialHashLocation());\n  React.useEffect( () => {\n    dispatch({type: \"mode\", content: modes[_getInitialHashLocation()]})\n  }, [])\n\n  const handleInfoOpen = () => { setOpen(true) }\n  const handleInfoClose = () => { setOpen(false) }\n\n  const toggleBright = () => {\n    const theme_flag = [...state.config.theme.flags]\n    theme_flag[0] = 1 - theme_flag[0]\n    theme_flag[1] = 1 - theme_flag[1]\n    dispatch({ type: \"config\", content: {\n      theme: {\n        ...state.config.theme,\n        flags: theme_flag\n    }}})\n  }\n  const toggleFav = () => {\n    setFav(!showFav)\n  }\n\n  const [ showFav, setFav ] = React.useState(false)\n\n  return (\n    <main>\n      <Dialog open={open} onClose={handleInfoClose} >\n      <DialogTitle>About</DialogTitle>\n      <DialogContent dividers>\n        <Typography gutterBottom style={{whiteSpace: 'pre-line', fontSize: '1.3rem'}}>\n          Welcome to my awesome roux block trainer.\n        </Typography>\n        <br/>\n\n        <Typography gutterBottom style={{whiteSpace: 'pre-line'}}>\n\n        A bunch of shortcuts: <br/>\n        - Space for the next scramble. <br/>\n        - Enter to reset the virtual cube to current scramble. <br/>\n        - Cstimer style virtual cube control. <br/>\n\n        <br/>\n        </Typography>\n\n        {/* <Typography gutterBottom style={{whiteSpace: 'pre-line'}} variant=\"subtitle2\">\n        Currently supporting: FB+DR, SS, CMLL\n        </Typography> */}\n\n        <Typography gutterBottom style={{whiteSpace: 'pre-line'}} variant=\"body2\">\n\n        Feature requests are most definitely welcome. :)\n        </Typography>\n\n        <Typography gutterBottom variant=\"overline\">\n\n        --onionhoney(Zhouheng Sun)\n        </Typography>\n\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={handleInfoClose}>\n          Got it!\n        </Button>\n      </DialogActions>\n      </Dialog>\n\n      <AppBar color=\"primary\" position=\"static\">\n        <Tabs value={value} onChange={handleChange} scrollButtons=\"on\" variant=\"scrollable\" indicatorColor=\"secondary\" >\n          <Tab onFocus={e => e.target.blur() } label=\"FBDR Trainer\" id='tab0' />\n          <Tab onFocus={e => e.target.blur() } label=\"SSquare Trainer\" id='tab1' />\n          <Tab onFocus={e => e.target.blur() } label=\"FB Trainer\" id='tab2' />\n          <Tab onFocus={e => e.target.blur() } label=\"CMLL Trainer\" id='tab3'/>\n          { ENABLE_DEV ?\n          <Tab onFocus={e => e.target.blur() } label=\"...\" id='tab4'/> : null }\n          <div style={{ flexGrow: 1 }}/>\n\n\n          <Tab onFocus={e => e.target.blur() } id='icon2' onClick={toggleFav} icon={ <BookmarkIcon /> } className={classes.icon} />\n          <Tab onFocus={e => e.target.blur() } id='icon0' onClick={toggleBright} icon={ <Brightness6Icon /> } className={classes.icon} />\n          <Tab onFocus={e => e.target.blur() } id='icon1' onClick={handleInfoOpen} icon={ <InfoIcon /> } className={classes.icon} />\n\n        </Tabs>\n      </AppBar>\n\n      <Box paddingY={2}>\n      <Container maxWidth={showFav ? \"md\" : \"sm\" }>\n\n      {\n      value === 4?\n      (\n      <Grid container className={classes.container} spacing={3}>\n        <Grid item md={12} sm={12} xs={12}>\n        <TabPanel value={value} index={4} className={classes.page}>\n          <PanoramaView {...{state, dispatch}} />\n        </TabPanel>\n        </Grid>\n      </Grid>\n      )\n      :\n      (\n      <Grid container className={classes.container} spacing={3}>\n        <Grid item hidden={!showFav} md={4} sm={4} xs={12} >\n        <FavListView {...{state, dispatch}} />\n        </Grid>\n\n        <Grid item md={showFav ? 8 : 12} sm={showFav ? 8 : 12} xs={12}>\n        <TabPanel value={value} index={0} className={classes.page}>\n          <BlockTrainerView {...{state, dispatch}} />\n        </TabPanel>\n        <TabPanel value={value} index={1} className={classes.page}>\n          <BlockTrainerView {...{state, dispatch}} />\n        </TabPanel>\n        <TabPanel value={value} index={2} className={classes.page}>\n          <BlockTrainerView {...{state, dispatch}} />\n        </TabPanel>\n        <TabPanel value={value} index={3} className={classes.page}>\n          <CmllTrainerView {...{state, dispatch}} />\n        </TabPanel>\n        </Grid>\n      </Grid>\n      )\n      }\n      </Container></Box>\n\n\n\n    </main>\n  )\n}\nexport default AppView","\nimport { Config, FavCase } from \"./Types\"\nexport const initialFavList : FavCase[] = []\nexport const initialConfig : Config = (() => {\n    let arr_ori_flag = Array(24).fill(0)\n    arr_ori_flag[7] = 1 // YR\n    return {\n        theme: {\n            names: [\"bright\", \"dark\"],\n            flags: [1,0],\n            kind: \"theme\"\n        },\n        cmllSelector: {\n            names: [\"o\", \"s\", \"as\", \"t\", \"l\", \"u\", \"pi\", \"h\"],\n            flags: [1, 1, 1, 1, 1, 1, 1, 1],\n            kind: \"cmll\",\n        },\n        cmllAufSelector: {\n            names: [\"None\", \"U\", \"U'\", \"U2\"],\n            flags: [1, 1, 1, 1],\n            kind: \"u_auf\"\n        },\n        cmllCubeMaskSelector: {\n            names: [\"Show\", \"Hide\", \"Hide LSE\"],\n            flags: [1, 0, 0],\n            kind: \"cube_mask\"\n        },\n        triggerSelector: {\n            names: [\"RUR'\", \"RU'R'\", \"R'U'R\", \"R'UR\"],\n            flags: [0, 0, 0, 0],\n            kind: \"trigger\"\n        },\n        orientationSelector: {\n            label: \"Color Scheme (U-F)\",\n            names: [\n                \"WG\", \"WB\", \"WO\", \"WR\",\n                \"YG\", \"YB\", \"YO\", \"YR\",\n                \"BW\", \"BY\", \"BO\", \"BR\",\n                \"GW\", \"GY\", \"GO\", \"GR\",\n                \"OW\", \"OY\", \"OB\", \"OG\",\n                \"RW\", \"RY\", \"RB\", \"RG\",\n            ],\n            flags: arr_ori_flag,\n            kind: \"orientation\"\n        },\n        fbdrSelector: {\n            label: \"Position of square\",\n            names: [\"FS at back\", \"FS at front\", \"Either\"],\n            flags: [1, 0, 0],\n            kind: \"fbdr\"\n        },\n        fbdrScrambleSelector: {\n            label: \"Type of scramble\",\n            names: [\"Short (Concerning FBDR Pieces only)\", \"Random State (Entire cube, useful for practicing F2B)\"],\n            flags: [1, 0],\n            kind: \"fbdr-scramble\"\n        },\n        fbOnlySelector: {\n            label: \"Pieces to solve\",\n            names: [\"FB Last Pair + DR\", \"FB Last Pair Only\"],\n            flags: [1, 0],\n            kind: \"fb-only\"\n        },\n        fbPairSolvedSelector: {\n            label: \"Last Pair pattern\",\n            names: [\"Random\", \"Solved(FS at back only)\"],\n            flags: [1, 0],\n            kind: \"fb-pair-solved\"\n        },\n        ssSelector: {\n            label: \"Position of square\",\n            names: [\"SS at front\", \"SS at back\", \"Either\"],\n            flags: [1, 0, 0],\n            kind: \"ss\"\n        },\n        ssEOSelector: {\n            label: \"Orientation of DR\",\n            names: [\"Oriented\", \"Misoriented\", \"Either\"],\n            flags: [1, 0, 0],\n            kind: \"ss-orientation\"\n        },\n        ssPosSelector: {\n            label: \"Position of DR\",\n            names: [\"UF\", \"FU\", \"UL\", \"LU\", \"UB\", \"BU\", \"UR\", \"RU\", \"DF\", \"FD\", \"DB\", \"BD\",\n                    \"DR\", \"RD\", \"BR\", \"RB\", \"FR\", \"RF\"],\n            flags: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n            kind: \"ss-position\"\n        },\n        ssPairOnlySelector: {\n            label: \"Solve w/wo DR\",\n            names: [\"SS\", \"SB First Pair\"],\n            flags: [1, 0],\n            kind: \"sb-pair-only\"\n        },\n        solutionNumSelector: {\n            label: \"Number of solutions\",\n            names: [\"5\", \"10\", \"25\"],\n            flags: [1, 0, 0],\n            kind: \"solution-num\"\n        },\n        fbPieceSolvedSelector: {\n            label: \"Difficulty\",\n            names: [\"Hard over x2y(Scramble only)\", \"Hard\", \"DL Solved\", \"BL Solved\", \"Random\"],\n            flags: [1, 0, 0, 0, 0],\n            kind: \"fb-piece-solved\"\n        }\n    }\n})()\n","import { Config, FavCase } from \"../Types\"\nimport { version } from \"../Version\"\nimport { initialConfig, initialFavList } from \"../Config\"\n\nlet favListManager = function() {\n    const key = \"fav\"\n    let cache : FavCase[] | null = null\n    let getFavList = () => {\n        if (cache) return cache\n        const item = window.localStorage.getItem(key)\n        const item1 : FavCase[] = item ? JSON.parse(item) : initialFavList\n        return item1\n    }\n    let setFavList = (item : FavCase[]) => {\n        window.localStorage.setItem(key, JSON.stringify(item));\n        cache = item\n    }\n    return {\n        getFavList,\n        setFavList\n    }\n}()\n\nlet configManager = function() {\n    const key = \"config\"\n    const versionKey = \"version\"\n    let cache : Config | null = null\n\n    let getConfig = () => {\n        if (cache) {\n            return cache\n        }\n        const item = window.localStorage.getItem(key);\n        const vers = window.localStorage.getItem(versionKey)\n\n        const item1 : Partial<Config> = item ? JSON.parse(item) : initialConfig\n\n        if ( vers !== version) {\n            // version out of date\n            // let's preserve orientation\n            let config = initialConfig\n            if (item1.orientationSelector) {\n                config = {...initialConfig, orientationSelector: item1.orientationSelector}\n            }\n            window.localStorage.setItem(key, JSON.stringify(config));\n            window.localStorage.setItem(versionKey, version)\n\n            return config\n        }\n\n        // In rare cases we want to update new attributes but maintain previous version\n        if ( (item1 === null) || (item1 === undefined) || Object.keys(item1).length === 0) {\n            window.localStorage.setItem(key, JSON.stringify(initialConfig));\n            return initialConfig\n        }\n        // we will also add in unseen fields\n        if (Object.keys(item1).length < Object.keys(initialConfig).length) {\n            const item2 = {...initialConfig, ...item1}\n            window.localStorage.setItem(key, JSON.stringify(item2));\n            return item2\n        }\n        return item1 as Config\n    }\n\n    let setConfig = (partial: Partial<Config>) => {\n        let newConfig : Config = Object.assign(getConfig(), partial)\n        window.localStorage.setItem(key, JSON.stringify(newConfig));\n        cache = newConfig\n    }\n\n    return {\n        getConfig,\n        setConfig\n    }\n}()\n\nlet getConfig = configManager.getConfig\nlet setConfig = configManager.setConfig\nlet getFavList = favListManager.getFavList\nlet setFavList = favListManager.setFavList\n\nexport {\n    getConfig, setConfig, getFavList, setFavList\n}\n","const version = \"0.3.5\"\n\nexport {version}","import { AppState, Config, FavCase } from \"../Types\";\n/* State Manager\n * \"Passively\" updates localstorage in reduce.\n * Action types\n *  - move: respond to cube move\n *  - replay: replay case\n *  - reactToConfig: respond to changes in config\n */\nexport abstract class AbstractStateM {\n    state: AppState;\n    constructor(state: AppState) {\n        this.state = state;\n    }\n    abstract move(s: string): AppState;\n    abstract reactToConfig(conf: Config): AppState;\n    abstract control(s: string): AppState;\n\n    replay(case_: FavCase): AppState {\n        return this.state;\n    }\n}\n\nexport class StateFactory {\n    static create = (state: AppState) => {\n        let filler = ( (()=>1) as unknown ) as (state: AppState) => AbstractStateM;\n        return filler(state);\n    }\n}","// source: \"https://sites.google.com/view/kianroux/cmll\" and https://github.com/AshleyF/briefcubing/blob/master/algs.js\n\n//type oll_case = \"o\"|\"h\"|\"pi\"|\"u\"|\"t\"|\"s\"|\"as\"|\"l\"\nimport { Selector } from \"../lib/Selector\";\nimport { rand_choice } from \"./Math\";\n\nconst get_active_names = (sel : Selector) => {\n    let res = []\n    for (let i = 0; i < sel.names.length; i++) {\n        if (sel.flags[i]) {\n            res.push(sel.names[i]);\n        }\n    }\n    return res\n}\n\nexport type AlgDesc = {\n    id: string,\n    alg: string,\n    alt_algs?: string[],\n    setup?: string,\n    kind: string\n}\n\nconst empty_alg : AlgDesc = {\n    id: \"empty\",\n    alg: \"\",\n    kind: \"any\"\n}\n\nconst cmll_algs : AlgDesc[] = [\n    { id: \"o_adjacent_swap\", alg: \"R U R' F' R U R' U' R' F R2 U' R'\", kind: \"cmll\" },\n    { id: \"o_diagonal_swap\", alg: \"F R U' R' U' R U R' F' R U R' U' R' F R F'\", kind: \"cmll\" },\n    { id: \"h_columns\", alg: \"R U R' U R U' R' U R U2 R'\", kind: \"cmll\" },\n    { id: \"h_rows\", alg: \"F R U R' U' R U R' U' R U R' U' F'\", kind: \"cmll\" },\n    { id: \"h_column\", alg: \"U R U2' R2' F R F' U2 R' F R F'\", kind: \"cmll\" },\n    { id: \"h_row\", alg: \"r U' r2' D' r U' r' D r2 U r'\", kind: \"cmll\" },\n    { id: \"pi_right_bar\", alg: \"F R U R' U' R U R' U' F'\", kind: \"cmll\" },\n    { id: \"pi_back_slash\", alg: \"U F R' F' R U2 R U' R' U R U2' R'\", kind: \"cmll\" },\n    { id: \"pi_x_checkerboard\", alg: \"U' R' F R U F U' R U R' U' F'\", kind: \"cmll\" },\n    { id: \"pi_forward_slash\", alg: \"R U2 R' U' R U R' U2' R' F R F'\", kind: \"cmll\" },\n    { id: \"pi_columns\", alg: \"U' r U' r2' D' r U r' D r2 U r'\", kind: \"cmll\" },\n    { id: \"pi_left_bar\", alg: \"U' R' U' R' F R F' R U' R' U2 R\", kind: \"cmll\" },\n    { id: \"u_forward_slash\", alg: \"U2 R2 D R' U2 R D' R' U2 R'\", kind: \"cmll\" },\n    { id: \"u_back_slash\", alg: \"R2' D' R U2 R' D R U2 R\", kind: \"cmll\" },\n    { id: \"u_front_row\", alg: \"R2' F U' F U F2 R2 U' R' F R\", kind: \"cmll\" },\n    { id: \"u_rows\", alg: \"U' F R2 D R' U R D' R2' U' F'\", kind: \"cmll\" },\n    { id: \"u_x_checkerboard\", alg: \"U2 r U' r' U r' D' r U' r' D r\", kind: \"cmll\" },\n    { id: \"u_back_row\", alg: \"U' F R U R' U' F'\", kind: \"cmll\" },\n    { id: \"t_left_bar\", alg: \"U' R U R' U' R' F R F'\", kind: \"cmll\" },\n    { id: \"t_right_bar\", alg: \"U L' U' L U L F' L' F\", kind: \"cmll\" },\n    { id: \"t_rows\", alg: \"F R' F R2 U' R' U' R U R' F2\", kind: \"cmll\" },\n    { id: \"t_front_row\", alg: \"r' U r U2' R2' F R F' R\", kind: \"cmll\" },\n    { id: \"t_back_row\", alg: \"r' D' r U r' D r U' r U r'\", kind: \"cmll\" },\n    { id: \"t_columns\", alg: \"U2 r2' D' r U r' D r2 U' r' U' r\", kind: \"cmll\" },\n    { id: \"s_left_bar\", alg: \"U R U R' U R U2 R'\", kind: \"cmll\" },\n    { id: \"s_x_checkerboard\", alg: \"U L' U2 L U2' L F' L' F\", kind: \"cmll\" },\n    { id: \"s_forward_slash\", alg: \"U F R' F' R U2 R U2' R'\", kind: \"cmll\" },\n    { id: \"s_Columns\", alg: \"U2 R' U' R U' R2' F' R U R U' R' F U2' R\", kind: \"cmll\" },\n    { id: \"s_right_bar\", alg: \"U' R U R' U R' F R F' R U2' R'\", kind: \"cmll\" },\n    { id: \"s_back_slash\", alg: \"U R U' L' U R' U' L\", kind: \"cmll\" },\n    { id: \"as_right_bar\", alg: \"U R' U' R U' R' U2' R\", kind: \"cmll\" },\n    { id: \"as_columns\", alg: \"U' R2 D R' U R D' R' U R' U' R U' R'\", kind: \"cmll\" },\n    { id: \"as_back_slash\", alg: \"U' F' L F L' U2' L' U2 L\", kind: \"cmll\" },\n    { id: \"as_x_checkerboard\", alg: \"U' R U2' R' U2 R' F R F'\", kind: \"cmll\" },\n    { id: \"as_forward_slash\", alg: \"U' L' U R U' L U R'\", kind: \"cmll\" },\n    { id: \"as_left_bar\", alg: \"U R U2' R' F R' F' R U' R U' R'\", kind: \"cmll\" },\n    { id: \"l_mirror\", alg: \"F R U' R' U' R U R' F'\", kind: \"cmll\" },\n    { id: \"l_inverse\", alg: \"F R' F' R U R U' R'\", kind: \"cmll\" },\n    { id: \"l_pure\", alg: \"R U2 R' U' R U R' U' R U R' U' R U' R'\", kind: \"cmll\" },\n    { id: \"l_front_commutator\", alg: \"R U2 R D R' U2 R D' R2'\", kind: \"cmll\" },\n    { id: \"l_diag\", alg: \"R' U' R U R' F' R U R' U' R' F R2\", kind: \"cmll\" },\n    { id: \"l_back_commutator\", alg: \"U R' U2 R' D' R U2 R' D R2\", kind: \"cmll\" }\n]\n\nlet trigger_algs: AlgDesc[] = [\n    { id: \"RUR'_1\", alg: \"R U R'\", kind:\"trigger\"},\n    { id: \"RUR'_2\", alg: \"r U r'\", kind:\"trigger\"},\n    { id: \"RU'R'_1\", alg: \"R U' R'\", kind:\"trigger\"},\n    { id: \"RU'R'_2\", alg: \"r U' r'\", kind:\"trigger\"},\n    { id: \"R'U'R_1\", alg: \"R' U' R\", kind:\"trigger\"},\n    { id: \"R'U'R_2\", alg: \"r' U' r\", kind:\"trigger\"},\n    { id: \"R'UR_1\", alg: \"R' U R\", kind:\"trigger\"},\n    { id: \"R'UR_2\", alg: \"r' U r\", kind:\"trigger\"}\n]\n\nlet u_auf_algs: AlgDesc[] = [\n    { id: \"U\", alg: \"U\", kind: \"u_auf\"},\n    { id: \"U'\", alg: \"U'\", kind: \"u_auf\"},\n    { id: \"U2\", alg: \"U2\", kind: \"u_auf\"},\n    { id: \"None\", alg: \"\", kind: \"u_auf\"},\n]\n\nlet ori_algs: AlgDesc[] =\n    [\"WG\", \"WB\", \"WO\", \"WR\",\n    \"YG\", \"YB\", \"YO\", \"YR\",\n    \"BW\", \"BY\", \"BO\", \"BR\",\n    \"GW\", \"GY\", \"GO\", \"GR\",\n    \"OW\", \"OY\", \"OB\", \"OG\",\n    \"RW\", \"RY\", \"RB\", \"RG\"].map(s => ({id: s, alg: \"\", kind:\"orientation\" }))\n\nlet lookup_algset = (kind : string) => {\n    switch (kind) {\n        case \"cmll\": return cmll_algs;\n        case \"trigger\": return trigger_algs;\n        case \"orientation\": return ori_algs;\n        case \"u_auf\": return u_auf_algs;\n        default: return []\n    }\n}\n\nlet alg_generator = (selector: Selector) => {\n    let algSet = lookup_algset(selector.kind)\n    let lookup = new Set(get_active_names(selector))\n    let get_prefix = (id: string) => {\n        return id.split(\"_\", 1)[0]\n    }\n    let algs : AlgDesc[] = (() => {\n        return algSet.filter(alg => {\n            let prefix = get_prefix(alg.id);\n            return lookup.has(prefix)\n        })\n    })()\n\n    let next = () => {\n        if (algs.length === 0) {\n            return empty_alg\n        } else {\n            return rand_choice(algs)\n        }\n    }\n    return next\n}\n\nexport { alg_generator }","import { CubieCube, Move } from './CubeLib';\nimport { CubieT, MoveT } from './Defs';\nexport type PrunerConfig = {\n    size: number,\n    encode: (cube : CubieT) => number,\n    solved_states: CubieT[],\n    max_depth: number,\n    moveset: MoveT[]\n}\nexport type PrunerT = {\n    init: () => void,\n    query: (c : CubieT) => number,\n    equal: (c1 : CubieT, c2: CubieT) => boolean,\n    encode: (c : CubieT) => number\n}\n\nexport function Pruner(config: PrunerConfig) : PrunerT {\n    let dist: Uint8Array;\n    let { size, encode, solved_states, max_depth, moveset} = config\n    let initialized = false\n    function init() {\n        if (initialized) return\n        initialized = true\n        dist = new Uint8Array(size).fill(255)\n        for (let state of solved_states) {\n            dist[encode(state)] = 0\n        }\n        let frontier = [...solved_states]\n        let total_expanded = frontier.length\n        for (let i = 0; i < max_depth; i++) {\n            console.log(\"pruner: expanding depth \", i)\n            let new_frontier = []\n            for (let state of frontier) {\n                for (let move of moveset) {\n                    let newState = CubieCube.apply(state, move)\n                    let idx = encode(newState)\n                    if (dist[idx] === 255) {\n                        dist[idx] = i + 1;\n                        new_frontier.push(newState)\n                    }\n                }\n            }\n            frontier = new_frontier\n            total_expanded += frontier.length\n        }\n        console.log(\"Initialization complete. size = \", total_expanded)\n    }\n    function query(cube: CubieT) {\n        let d = dist[encode(cube)]\n        if (d === 255) return max_depth + 1;\n        return d\n    }\n    function equal(cube1: CubieT, cube2: CubieT) {\n        return encode(cube1) === encode(cube2)\n    }\n    return  {\n        init,\n        query,\n        equal,\n        encode\n    }\n}\n\n\n\n\nlet fbdrPrunerConfig : PrunerConfig = function() {\n    const esize = Math.pow(24, 4)\n    const csize = Math.pow(24, 2)\n    const size = esize * csize\n\n    function encode(cube:CubieT) {\n      let c1 = 0, c2 = 0\n      for (let i = 0; i < 8; i++) {\n        if (cube.cp[i] === 4) {\n          c1 = i * 3 + cube.co[i]\n        } else if (cube.cp[i] === 5) {\n          c2 = i * 3 + cube.co[i];\n        }\n      }\n      const enc_c = c1 * 24 + c2\n      let e1 = 0, e2 = 0, e3 = 0, e4 = 0\n      for (let i = 0; i < 12; i++) {\n          switch (cube.ep[i]) {\n              case 5 : e1 = i * 2 + cube.eo[i]; break;\n              case 8 : e2 = i * 2 + cube.eo[i]; break;\n              case 9 : e3 = i * 2 + cube.eo[i]; break;\n              case 7 : e4 = i * 2 + cube.eo[i]; break;\n          }\n      }\n      const enc_e = e1 * (24 * 24 * 24) + e2 * (24 * 24) + e3 * 24 + e4\n      return enc_c + 24 * 24 * enc_e\n    }\n\n    const moves = [[]] //, Move.parse(\"L R'\"), Move.parse(\"L' R\"), Move.parse(\"L2 R2\")]\n    const solved_states = moves.map( (move : MoveT[]) => CubieCube.apply(CubieCube.id, move))\n\n    const max_depth = 4\n    const moveset : MoveT[] = [\"U\", \"U2\", \"U'\", \"F\", \"F2\", \"F'\", \"R\", \"R2\", \"R'\",\n    \"r\", \"r2\", \"r'\", \"D\", \"D2\", \"D'\", \"M\", \"M'\", \"M2\", \"B\", \"B'\", \"B2\"].map(s => Move.all[s])\n\n    return {\n        size,\n        encode,\n        solved_states,\n        max_depth,\n        moveset\n    }\n}()\n\n\nlet fbPrunerConfig : PrunerConfig = function() {\n    const esize = Math.pow(24, 3)\n    const csize = Math.pow(24, 2)\n    const size = esize * csize * 6\n\n    function encode(cube:CubieT) {\n      let c1 = 0, c2 = 0\n      for (let i = 0; i < 8; i++) {\n        if (cube.cp[i] === 4) {\n          c1 = i * 3 + cube.co[i]\n        } else if (cube.cp[i] === 5) {\n          c2 = i * 3 + cube.co[i];\n        }\n      }\n      const enc_c = c1 * 24 + c2\n      let e1 = 0, e2 = 0, e3 = 0\n      for (let i = 0; i < 12; i++) {\n          switch (cube.ep[i]) {\n              case 5 : e1 = i * 2 + cube.eo[i]; break;\n              case 8 : e2 = i * 2 + cube.eo[i]; break;\n              case 9 : e3 = i * 2 + cube.eo[i]; break;\n          }\n      }\n      const enc_e = e1 * (24 * 24 ) + e2 * (24 ) + e3\n      const enc_ce = enc_c + 24 * 24 * enc_e\n\n      let t1 = 0\n      for (let i = 0; i < 5; i++) {\n          if (cube.tp[i] === 4) { t1 = i }\n      }\n      const enc = enc_ce * 6 + t1\n      return enc\n    }\n\n    const moves = [[]] //, Move.parse(\"L R'\"), Move.parse(\"L' R\"), Move.parse(\"L2 R2\")]\n    const solved_states = moves.map( (move : MoveT[]) => CubieCube.apply(CubieCube.id, move))\n\n    const max_depth = 4\n    const moveset : MoveT[] = [\"U\", \"U2\", \"U'\", \"F\", \"F2\", \"F'\", \"R\", \"R2\", \"R'\",\n    \"r\", \"r2\", \"r'\", \"D\", \"D2\", \"D'\", \"M\", \"M'\", \"M2\", \"B\", \"B'\", \"B2\"] /* \"E\", \"E'\", \"E2\", \"S\", \"S'\", \"S2\" ]*/\n    .map(s => Move.all[s])\n\n    return {\n        size,\n        encode,\n        solved_states,\n        max_depth,\n        moveset\n    }\n}()\n\n\n\n\nlet ssPrunerConfig = (is_front: boolean) => {\n    const size = Math.pow(24, 3)\n\n    const c1 = is_front ? 7 : 6;\n    const e1 = is_front ? 11 : 10\n    const e2 = 7\n    function encode(cube:CubieT) {\n      let v = [0 ,0, 0]\n      for (let i = 0; i < 8; i++) {\n        if ( cube.cp[i] === c1) v[0] = i * 3 + cube.co[i]\n      }\n      for (let i = 0; i < 12; i++) {\n          if (cube.ep[i] === e1) v[1] = i * 2 + cube.eo[i];\n          else if (cube.ep[i] === e2) v[2] = i * 2 + cube.eo[i]\n      }\n      return v[0] + v[1] * 24 + v[2] * 24 * 24\n    }\n\n    const moves = [[]] //, Move.parse(\"L R'\"), Move.parse(\"L' R\"), Move.parse(\"L2 R2\")]\n    const solved_states = moves.map( (move : MoveT[]) => CubieCube.apply(CubieCube.id, move))\n\n    const max_depth = 5\n    const moveset : MoveT[] = [\"U\", \"U'\", \"U2\", \"R\", \"R'\", \"R2\",\n        \"r\", \"r'\", \"r2\", \"M\", \"M'\", \"M2\"].map(s => Move.all[s])\n\n    return {\n        size,\n        encode,\n        solved_states,\n        max_depth,\n        moveset\n    }\n}\n\nexport { fbdrPrunerConfig, ssPrunerConfig, fbPrunerConfig }","import {initialize, solve as min2phaseSolve, Min2PhaseCube} from \"./min2phase.js\"\nimport { CubieT } from \"../Defs.js\";\n\nexport {initialize}\n\nfunction toMin2Phase(state: CubieT): Min2PhaseCube {\n  // Note: this is its own inverse.\n  // const conjugate = {\n  //   EDGE: { permutation: [ 1, 0, 3, 2, 5, 4, 7, 6, 8, 9, 11, 10 ],\n  //           orientation: [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ] },\n  //   CORNER: { permutation: [ 0, 3, 2, 1, 4, 5, 6, 7 ],\n  //             orientation: [ 0, 0, 0, 0, 0, 0, 0, 0 ] },\n  //   CENTER: { permutation: [ 0, 1, 2, 3, 4, 5 ],\n  //             orientation: [ 0, 0, 0, 0, 0, 0 ] }\n  // };\n  // const pseudo = Combine(def, Combine(def, conjugate, Invert(def, state)), conjugate);\n\n  return {\n    cp: state.cp,\n    co: state.co,\n    ep: state.ep,\n    eo: state.eo\n  }\n}\n\nexport function solve(state: CubieT): string {\n  return min2phaseSolve(toMin2Phase(state));\n}\n","import { CubieCube, Move } from './CubeLib';\nimport { CubieT, MoveT } from './Defs';\nimport { arrayEqual } from './Math';\n\nimport { Pruner, PrunerT, fbdrPrunerConfig, ssPrunerConfig, fbPrunerConfig } from './Pruner';\n\nimport {initialize as min2phase_init, solve as min2phase_solve} from \"../lib/min2phase/min2phase-wrapper\"\n\n\ntype SolverConfig = {\n    is_solved: (cube : CubieT) => boolean,\n    moveset: MoveT[],\n    pruners: PrunerT[],\n}\n\ntype Accumulator = {\n    solutions: MoveT[][],\n    capacity: number\n}\n\nexport type SolverT = {\n    solve: (cube : CubieT, l : number, r : number, c : number) => MoveT[][],\n    is_solved: (cube : CubieT) => boolean,\n    getPruner: () => PrunerT[]\n}\nfunction Solver(config: SolverConfig) : SolverT{\n    const MAX_STATE_COUNT = 1000000\n    let { moveset, is_solved, pruners } = config\n    let state_count = 0, prune_count = 0;\n    let accum : Accumulator\n    let max_depth : number\n    let min_depth : number\n\n    enum SState {\n        CONTINUE,\n        STOP\n    };\n\n    function solve_depth(cube: CubieT, min_depth_: number, max_depth_: number, accum_: Accumulator) {\n        accum = accum_\n        max_depth = max_depth_\n        min_depth = min_depth_\n        state_count = 0\n        prune_count = 0\n        search(cube, 0, [])\n        return accum\n    }\n\n    let moveTable = Object.create({})\n    function prepareNextMoveTable() {\n        function getAvailableMove(name : string) {\n            switch (name[0]) {\n                case \"U\": return moveset.filter(k => k.name[0] !== \"U\");\n                case \"D\": return moveset.filter(k => k.name[0] !== \"U\" && k.name[0] !== \"D\");\n                case \"R\": {\n                    let base = moveset.filter(k => k.name[0] !== \"R\" && k.name[0] !== \"r\");\n                    if (name === \"R\") return base.filter(k => k.name !== \"M'\")\n                    if (name === \"R'\") return base.filter(k => k.name !== \"M\")\n                    if (name === \"R2\") return base.filter(k => k.name !== \"M2\")\n                    return base\n                }\n                case \"L\": return moveset.filter(k => k.name[0] !== \"R\" && k.name[0] !== \"M\" && k.name[0] !== \"L\" && k.name[0] !== \"r\");\n                case \"r\": return moveset.filter(k => k.name[0] !== \"R\" && k.name[0] !== \"M\" && k.name[0] !== \"L\" && k.name[0] !== \"r\");\n                case \"M\": return moveset.filter(k => k.name[0] !== \"R\" && k.name[0] !== \"M\" && k.name[0] !== \"L\" && k.name[0] !== \"r\");\n                case \"F\": return moveset.filter(k => k.name[0] !== \"F\");\n                case \"B\": return moveset.filter(k => k.name[0] !== \"F\" && k.name[0] !== \"B\");\n\n                case \"E\": return moveset.filter(k => k.name[0] !== \"U\" && k.name[0] !== \"D\" && k.name[0] !== \"E\");\n                case \"S\": return moveset.filter(k => k.name[0] !== \"F\" && k.name[0] !== \"B\" && k.name[0] !== \"S\");\n            }\n        }\n        for (let move of moveset) {\n            moveTable[move.name] = getAvailableMove(move.name)\n        }\n    }\n    prepareNextMoveTable()\n\n    function expand(cube: CubieT, depth: number, solution: MoveT[]) : SState{\n        const availableMoves = solution.length > 0 ? moveTable[solution[solution.length - 1].name] : moveset\n        const seen_encodings = new Set()\n        seen_encodings.add(pruners[0].encode(cube))\n        for (let move of availableMoves) {\n            let new_cube = CubieCube.apply(cube, move)\n            let enc = pruners[0].encode(new_cube)\n            let redundant = seen_encodings.has(enc)\n            if (!redundant) {\n                seen_encodings.add(enc)\n                solution.push(move);\n                let st : SState = search(new_cube, depth + 1, solution);\n                solution.pop();\n                if (st === SState.STOP) {\n                    return SState.STOP\n                }\n            }\n        }\n        return SState.CONTINUE\n    }\n\n    function try_push(solution: MoveT[], depth: number) {\n        if (depth < min_depth) return SState.CONTINUE\n        if (accum.solutions.length < accum.capacity) {\n            let flag = true\n            for (let sol of accum.solutions) {\n                if (arrayEqual(sol, solution)) {\n                    flag = false;\n                    break;\n                }\n            }\n            if (flag) {\n                accum.solutions.push([...solution])\n            }\n        }\n\n        if (accum.solutions.length === accum.capacity) {\n            return SState.STOP\n        } else {\n            return SState.CONTINUE\n        }\n    }\n\n    function search(cube: CubieT, depth: number, solution: MoveT[]) : SState {\n        state_count++;\n        if (state_count > MAX_STATE_COUNT) {\n            return SState.STOP\n        }\n        if (is_solved(cube)) {\n            return try_push(solution, depth)\n        } else {\n            if (depth >= max_depth) return SState.CONTINUE;\n            let d = pruners[0].query(cube)\n            if (d + depth > max_depth) {\n                prune_count++;\n                return SState.CONTINUE\n            } else {\n                return expand(cube, depth, solution)\n            }\n        }\n    }\n\n    function solve(cube: CubieT, depth_l: number, depth_r: number, capacity: number) {\n        let accum : Accumulator = {\n            solutions: [],\n            capacity\n        }\n        for (let i = depth_l; i <= depth_r; i++) {\n            accum = solve_depth(cube, depth_l, i, accum)\n            if (accum.solutions.length === accum.capacity) {\n                break;\n            }\n        }\n        console.log(`Number of states = ${state_count}, pruned = ${prune_count}`);\n        return accum.solutions\n    }\n\n    function getPruner() {\n        return pruners\n    }\n    return { solve, is_solved, getPruner }\n};\n\nlet FbdrSolver = function() {\n    let prunerConfig = fbdrPrunerConfig\n    let pruner = Pruner(prunerConfig)\n    pruner.init()\n    //let solvedEncodings = prunerConfig.solved_states.map(s => prunerConfig.encode(s))\n    function is_solved(cube: CubieT) {\n        return pruner.query(cube) === 0;\n    }\n\n    let config = {\n        is_solved,\n        moveset: prunerConfig.moveset,\n        pruners: [pruner],\n    }\n\n    let solver = Solver(config)\n    return solver\n}\n\nlet FbSolver = function() {\n    let prunerConfig = fbPrunerConfig\n    let pruner = Pruner(prunerConfig)\n    pruner.init()\n    //let solvedEncodings = prunerConfig.solved_states.map(s => prunerConfig.encode(s))\n    function is_solved(cube: CubieT) {\n        return pruner.query(cube) === 0;\n    }\n\n    let config = {\n        is_solved,\n        moveset: prunerConfig.moveset,\n        pruners: [pruner],\n    }\n\n    let solver = Solver(config)\n    return solver\n}\n\nlet SsSolver = function(is_front: boolean) {\n    let prunerConfig = ssPrunerConfig(is_front)\n    let pruner = Pruner(prunerConfig)\n    pruner.init()\n    //let solvedEncodings = prunerConfig.solved_states.map(s => prunerConfig.encode(s))\n    function is_solved(cube: CubieT) {\n        return pruner.query(cube) === 0;\n    }\n\n    let config = {\n        is_solved,\n        moveset: prunerConfig.moveset,\n        pruners: [pruner],\n    }\n\n    let solver = Solver(config)\n    return solver\n}\n\nlet Min2PhaseSolver : () => SolverT = function() {\n    // polyfill for min2phase\n\n    min2phase_init();\n    function solve(cube : CubieT, l : number, r : number, c : number) {\n        console.assert(arrayEqual(cube.tp, CubieCube.id.tp), \"Cube center is not solved: \" + cube.tp)\n        const transformed_cube = CubieCube.to_cstimer_cube(cube)\n        console.assert( CubieCube.is_solveable(transformed_cube), \"Cube must be solveable\")\n        let solution = min2phase_solve(transformed_cube);\n        return [Move.parse(solution)]\n    }\n    function is_solved(cube: CubieT) {\n        return true\n    }\n    function getPruner() {\n        return []\n    }\n    return {\n        solve,\n        is_solved,\n        getPruner\n    }\n}\n\nexport { FbdrSolver, FbSolver, SsSolver, Min2PhaseSolver }","import { FbdrSolver, SolverT, SsSolver, FbSolver, Min2PhaseSolver } from './Solver';\n\nlet CachedSolver = function() {\n    let cache : Map<string, SolverT> = new Map()\n    function get(s: string) {\n        if (!cache.has(s)) {\n            switch (s) {\n                case \"fbdr\": cache.set(s, FbdrSolver()); break\n                case \"fb\": cache.set(s, FbSolver()); break\n                case \"ss-front\": cache.set(s, SsSolver(true)); break\n                case \"ss-back\": cache.set(s, SsSolver(false)); break\n                case \"min2phase\": cache.set(s, Min2PhaseSolver()); break\n            }\n        }\n        return cache.get(s) as SolverT\n    }\n    return {get}\n}()\n\nexport {CachedSolver}","import { AppState, Config, FavCase } from \"../Types\";\nimport { alg_generator, AlgDesc } from \"../lib/Algs\";\nimport { MoveT, CubieT, Face, Typ, FBpairPos } from \"../lib/Defs\";\nimport { CubieCube, Move, CubeUtil, Mask, FaceletCube } from '../lib/CubeLib';\nimport { getActiveName, getActiveNames } from '../lib/Selector';\nimport { CachedSolver } from \"../lib/CachedSolver\";\nimport { rand_choice, arrayEqual } from '../lib/Math';\nimport { AbstractStateM, StateFactory } from \"./AbstractStateM\";\n\nabstract class BlockTrainerStateM extends AbstractStateM {\n    abstract solverL: number;\n    abstract solverR: number;\n    abstract getRandom(): [CubieT, string] | [CubieT, string, boolean];\n\n    _solve_min2phase(cube: CubieT) : AppState  {\n\n        const state = this.state\n        const ori = alg_generator(state.config.orientationSelector)().id;\n        let algdesc: AlgDesc = {\n            id: `min2phase`,\n            alg: \"\",\n            alt_algs: [],\n            setup: Move.to_string( CachedSolver.get(\"min2phase\").solve(cube,0,0,0)[0] ),\n            kind: `min2phase`\n        };\n        return {\n            ...state,\n            cube: {\n                ...state.cube,\n                state: cube,\n                ori\n            },\n            case: {\n                state: cube,\n                desc: [algdesc]\n            }\n        };\n    }\n    _solve(cube: CubieT, solverName: string, updateSolutionOnly?: boolean, use2PhaseScramble?: boolean) {\n        if (solverName === \"min2phase\") {\n            if (!updateSolutionOnly)\n                return this._solve_min2phase(cube)\n            return this.state\n        }\n        const solver = CachedSolver.get(solverName);\n        const state = this.state;\n        const scramble = use2PhaseScramble ?\n            CachedSolver.get(\"min2phase\").solve(cube,0,0,0)[0] :\n            Move.inv(solver.solve(cube, this.solverL, this.solverR, 1)[0]);\n        //console.log(cube, solverName, scramble, this.solverL, this.solverR)\n        const magnification = 4;\n        const solutionCap = +(getActiveName(state.config.solutionNumSelector) || 5);\n        // not using solutionCap for now\n        const setup = Move.to_string(scramble);\n        let solution = solver.solve(cube, 0, this.solverR, solutionCap * magnification);\n        solution.sort((a, b) => Move.evaluate(a) - Move.evaluate(b));\n        const alg = Move.to_string(solution[0]);\n        const alt_algs = solution.slice(1, solutionCap).map((s: MoveT[]) => Move.to_string(s));\n        const ori = (updateSolutionOnly) ? this.state.cube.ori : alg_generator(state.config.orientationSelector)().id;\n        let algdesc: AlgDesc = {\n            id: `${solverName}`,\n            alg,\n            alt_algs,\n            setup,\n            kind: `${solverName}`\n        };\n        const name = updateSolutionOnly ? this.state.name : \"hiding\";\n        // console.log(\"algdesc\", algdesc)\n        return {\n            ...state,\n            name: name,\n            cube: {\n                ...state.cube,\n                state: cube,\n                ori\n            },\n            case: {\n                state: cube,\n                desc: [algdesc]\n            }\n        };\n    }\n    _updateCase(): AppState {\n        const [cube, solverName, use2PhaseScramble] = this.getRandom();\n        return this._solve(cube, solverName, false, use2PhaseScramble);\n    }\n    _updateCap(): AppState {\n        const state = this.state;\n        if (state.case.desc.length === 0) {\n            return state;\n        }\n        const [cube, solverName] = [state.cube.state, state.case.desc[0]!.kind];\n        return this._solve(cube, solverName, true);\n    }\n    replay(case_: FavCase): AppState {\n        const cube = CubieCube.from_move(Move.parse(case_.setup));\n        const solverName = case_.solver;\n        const state1 = this._solve(cube, solverName);\n        return {\n            ...state1,\n            mode: case_.mode\n        };\n    }\n    control(s: string): AppState {\n        let state = this.state;\n        if (s === \"#space\") {\n            if (state.name === \"revealed\") {\n                return this._updateCase();\n            }\n            else {\n                return {\n                    ...state,\n                    name: \"revealed\"\n                };\n            }\n        }\n        else if (s === \"#enter\") {\n            return {\n                ...state,\n                cube: {\n                    ...state.cube,\n                    state: state.case.state,\n                }\n            };\n        }\n        else {\n            return state;\n        }\n    }\n    move(movestr: string): AppState {\n        let state = this.state;\n        let move = Move.parse(movestr)[0];\n        let cube = CubieCube.apply(state.cube.state, move);\n        return {\n            ...state,\n            cube: {\n                ...state.cube,\n                state: cube\n            }\n        };\n    }\n    reactToConfig(conf: Config): AppState {\n        // see if solution cap changed\n        let changed = !arrayEqual(this.state.config.solutionNumSelector.flags, conf.solutionNumSelector.flags);\n        if (changed) {\n            return (StateFactory.create({ ...this.state, config: conf }) as BlockTrainerStateM)._updateCap();\n        }\n        else {\n            return this.state;\n        }\n    }\n}\n// const m_premove = [[], Move.all[\"M\"], Move.all[\"M'\"], Move.all[\"M2\"]];\nexport class FbdrStateM extends BlockTrainerStateM {\n    solverL: number;\n    solverR: number;\n    _get_pair_solved_front() {\n        let [cp, co, ep, eo] = rand_choice(FBpairPos);\n        //let mask = Mask.copy(Mask.fs_front_mask)\n        let cube = CubeUtil.get_random_with_mask(Mask.fs_back_mask);\n        for (let i = 0; i < 8; i++) {\n            if (cube.cp[i] === 4) {\n                cube.cp[i] = cube.cp[cp];\n                cube.co[i] = cube.co[cp];\n                cube.cp[cp] = 4;\n                cube.co[cp] = co;\n            }\n        }\n        for (let i = 0; i < 12; i++) {\n            if (cube.ep[i] === 8) {\n                cube.ep[i] = cube.ep[ep];\n                cube.eo[i] = cube.eo[ep];\n                cube.ep[ep] = 8;\n                cube.eo[ep] = eo;\n            }\n        }\n        return cube;\n    }\n    _get_random_fs_back() {\n        let cube = CubeUtil.get_random_with_mask(Mask.fs_back_mask);\n        return cube;\n        //return CubieCube.apply(cube, rand_choice(m_premove));\n    }\n    _get_random_fs_front() {\n        let cube = CubeUtil.get_random_with_mask(Mask.fs_front_mask);\n        return cube;\n        //return CubieCube.apply(cube, rand_choice(m_premove));\n    }\n    getRandom(): [CubieT, string, boolean] {\n        const fbOnly = getActiveName(this.state.config.fbOnlySelector) === \"FB Last Pair Only\";\n        const pairSolved = getActiveName(this.state.config.fbPairSolvedSelector) !== \"Random\";\n        const scrambleType = getActiveName(this.state.config.fbdrScrambleSelector) || \"Short\";\n        const useMin2PhaseScramble = !scrambleType.startsWith(\"Short\");\n        const solverName = fbOnly ? \"fb\" : \"fbdr\";\n        let active = getActiveNames(this.state.config.fbdrSelector)[0];\n        //console.log(\"active\", active)\n        if (active === \"FS at back\") {\n            if (pairSolved) {\n                return [this._get_pair_solved_front(), solverName, useMin2PhaseScramble];\n            }\n            else\n                return [this._get_random_fs_back(), solverName, useMin2PhaseScramble];\n        }\n        else if (active === \"FS at front\") {\n            return [this._get_random_fs_front(), solverName, useMin2PhaseScramble];\n        }\n        else\n            return [rand_choice([this._get_random_fs_back, this._get_random_fs_front])(),\n                solverName, useMin2PhaseScramble];\n    }\n    constructor(state: AppState) {\n        super(state);\n        this.solverL = 8;\n        this.solverR = 10;\n    }\n}\nexport class SsStateM extends BlockTrainerStateM {\n    solverL: number;\n    solverR: number;\n    _get_random_fb(allowed_dr_eo_ep: [number, number][]) {\n        let active = getActiveName(this.state.config.ssPairOnlySelector);\n        let mask = (active === \"SS\") ? Mask.fb_mask : Mask.fbdr_mask;\n        let cube : CubieT;\n        while (true) {\n            cube = CubeUtil.get_random_with_mask(mask);\n            if (active !== \"SS\") break;\n            let ep = cube.ep.indexOf(7);\n            let eo = cube.eo[ep];\n            if (allowed_dr_eo_ep.find( ([eo_, ep_]) => (eo === eo_) && (ep === ep_))) {\n                break\n            }\n        }\n        return cube\n    }\n    getRandom(): [CubieT, string] {\n        let active = getActiveNames(this.state.config.ssSelector)[0];\n        const drPositionMap : [number, number][] = [\n            [0, 0], [1, 0],\n            [0, 1], [1, 1],\n            [0, 2], [1, 2],\n            [0, 3], [1, 3],\n            [0, 4], [1, 4],\n            [0, 6], [1, 6],\n            [0, 7], [1, 7],\n            [0, 10], [1, 10],\n            [0, 11], [1, 11]\n        ]\n        let allowed_dr_eo_ep_patterns = this.state.config.ssPosSelector.flags.map( (value, i) => [value, i])\n            .filter( ([value, i]) => value ).map( ([value, i]) => drPositionMap[i] )\n        let cube = this._get_random_fb(allowed_dr_eo_ep_patterns);\n        let solver;\n        if (active === \"SS at front\") {\n            solver = \"ss-front\";\n        }\n        else if (active === \"SS at back\") {\n            solver = \"ss-back\";\n        }\n        else {\n            solver = rand_choice([\"ss-back\", \"ss-front\"]);\n        }\n        return [cube, solver];\n    }\n    constructor(state: AppState) {\n        super(state);\n        this.solverL = 9;\n        this.solverR = 10;\n    }\n}\nexport class FbStateM extends BlockTrainerStateM {\n    solverL: number;\n    solverR: number;\n    _find_center_connected_edges(cube: CubieT, is_l_only: boolean) {\n        let centers = is_l_only ? [ Face.L ] : [ Face.F, Face.B, Face.L, Face.R]\n        let edges = CubeUtil.stickers.filter(c => c[2] === Typ.E && centers.includes(c[3])\n            && FaceletCube.color_of_sticker(cube, [c[0], c[1], c[2]]) === c[3]);\n        return edges;\n    }\n    _get_random(): [CubieT, string] {\n        let active = getActiveName(this.state.config.fbPieceSolvedSelector);\n        let mask;\n        if (active === \"Random\")\n            mask = Mask.empty_mask;\n        else if (active === \"DL Solved\")\n            mask = Mask.dl_solved_mask;\n        else if (active === \"DB Solved\")\n            mask = Mask.db_solved_mask;\n        else if (active === \"Zhouheng Variant\")\n            mask = Mask.zhouheng_mask;\n        else\n            mask = Mask.empty_mask;\n        let cube = CubeUtil.get_random_with_mask(mask);\n\n        let solver = \"fb\";\n        if (active === \"Zhouheng Variant\") {\n            // B F'\n            cube = CubieCube.apply(cube, Move.parse(\"B F'\"));\n            solver = \"fbdr\";\n        }\n        const g_hard = \"Hard over x2y(Scramble only)\"\n        if (active === g_hard) {\n            solver = \"min2phase\";\n        }\n        if (active !== \"HARD\" && active !== g_hard) {\n            return [cube, solver];\n        }\n        let n = 0;\n        let is_l_only = active === \"HARD\"\n        while (true) {\n            let pairs = CubeUtil.find_pairs(cube);\n            let cc_edges = this._find_center_connected_edges(cube, is_l_only);\n            n++;\n            if (pairs.length === 0 && cc_edges.length === 0) {\n                console.log(\"Successful after \" + n + \" tries \");\n                return [cube, solver];\n            }\n            cube = CubeUtil.get_random_with_mask(Mask.empty_mask);\n        }\n    }\n    getRandom(): [CubieT, string] {\n        let [cube, solver] = this._get_random();\n        return [cube, solver];\n    }\n    constructor(state: AppState) {\n        super(state);\n        this.solverL = 9;\n        this.solverR = 11;\n    }\n}\n","import { AppState, StateT, Config } from \"../Types\";\nimport { alg_generator, AlgDesc } from \"../lib/Algs\";\nimport { MoveT, CubieT } from \"../lib/Defs\";\nimport { CubieCube, Move, CubeUtil } from '../lib/CubeLib';\nimport { AbstractStateM } from \"./AbstractStateM\";\nimport {initialize as min2phase_init, solve as min2phase_solve} from \"../lib/min2phase/min2phase-wrapper\"\nimport { arrayEqual } from \"../lib/Math\";\n\nexport abstract class CmllStateM extends AbstractStateM {\n    _get2PhaseSolution(cube: CubieT): AlgDesc {\n        // Aha! f = g(b) but you modified b later, and f won't update!\n\n        let m2_away = false\n        if (cube.tp[0] !== 0) {\n            m2_away = true\n            cube = CubieCube.apply_str(cube, \"M2\")\n        }\n        console.assert(arrayEqual(cube.tp, CubieCube.id.tp))\n\n        const transformed_cube = CubieCube.to_cstimer_cube(cube)\n        console.assert( CubieCube.is_solveable(transformed_cube), \"Cube must be solveable\")\n        min2phase_init();\n        let  solution = min2phase_solve(transformed_cube);\n        if (m2_away) {\n            solution += \" M2\"\n        }\n        //const alg = Move.to_string(Move.inv(Move.parse(solution)));\n        //const solver = Cube.initSolver();\n        //const ccube = Cube.fromString(fcube_str);\n        //const solution = Move.parse(ccube.solve())\n        const algDesc: AlgDesc = ({\n            id: `scramble`,\n            alg: solution,\n            kind: 'scramble'\n        });\n        console.log(solution);\n        return algDesc;\n    }\n    _generateCase(): AppState {\n        let state = this.state;\n        let { config } = state;\n        let { cmllSelector, triggerSelector, cmllAufSelector, orientationSelector } = config;\n        let generator = alg_generator(cmllSelector);\n        let trig_generator = alg_generator(triggerSelector);\n        let u_auf_generator = alg_generator(cmllAufSelector);\n        let ori_generator = alg_generator(orientationSelector);\n        let trigger_alg: AlgDesc = trig_generator();\n        let cmll_alg: AlgDesc = generator();\n        let u_auf_alg: AlgDesc = u_auf_generator();\n        let alg_str = trigger_alg.alg + \" \" + u_auf_alg.alg + \" \" + cmll_alg.alg;\n        let moves: MoveT[] = Move.inv(Move.parse(alg_str));\n        //console.log(\"moves\", Move.to_string(moves))\n\n        let lse_cube: CubieT\n        while (true) {\n            let cube = CubeUtil.get_random_lse();\n            lse_cube = CubieCube.apply(cube, moves);\n            if (CubieCube.is_solveable(lse_cube)) {\n                break;\n            }\n        }\n        let solution = this._get2PhaseSolution(lse_cube);\n        // ori based on ...?\n        let ori: string = ori_generator().id;\n        //console.log(\"current ori selector's ori \", ori)\n        return ({\n            ...state,\n            name: \"solving\",\n            cube: {\n                state: lse_cube,\n                ori,\n                history: [],\n            },\n            case: {\n                state: lse_cube,\n                desc: [trigger_alg, u_auf_alg, cmll_alg, solution]\n            },\n        });\n    }\n    control(s: string): AppState {\n        let state = this.state;\n        if (s === \"#space\") {\n            // SCRAMBLE\n            // enter cleared solving state based on selection\n            return this._generateCase();\n        }\n        else if (s === \"#enter\") {\n            // REDO\n            return ({\n                ...state,\n                name: \"solving\",\n                cube: {\n                    ...state.cube,\n                    state: state.case.state,\n                    history: []\n                },\n                case: {\n                    ...state.case,\n                }\n            });\n        }\n        else {\n            throw new Error(\"Unrecognized control code\");\n        }\n    }\n    reactToConfig(conf: Config): AppState {\n        return this.state;\n    }\n}\nexport class SolvingStateM extends CmllStateM {\n    move(move: string): AppState {\n        let state = this.state;\n        let moves = Move.parse(move);\n        if (moves.length > 0) {\n            let move = moves[0];\n            let cube = CubieCube.apply(state.cube.state, move);\n            let cmll_solved = CubeUtil.is_cmll_solved(cube);\n            let newState: StateT = cmll_solved ? \"solved\" : \"solving\";\n            return ({\n                ...state,\n                cube: {\n                    ...state.cube,\n                    state: CubieCube.apply(state.cube.state, move),\n                    history: [...state.cube.history, move],\n                },\n                name: newState\n            });\n        }\n        else {\n            // Nothing to apply\n            return state;\n        }\n    }\n}\nexport class SolvedStateM extends CmllStateM {\n    move(move: string): AppState {\n        return this.state;\n    }\n}\n","import { StateFactory} from './AbstractStateM';\nimport { AppState, Mode } from '../Types';\nimport { FbdrStateM, SsStateM, FbStateM} from './BlockTrainerStateM';\nimport { SolvingStateM, SolvedStateM } from './CmllStateM';\n\nStateFactory.create = function(state: AppState) {\n        let mode: Mode = state.mode;\n        switch (mode) {\n            case \"fbdr\":\n                return new FbdrStateM(state);\n            case \"ss\":\n                return new SsStateM(state);\n            case \"fb\":\n                return new FbStateM(state);\n            case \"cmll\": {\n                switch (state.name) {\n                    case \"solving\": return new SolvingStateM(state);\n                    case \"solved\": return new SolvedStateM(state);\n                    default: throw new Error(\"impossible\");\n                }\n            }\n            case \"experimental\":\n                return new FbStateM(state);\n        }\n        ;\n    }\n\nexport { StateFactory };","\nimport { AppState, StateT, Action, Mode, Config, FavListAction } from \"../Types\"\nimport { CubieCube } from '../lib/CubeLib';\nimport { setConfig, getConfig, getFavList, setFavList} from '../lib/Local';\nimport { getActiveName } from '../lib/Selector';\nimport { StateFactory } from \"./StateFactory\";\n\nexport const getInitialState = (mode?: Mode) : AppState => {\n    mode = mode || \"fbdr\"\n    let initialStateName : StateT = function() {\n        switch (mode){\n            case \"cmll\": return \"solved\"\n            case \"fbdr\":\n            case \"ss\":\n            case \"fb\":\n                return \"revealed\"\n            case \"experimental\":\n                return \"revealed\"\n        }\n    }()\n    let ori = getActiveName(getConfig().orientationSelector) || \"YR\"\n    return {\n        name: initialStateName,\n        mode,\n        scrSource: \"random\",\n        cube: {\n            state: CubieCube.id,\n            ori,\n            history: [],\n        },\n        case: {\n            state: CubieCube.id,\n            desc: []\n        },\n        cubejs: {\n            initialized: false\n        },\n        config: getConfig(),\n        favList: getFavList()\n    }\n}\n\nfunction reduceByFavlist(state: AppState, action: FavListAction) {\n    let favList = state.favList;\n\n    switch (action.action) {\n        case \"add\":\n            favList = [...action.content, ...favList]\n            setFavList(favList)\n            break;\n        case \"remove\": {\n        // only remove one at a time for now\n            const rem = action.content[0]\n            favList = favList.filter((value) => {\n                return !(value.mode === rem.mode && value.setup === rem.setup && value.solver === rem.solver)\n            })\n            setFavList(favList)\n            break;\n        };\n        case \"replay\": {\n            return StateFactory.create(state).replay(action.content[0])\n        }\n    }\n    return {\n        ...state,\n        favList\n    }\n}\n\nexport function reducer(state: AppState, action: Action): AppState {\n    // todo: cache values based on this\n    // console.log(\"prev state\", state)\n    switch (action.type) {\n        case \"key\": {\n            let newState = reduceByKey(state, action.content)\n            return newState\n        };\n        case \"config\": {\n            // LESSON: Object.assign is dangerous\n            let newConfig = {...state.config, ...action.content}\n            setConfig(newConfig)\n            let newState = reduceByConfig(state, newConfig)\n            return {\n                ...newState,\n                config: newConfig\n            }\n        };\n        case \"mode\": {\n            let mode = action.content\n            window.location.hash = mode\n            state = getInitialState(mode)\n            return state\n        };\n        case \"scrSource\":\n            return {\n                ...state,\n                scrSource: action.content\n            }\n        case \"favList\":\n            return reduceByFavlist(state, action)\n        default:\n            return state\n        }\n}\n\n\nfunction reduceByKey(state: AppState, code: string): AppState {\n    if (code === \"\") return state;\n\n    const stateM = StateFactory.create(state)\n    // case match on kind of operation\n    if (code[0] === \"#\") {\n        return stateM.control(code)\n    } else {\n        return stateM.move(code)\n    }\n}\nfunction reduceByConfig(state: AppState, conf: Config): AppState {\n    const stateM = StateFactory.create(state)\n    // case match on kind of operation\n    return stateM.reactToConfig(conf)\n}","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  name: \"bright\",\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#d32f2f',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#eeeeef',\n      paper: '#fff'\n    },\n    text: {\n      primary: '#000',\n      secondary: '#888',\n      hint: '#556cd6'\n    }\n  },\n\n});\nconst themeDark = createMuiTheme({\n  name: \"dark\",\n  palette: {\n    primary: {\n      main: '#9FA4C2', // '#757575',\n    },\n    secondary: {\n      main: '#ffffff', //f55057',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#121212',\n      paper: '#252525' //#424242'\n    },\n    text: {\n      primary: '#fff',\n      secondary: '#ddd',\n      hint: '#eee'\n    }\n  },\n\n});\n\nexport { theme, themeDark };","import React from 'react'\nimport { defaultKeyMapping } from \"../lib/Defs\";\nimport AppView from \"../components/AppView\"\nimport { reducer, getInitialState } from '../reducers/Reducer'\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { theme, themeDark } from '../theme';\nimport { getActiveName } from '../lib/Selector';\n\nwindow.addEventListener('keypress', function(e) {\n  if(e.keyCode === 32 && e.target === document.body) {\n    e.preventDefault();\n  }\n});\n\nfunction App(props: {}) {\n  const [state, dispatch] = React.useReducer( reducer, getInitialState() )\n\n  // Add event listeners\n  React.useEffect(() => {\n    function downHandler({ key }: { key : string}) {\n      key = key.toUpperCase()\n      if (defaultKeyMapping.hasOwnProperty(key)) {\n        dispatch({\n          type: \"key\", content: defaultKeyMapping[key] }\n        );\n      }\n    }\n    window.addEventListener('keydown', downHandler);\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n    };\n  });\n\n  const appTheme = getActiveName(state.config.theme) === \"bright\" ? theme : themeDark\n  return (\n    <ThemeProvider theme={appTheme}>\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n      <CssBaseline />\n      <AppView state={state} dispatch={dispatch} />\n    </ThemeProvider>\n  )\n}\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/App';\nimport * as serviceWorker from './serviceWorker';\n\n\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root'),\n  );\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","function createArray(length) {\n\tconst arr = Array(length);\n\tfor (var i=0; i<length; i++) {\n\t\tarr[i] = 0;\n\t}\n\treturn arr;\n}\n\nfunction createArrays(length1, length2) {\n\tconst arr = Array(length1);\n\tfor (var i=0; i<length1; i++) {\n\t\tarr[i] = Array(length2);\n\t\tfor (var j=0; j<length2; j++) {\n\t\t\tarr[i][j] = 0;\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction bitOdd(i) {\n\ti ^= i >>> 1;\n\ti ^= i >>> 2;\n\ti ^= i >>> 4;\n\ti ^= i >>> 8;\n\treturn i & 1;\n}\n\nfunction bitCount(i) {\n\ti = i - ((i >>> 1) & 0x55555555);\n\ti = (i & 0x33333333) + ((i >>> 2) & 0x33333333);\n\treturn (i + (i >>> 8) + (i >>> 4)) & 0x0f;\n}\n\nfunction get4Parity(idx) {\n\tvar p = 0;\n\tfor (var i=2; i>=0; i--) {\n\t\tp += idx % (4-i);\n\t\tidx = ~~(idx / (4-i));\n\t}\n\tp &= 1;\n\treturn p;\n}\n\nfunction get8Parity(idx) {\n\tvar p = 0;\n\tfor (var i=6; i>=0; i--) {\n\t\tp += idx % (8-i);\n\t\tidx = ~~(idx / (8-i));\n\t}\n\tp &= 1;\n\treturn p;\n}\n\nfunction get12Parity(idx) {\n\tvar p = 0;\n\tfor (var i=10; i>=0; i--) {\n\t\tp += idx % (12-i);\n\t\tidx = ~~(idx / (12-i));\n\t}\n\tp &= 1;\n\treturn p;\n}\n\n\nfunction binarySearch(arr, key) {\n\tvar length = arr.length;\n\tif (key <= arr[length-1]) {\n\t\tvar l = 0;\n\t\tvar r = length-1;\n\t\twhile (l <= r) {\n\t\t\tvar mid = (l+r)>>>1;\n\t\t\tvar val = arr[mid];\n\t\t\tif (key > val) {\n\t\t\t\tl = mid + 1;\n\t\t\t} else if (key < val) {\n\t\t\t\tr = mid - 1;\n\t\t\t} else {\n\t\t\t\treturn (mid);\n\t\t\t}\n\t\t}\n\t}\n\treturn 0xffff;\n}\n\nvar fact = [1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800, 39916800, 479001600];\nvar perm3 = [[11, 10, 9], [10, 11, 9], [11, 9, 10], [9, 11, 10], [10, 9, 11], [9, 10, 11]];\nvar ud2std = [0, 1, 2, 4, 7, 9, 10, 11, 13, 16];\nvar std2ud = createArray(18);\nvar Cnk = createArrays(12, 13);\nvar move2str = [\"U \", \"U2\", \"U'\", \"R \", \"R2\", \"R'\", \"F \", \"F2\", \"F'\", \"D \", \"D2\", \"D'\", \"L \", \"L2\", \"L'\", \"B \", \"B2\", \"B'\"];\nvar urfMove = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17], \n\t\t\t\t\t\t\t\t\t\t\t[6, 7, 8, 0, 1, 2, 3, 4, 5,15,16,17, 9,10,11,12,13,14],\n\t\t\t\t\t\t\t\t\t\t\t[3, 4, 5, 6, 7, 8, 0, 1, 2,12,13,14,15,16,17, 9,10,11],\n\t\t\t\t\t\t\t\t\t\t\t[2, 1, 0, 5, 4, 3, 8, 7, 6,11,10, 9,14,13,12,17,16,15], \n\t\t\t\t\t\t\t\t\t\t\t[8, 7, 6, 2, 1, 0, 5, 4, 3,17,16,15,11,10, 9,14,13,12],\n\t\t\t\t\t\t\t\t\t\t\t[5, 4, 3, 8, 7, 6, 2, 1, 0,14,13,12,17,16,15,11,10, 9]];\nfor (var i=0; i<12; i++) {\n\tCnk[i][0] = 1;\n\tCnk[i][i] = 1;\n\tCnk[i][i+1] = 0;\n\tfor (var j=1; j<i; j++) {\n\t\tCnk[i][j] = (Cnk[i-1][j-1] + Cnk[i-1][j]);\n\t}\n}\nfor (var i=0; i<10; i++) {\n\tstd2ud[ud2std[i]] = i;\n}\n\nvar ckmv = Array(19);//new boolean[19][18];\nvar ckmv2 = Array(11);//new boolean[11][10];\nckmv[18] = Array(18);\nckmv2[10] = Array(10);\nfor (var i=0; i<18; i++) {\n\tckmv[i] = Array(18);\n\tfor (var j=0; j<18; j++) {\n\t\tckmv[i][j] = (~~(i/3) == ~~(j/3)) || ((~~(i/3)%3 == ~~(j/3)%3) && (i>=j));\n\t}\n\tckmv[18][i] = false;\n}\nfor (var i=0; i<10; i++) {\n\tckmv2[i] = Array(10);\n\tfor (var j=0; j<10; j++) {\n\t\tckmv2[i][j] = ckmv[ud2std[i]][ud2std[j]];\n\t}\n\tckmv2[10][i] = false;\n}\n\n\n//********************************************************************************//\n\nfunction CubieCube() {\n\tthis.cp = [0, 1, 2, 3, 4, 5, 6, 7];\n\tthis.co = [0, 0, 0, 0, 0, 0, 0, 0];\n\tthis.ep = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n\tthis.eo = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\tthis.getFlip = function getFlip() {\n\t\tvar idx = 0;\n\t\tfor (var i=0; i<11; i++) {\n\t\t\tidx |= this.eo[i] << i;\n\t\t}\n\t\treturn idx;\n\t}\n\t\n\tthis.getFlipSym = function getFlipSym() {\n\t\tif (FlipR2S != 0) {\n\t\t\treturn FlipR2S[this.getFlip()];\n\t\t}\n\t\tfor (var k=0; k<16; k+=2) {\n\t\t\tEdgeConjugate(this, SymInv[k], temps);\n\t\t\tvar idx = binarySearch(FlipS2R, temps.getFlip());\n\t\t\tif (idx != 0xffff) {\n\t\t\t\treturn ((idx << 3) | (k >>> 1));\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tthis.setFlip = function setFlip(idx) {\n\t\tthis.eo[11] = bitOdd(idx);\n\t\tfor (var i=0; i<11; i++) {\n\t\t\tthis.eo[i] = idx & 1;\n\t\t\tidx >>>= 1;\n\t\t}\n\t}\n\t\n\tthis.getTwist = function getTwist() {\n\t\tvar idx = 0;\n\t\tfor (var i=0; i<7; i++) {\n\t\t\tidx *= 3;\n\t\t\tidx += this.co[i];\n\t\t}\n\t\treturn idx;\n\t}\n\t\n\tthis.getTwistSym = function getTwistSym() {\n\t\tif (TwistR2S != null) {\n\t\t\treturn TwistR2S[this.getTwist()];\n\t\t}\n\t\tfor (var k=0; k<16; k+=2) {\n\t\t\tCornConjugate(this, SymInv[k], temps);\n\t\t\tlet idx = binarySearch(TwistS2R, temps.getTwist());\n\t\t\tif (idx != 0xffff) {\n\t\t\t\treturn ((idx << 3) | (k >>> 1));\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\n\tthis.setTwist = function setTwist(idx) {\n\t\tvar twst = 0;\n\t\tfor (var i=6; i>=0; i--) {\n\t\t\ttwst += this.co[i] = idx % 3;\n\t\t\tidx = ~~(idx/3);\n\t\t}\n\t\tthis.co[7] = (15 - twst) % 3;\n\t}\n\t\n\tthis.getUDSlice = function getUDSlice() {\n\t\tvar idx = 0;\n\t\tvar r = 4;\n\t\tfor (var i=0; i<12; i++) {\n\t\t\tif (this.ep[i] >= 8) {\n\t\t\t\tidx += Cnk[11-i][r];\n\t\t\t\tr--;\n\t\t\t}\n\t\t}\n\t\treturn idx;\n\t}\n\n\tthis.setUDSlice = function setUDSlice(idx) {\n\t\tvar r = 4;\n\t\tfor (var i=0; i<12; i++) {\n\t\t\tif (idx >= Cnk[11-i][r]) {\n\t\t\t\tidx -= Cnk[11-i][r];\n\t\t\t\tr--;\n\t\t\t\tthis.ep[i] = (11-r);\n\t\t\t} else {\n\t\t\t\tthis.ep[i] = (i+r-4);\n\t\t\t}\n\t\t}\n\t}\n\tthis.getMPerm = function getMPerm() {\n\t\tvar m = (1 << this.ep[11]);\t\t\n\t\tvar idx = 0;\n\t\tfor (var i=10; i>=8; --i) {\n\t\t\tvar t = 1 << this.ep[i];\n\t\t\tidx += bitCount(m & (t - 1)) * fact[11-i];\n\t\t\tm |= t;\n\t\t}\n\t\treturn idx;\n\t}\t\n\tthis.setMPerm = function setMPerm(idx) {\n\t\tthis.ep[11] = 8;\n\t\tfor (var i=10; i>=8; i--) {\n\t\t\tthis.ep[i] = (idx % (12-i) + 8);\n\t\t\tidx = ~~(idx / (12-i));\n\t\t\tfor (var j=i+1; j<12; j++) {\n\t\t\t\tif (this.ep[j] >= this.ep[i])\n\t\t\t\t\tthis.ep[j]++;\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tthis.getMid3 = function getMid3() {\n\t\tvar idxA = 0;\n\t\tvar idxB = 0;\n\t\tvar mask = 0;\n\t\tvar r = 3;\n\t\tfor (var i=11; i>=0; i--) {\n\t\t\tif (this.ep[i] >= 9) {\n\t\t\t\tidxA += Cnk[i][r--];\n\t\t\t\tvar t = 1 << this.ep[i];\n\t\t\t\tidxB += bitCount(mask & (t - 1)) * fact[2-r];\n\t\t\t\tmask |= t;\n\t\t\t}\n\t\t}\n\t\treturn (idxA * 6 + idxB);\n\t}\n\t\n\tthis.setMid3 = function setMid3(idxA) {\n\t\tvar edge = perm3[idxA % 6];\n\t\tidxA = ~~(idxA / 6);\n\t\tvar r = 3;\n\t\tfor (var i=11; i>=0; i--) {\n\t\t\tif (idxA >= Cnk[i][r]) {\n\t\t\t\tidxA -= Cnk[i][r--];\n\t\t\t\tthis.ep[i] = edge[2-r];\n\t\t\t} else {\n\t\t\t\tthis.ep[i] = (8-i+r);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tthis.getURtoUL = function getURtoUL() {\n\t\tvar idxA = 0;\n\t\tvar idxB = 0;\n\t\tvar mask = 0;\n\t\tvar r = 3;\n\t\tfor (var i=11; i>=0; i--) {\n\t\t\tif (this.ep[i] <= 2) {\n\t\t\t\tidxA += Cnk[i][r--];\n\t\t\t\tvar t = 1 << this.ep[i];\n\t\t\t\tidxB += bitCount(mask & (t - 1)) * fact[2-r];\n\t\t\t\tmask |= t;\n\t\t\t}\n\t\t}\n\t\treturn (idxA * 6 + idxB);\t\n\t}\n\n\tthis.getDRtoDL = function getDRtoDL() {\n\t\tvar idxA = 0;\n\t\tvar idxB = 0;\n\t\tvar mask = 0;\n\t\tvar r = 3;\n\t\tfor (var i=11; i>=0; i--) {\n\t\t\tif (4 <= this.ep[i] && this.ep[i] <= 6) {\n\t\t\t\tidxA += Cnk[i][r--];\n\t\t\t\tvar t = 1 << this.ep[i];\n\t\t\t\tidxB += bitCount(mask & (t - 1)) * fact[2-r];\n\t\t\t\tmask |= t;\n\t\t\t}\n\t\t}\n\t\treturn (idxA * 6 + idxB);\t\n\t}\t\n\n\tthis.setEdgePerm = function setEdgePerm(idx) {\n\t\tthis.ep[11] = 0;\n\t\tfor (var i=10; i>=0; i--) {\n\t\t\tthis.ep[i] = (idx % (12-i));\n\t\t\tidx = ~~(idx/(12-i));\n\t\t\tfor (var j=i+1; j<12; j++) {\n\t\t\t\tif (this.ep[j] >= this.ep[i])\n\t\t\t\t\tthis.ep[j]++;\n\t\t\t}\n\t\t}\t\t\t\n\t}\n\t\n\tthis.getEdgePerm = function getEdgePerm() {\n\t\tvar m = (1 << this.ep[11]);\t\t\n\t\tvar idx = 0;\n\t\tfor (var i=10; i>=0; --i) {\n\t\t\tvar t = 1 << this.ep[i];\n\t\t\tidx += bitCount(m & (t - 1)) * fact[11-i];\n\t\t\tm |= t;\n\t\t}\n\t\treturn idx;\t\t\n\t}\n\n\tthis.getCPermSym = function getCPermSym() {\n\t\tif (EPermR2S != null) {\n\t\t\tvar idx = EPermR2S[get8Perm(this.cp)];\n\t\t\tidx ^= e2c[idx&0x0f];\n\t\t\treturn idx;\n\t\t}\n\t\tfor (var k=0; k<16; k++) {\n\t\t\tCornConjugate(this, SymInv[k], temps);\n\t\t\tvar idx = binarySearch(CPermS2R, get8Perm(temps.cp));\n\t\t\tif (idx != 0xffff) {\n\t\t\t\treturn ((idx << 4) | k);\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\tthis.getEPermSym = function getEPermSym() {\t\n\t\tif (EPermR2S != null) {\n\t\t\treturn EPermR2S[get8Perm(this.ep)];\n\t\t}\n\t\tfor (var k=0; k<16; k++) {\n\t\t\tEdgeConjugate(this, SymInv[k], temps);\n\t\t\tvar idx = binarySearch(EPermS2R, get8Perm(temps.ep));\n\t\t\tif (idx != 0xffff) {\n\t\t\t\treturn ((idx << 4) | k);\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\t\n\n\tthis.URFConjugate = function URFConjugate() {\n\t\tCornMult(urf2, this, temps);\n\t\tCornMult(temps, urf1, this);\t\t\n\t\tEdgeMult(urf2, this, temps);\n\t\tEdgeMult(temps, urf1, this);\t\t    \t\t\n\t}\n\t\n\tthis.invCubieCube = function invCubieCube() {\n\t\tfor (var edge=0; edge<12; edge++)\n\t\t\ttemps.ep[this.ep[edge]] = edge;\n\t\tfor (var edge=0; edge<12; edge++)\n\t\t\ttemps.eo[edge] = this.eo[temps.ep[edge]];\n\t\tfor (var corn=0; corn<8; corn++)\n\t\t\ttemps.cp[this.cp[corn]] = corn;\n\t\tfor (var corn=0; corn<8; corn++) {\n\t\t\tvar ori = this.co[temps.cp[corn]];\n\t\t\ttemps.co[corn] = -ori;\n\t\t\tif (temps.co[corn] < 0)\n\t\t\t\ttemps.co[corn] += 3;\n\t\t}\n\t\tthis.copy(temps);\n\t}\n\n\n\tthis.init = function init(cperm, twist, eperm, flip) {\n\t\tset8Perm(this.cp, cperm);\n\t\tthis.setTwist(twist);\n\t\tthis.setEdgePerm(eperm);\n\t\tthis.setFlip(flip);\n\t}\n\t\n\tthis.copy = function copy(c) {\n\t\tfor (var i=0; i<8; i++) {\n\t\t\tthis.cp[i] = c.cp[i];\n\t\t\tthis.co[i] = c.co[i];\n\t\t}\n\t\tfor (var i = 0; i < 12; i++) {\n\t\t\tthis.ep[i] = c.ep[i];\n\t\t\tthis.eo[i] = c.eo[i];\n\t\t}\n\t}\n}\n\nconst cctemp = new CubieCube();\nconst temps = new CubieCube();\n\nfunction set8Perm(arr, idx) {\n\tvar val = 0x76543210;\n\tfor (var i=0; i<7; i++) {\n\t\tvar p = fact[7-i];\n\t\tvar v = ~~(idx / p);\n\t\tidx %= p;\n\t\tv <<= 2;\n\t\tarr[i] = ((val >> v) & 7);\n\t\tvar m = (1 << v) - 1;\n\t\tval = (val & m) + ((val >> 4) & ~m);\n\t}\n\tarr[7] = val;\n}\n\nfunction get8Perm(arr) {\n\tvar idx = 0;\n\tvar val = 0x76543210;\n\tfor (var i=0; i<7; i++) {\n\t\tvar v = arr[i] << 2;\n\t\tidx = (8 - i) * idx + ((val >> v) & 7);\n\t\tval -= 0x11111110 << v;\n\t}\n\treturn idx;\t\n}\n\nfunction CornMult(a, b, prod) {\n\tfor (var corn=0; corn<8; corn++) {\n\t\tprod.cp[corn] = a.cp[b.cp[corn]];\n\t\tvar oriA = a.co[b.cp[corn]];\n\t\tvar oriB = b.co[corn];\n\t\tvar ori = oriA;\n\t\tori += (oriA<3) ? oriB : 3-oriB;\n\t\tori %= 3;\n\t\tif (oriA < 3 ^ oriB < 3) {\n\t\t\tori += 3;\n\t\t}\n\t\tprod.co[corn] = ori;\n\t}\n}\t\n\nfunction EdgeMult(a, b, prod) {\n\tfor (var ed=0; ed<12; ed++) {\n\t\tprod.ep[ed] = a.ep[b.ep[ed]];\n\t\tprod.eo[ed] = (b.eo[ed] ^ a.eo[b.ep[ed]]);\n\t}\n}\n\nfunction CornConjugate(a, idx, b) {\n\tCornMult(CubeSym[SymInv[idx]], a, cctemp);\n\tCornMult(cctemp, CubeSym[idx], b);\t\t\n}\n\nfunction EdgeConjugate(a, idx, b) {\n\tEdgeMult(CubeSym[SymInv[idx]], a, cctemp);\n\tEdgeMult(cctemp, CubeSym[idx], b);\t\t\n}\n\nvar CubeSym = Array(16);\nvar moveCube = Array(18);\nvar SymInv = Array(16);\nvar SymMult = Array(16);\nvar SymMove = Array(16);\nvar Sym8Mult = Array(8);\nvar Sym8Move = Array(8);\nvar Sym8MultInv = Array(8);\nvar SymMoveUD = Array(16);\nvar FlipS2R = Array(336);\nvar TwistS2R = Array(324);\nvar CPermS2R = Array(2768);\nvar EPermS2R = CPermS2R;\nvar FlipR2S = Array(2048);\nvar TwistR2S = Array(2187);\nvar EPermR2S = createArray(40320);\nfor (var i=0; i<40320; i++) {\n\tEPermR2S[i] = 0;\n}\nvar MtoEPerm = Array(40320);\nvar merge = Array(56);\nvar e2c = [0, 0, 0, 0, 1, 3, 1, 3, 1, 3, 1, 3, 0, 0, 0, 0];\nconst urf1 = new CubieCube();\nurf1.init(2531, 1373, 67026819, 1877);\nconst urf2 = new CubieCube();\nurf2.init(2089, 1906, 322752913, 255);\n\n\nfunction CubieInit() {\n\tvar mc = Array(6);\n\tmc[0] = new CubieCube();\n\tmc[0].init(15120, 0, 119750400, 0);\n\tmc[1] = new CubieCube();\n\tmc[1].init(21021, 1494, 323403417, 0);\n\tmc[2] = new CubieCube();\n\tmc[2].init(8064, 1236, 29441808, 802);\n\tmc[3] = new CubieCube();\n\tmc[3].init(9, 0, 5880, 0);\n\tmc[4] = new CubieCube();\n\tmc[4].init(1230, 412, 2949660, 0);\n\tmc[5] = new CubieCube();\n\tmc[5].init(224, 137, 328552, 1160);\n\tfor (var m=0; m<6; m++) {\n\t\tmoveCube[m*3] = mc[m];\n\t\tfor (var p=0; p<2; p++) {\n\t\t\tmoveCube[m*3+p+1] = new CubieCube();\n\t\t\tEdgeMult(moveCube[m*3+p], mc[m], moveCube[m*3+p+1]);\n\t\t\tCornMult(moveCube[m*3+p], mc[m], moveCube[m*3+p+1]);\n\t\t}\n\t}\n\tvar c = new CubieCube();\n\tvar d = new CubieCube();\n\tvar temp;\n\tvar f2 = new CubieCube();\n\tf2.init(28783, 0, 259268407, 0);\n\tvar u4 = new CubieCube();\n\tu4.init(15138, 0, 119765538, 1792);\n\tvar lr2 = new CubieCube();\n\tlr2.init(5167, 0, 83473207, 0);\n\tlr2.co = [ 3, 3, 3, 3, 3, 3, 3, 3 ];\n\tfor (var i=0; i<16; i++) {\n\t\tSymMult[i] = Array(16);\n\t\tSymMove[i] = Array(18);\n\t\tSymMoveUD[i] = Array(10);\n\t\tCubeSym[i] = new CubieCube();\n\t\tCubeSym[i].copy(c);\n\t\tCornMult(c, u4, d);\n\t\tEdgeMult(c, u4, d);\n\t\ttemp = d;\td = c;\tc = temp;\n\t\tif (i % 4 == 3) {\n\t\t\tCornMult(c, lr2, d);\n\t\t\tEdgeMult(c, lr2, d);\n\t\t\ttemp = d;\td = c;\tc = temp;\t\t\t\t\n\t\t}\n\t\tif (i % 8 == 7) {\n\t\t\tCornMult(c, f2, d);\n\t\t\tEdgeMult(c, f2, d);\n\t\t\ttemp = d;\td = c;\tc = temp;\n\t\t}\n\t}\n\n\tfor (var j=0; j<16; j++) {\n\t\tfor (var k=0; k<16; k++) {\n\t\t\tCornMult(CubeSym[j], CubeSym[k], c);\n\t\t\tif (c.cp[0] == 0 && c.cp[1] == 1 && c.cp[2] == 2) {\n\t\t\t\tSymInv[j] = k;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tfor (var i=0; i<16; i++) {\n\t\tfor (var j=0; j<16; j++) {\n\t\t\tCornMult(CubeSym[i], CubeSym[j], c);\n\t\t\tfor (var k=0; k<16; k++) {\n\t\t\t\tif (CubeSym[k].cp[0] == c.cp[0] && CubeSym[k].cp[1] == c.cp[1] && CubeSym[k].cp[2] == c.cp[2]) {\n\t\t\t\t\tSymMult[i][j] = k;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (var j=0; j<18; j++) {\n\t\tfor (var s=0; s<16; s++) {\n\t\t\tCornConjugate(moveCube[j], SymInv[s], c);\n\t\t\tfor (var m=0; m<18; m++) {\n\t\t\t\tvar found = 1;\n\t\t\t\tfor (var i=0; i<8; i++) {\n\t\t\t\t\tif (c.cp[i] != moveCube[m].cp[i] || c.co[i] != moveCube[m].co[i]) {\n\t\t\t\t\t\tfound = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (found) {\n\t\t\t\t\tSymMove[s][j] = m;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (var j=0; j<10; j++) {\n\t\tfor (var s=0; s<16; s++) {\n\t\t\tSymMoveUD[s][j] = std2ud[SymMove[s][ud2std[j]]];\n\t\t}\n\t}\n\tfor (var j=0; j<8; j++) {\n\t\tSym8Mult[j] = Array(8);\n\t\tSym8Move[j] = Array(18);\n\t\tSym8MultInv[j] = Array(8);\n\t\tfor (var s=0; s<8; s++) {\n\t\t\tSym8Mult[j][s] = (SymMult[j<<1][s<<1]>>>1);\n\t\t}\n\t}\n\tfor (var j=0; j<18; j++) {\n\t\tfor (var s=0; s<8; s++) {\n\t\t\tSym8Move[s][j] = SymMove[s<<1][j];\n\t\t}\n\t}\n\tfor (var j=0; j<8; j++) {\n\t\tfor (var s=0; s<8; s++) {\n\t\t\tSym8MultInv[j][s] = Sym8Mult[j][SymInv[s<<1]>>1];\n\t\t}\n\t}\n\n\tconst occ = new Array(1260);\n\n\tvar count = 0;\n\tfor (var i=0; i<64; occ[i++] = 0);\n\n\tfor (var i=0; i<2048; i++) {\n\t\tif ((occ[i>>>5]&(1<<(i&0x1f))) == 0) {\n\t\t\tc.setFlip(i);\n\t\t\tfor (var s=0; s<16; s+=2) {\n\t\t\t\tEdgeConjugate(c, s, d);\n\t\t\t\tvar idx = d.getFlip();\n\t\t\t\tocc[idx>>>5] |= 1<<(idx&0x1f);\n\t\t\t\tFlipR2S[idx] = ((count << 3) | (s >>> 1));\n\t\t\t}\n\t\t\tFlipS2R[count++] = i;\n\t\t}\n\t}\n//\talert(count);\n\tcount = 0;\n\tfor (var i=0; i<69; occ[i++] = 0);\n\tfor (var i=0; i<2187; i++) {\n\t\tif ((occ[i>>>5]&(1<<(i&0x1f))) == 0) {\n\t\t\tc.setTwist(i);\n\t\t\tfor (var s=0; s<16; s+=2) {\n\t\t\t\tCornConjugate(c, s, d);\n\t\t\t\tvar idx = d.getTwist();\n\t\t\t\tocc[idx>>>5] |= 1<<(idx&0x1f);\n\t\t\t\tTwistR2S[idx] =  ((count << 3) | (s >>> 1));\n\t\t\t}\n\t\t\tTwistS2R[count++] = i;\n\t\t}\n\t}\n//\talert(count);\n\n\tvar mask = Array(56);\n\tfor (var i=0; i<56; i++) {\n\t\tmask[i] = Array(2);\n\t\tmerge[i] = Array(56);\n\t}\n\tfor (var i=0; i<40320; i++) {\n\t\tset8Perm(c.ep, i);\n\t\tvar a = ~~(c.getURtoUL() / 6);\n\t\tvar b = ~~(c.getDRtoDL() / 6);\n\t\tmask[a][b>>>5] |= 1 << (b&0x1f);\n\t}\n\t\n\tfor (var i=0; i<56; i++) {\n\t\tcount = 0;\n\t\tfor (var j=0; j<56; j++) {\n\t\t\tif ((mask[i][j>>>5]&(1<<(j&0x1f))) != 0) {\n\t\t\t\tmerge[i][j] = count++;\n\t\t\t}\n\t\t}\n\t}\n\tcount = 0;\n\tfor (var i=0; i<1260; occ[i++] = 0);\n\tfor (var i=0; i<40320; i++) {\n\t\tif ((occ[i>>>5]&(1<<(i&0x1f))) == 0) {\n\t\t\tset8Perm(c.ep, i);\n\t\t\tfor (var s=0; s<16; s++) {\n\t\t\t\tEdgeConjugate(c, s, d);\n\t\t\t\tvar idx = get8Perm(d.ep);\n\t\t\t\tocc[idx>>>5] |= 1<<(idx&0x1f);\n\t\t\t\tvar a = d.getURtoUL();\n\t\t\t\tvar b = d.getDRtoDL();\n\t\t\t\tvar m = (merge[~~(a/6)][~~(b/6)] * 4032 + a * 12 + b % 6 * 2 + get8Parity(idx));\n\t\t\t\tMtoEPerm[m] = (count << 4 | s);\n\t\t\t\tEPermR2S[idx] = (count << 4 | s);\n\t\t\t}\n\t\t\tEPermS2R[count++] = i;\n\t\t}\n\t}\n}\n\nvar UDSliceMove = Array(495);//new char[495][18];\nvar TwistMove = Array(324);//new char[324][18];\nvar FlipMove = Array(336);//new char[336][18];\nvar UDSliceConj = Array(495);//new char[495][8];\nvar UDSliceTwistPrun = Array(495*324);//new byte[495 * 324];\nvar UDSliceFlipPrun = Array(495*336);//new byte[495 * 336];\n\t\nvar TwistFlipPrun = Array(336*324*8);//new byte[336 * 324 * 8];\n\t\n\t//phase1to2\nvar Mid3Move = Array(1320);//new char[1320][18];\nvar Mid32MPerm = Array(24);//new byte[24];\nvar CParity = Array(87);//new byte[2768/8];\n\n\t//phase2\nvar CPermMove = Array(2768);//new char[2768][18];\nvar EPermMove = Array(2768);//new char[2768][10];\nvar MPermMove = Array(24);//new byte[24][10];\nvar MPermConj = Array(24);//new byte[24][16];\nvar MCPermPrun = Array(24*2768);//new byte[24*2768];\nvar MEPermPrun = Array(24*2768);//new byte[24*2768];\n\n\nfunction CoordInit() {\n\tvar c = new CubieCube();\n\tvar d = new CubieCube();\n\tvar i, j;\n\tfor (i=0; i<2768; i++) {\n\t\tCPermMove[i] = Array(18);\n\t\tset8Perm(c.cp, CPermS2R[i]);\n\t\tfor (j=0; j<18; j++) {\n\t\t\tCornMult(c, moveCube[j], d);\n\t\t\tCPermMove[i][j] = d.getCPermSym();\n\t\t}\n\t}\t\t\n\tfor (i=0; i<2768; i++) {\n\t\tEPermMove[i] = Array(10);\n\t\tset8Perm(c.ep, EPermS2R[i]);\n\t\tfor (j=0; j<10; j++) {\n\t\t\tEdgeMult(c, moveCube[ud2std[j]], d);\n\t\t\tEPermMove[i][j] = d.getEPermSym();\n\t\t}\n\t}\n\tfor (i=0; i<336; i++) {\n\t\tFlipMove[i] = Array(18);\n\t\tc.setFlip(FlipS2R[i]);\n\t\tfor (j=0; j<18; j++) {\n\t\t\tEdgeMult(c, moveCube[j], d);\n\t\t\tFlipMove[i][j] = d.getFlipSym();\n\t\t}\n\t}\n\tfor (i=0; i<324; i++) {\n\t\tTwistMove[i] = Array(18);\n\t\tc.setTwist(TwistS2R[i]);\n\t\tfor (j=0; j<18; j++) {\n\t\t\tCornMult(c, moveCube[j], d);\n\t\t\tTwistMove[i][j] = d.getTwistSym();\n\t\t}\n\t}\n\tfor (i=0; i<495; i++) {\n\t\tUDSliceMove[i] = Array(18);\n\t\tc.setUDSlice(i);\n\t\tfor (j=0; j<18; j++) {\n\t\t\tEdgeMult(c, moveCube[j], d);\n\t\t\tUDSliceMove[i][j] = d.getUDSlice();\n\t\t}\n\t}\n\tfor (i=0; i<495; i++) {\n\t\tUDSliceConj[i] = Array(8);\n\t\tc.setUDSlice(i);\n\t\tfor (j=0; j<16; j+=2) {\n\t\t\tEdgeConjugate(c, SymInv[j], d);\n\t\t\tUDSliceConj[i][j>>>1] = d.getUDSlice();\n\t\t}\n\t}\n\tfor (i=0; i<1320; i++) {\n\t\tMid3Move[i] = Array(18);\n\t\tc.setMid3(i);\n\t\tfor (j=0; j<18; j++) {\n\t\t\tEdgeMult(c, moveCube[j], d);\n\t\t\tMid3Move[i][j] = d.getMid3();\n\t\t}\n\t}\t\n\tfor (i=0; i<24; i++) {\n\t\tc.setMPerm(i);\n\t\tMid32MPerm[c.getMid3() % 24] = i;\n\t}\n\tfor (i=0; i<2768; i++) {\n\t\tCParity[i>>>3] |= (get8Parity(CPermS2R[i])) << (i & 7);\n\t}\n\tfor (i=0; i<24; i++) {\n\t\tMPermMove[i] = Array(10);\n\t\tc.setMPerm(i);\n\t\tfor (j=0; j<10; j++) {\n\t\t\tEdgeMult(c, moveCube[ud2std[j]], d);\n\t\t\tMPermMove[i][j] = d.getMPerm();\n\t\t}\n\t}\t\t\n\tfor (i=0; i<24; i++) {\n\t\tMPermConj[i] = Array(16);\n\t\tc.setMPerm(i);\n\t\tfor (j=0; j<16; j++) {\n\t\t\tEdgeConjugate(c, SymInv[j], d);\n\t\t\tMPermConj[i][j] = d.getMPerm();\n\t\t}\n\t}\n\t\n\tvar SymState = Array(324);\n\tfor (i=0; i<324; i++) {\n\t\tc.setTwist(TwistS2R[i]);\n\t\tfor (var j=0; j<8; j++) {\n\t\t\tCornConjugate(c, j<<1, d);\n\t\t\tif (binarySearch(TwistS2R, d.getTwist()) != 0xffff) {\n\t\t\t\tSymState[i] |= (1 << j);\n\t\t\t}\n\t\t}\n\t}\n\tvar SymStateF = Array(324);\n\tfor (i=0; i<336; i++) {\n\t\tc.setFlip(FlipS2R[i]);\n\t\tfor (var j=0; j<8; j++) {\n\t\t\tEdgeConjugate(c, j<<1, d);\n\t\t\tif (binarySearch(FlipS2R, d.getFlip()) != 0xffff) {\n\t\t\t\tSymStateF[i] |= (1 << j);\n\t\t\t}\n\t\t}\n\t}\t\t\n\tfor (i=0; i<336*324*8; i++) {\n\t\tTwistFlipPrun[i] = -1;\n\t}\n\tfor (i=0; i<8; i++) {\n\t\tTwistFlipPrun[i] = 0;\n\t}\n\tvar depth = 0;\n\tvar done = 8;\n\tvar inv;\n\tvar select;\n\tvar check;\n\t\n\twhile (done < 336*324*8) {\n\t\tinv = depth > 6;\n\t\tselect = inv ? -1 : depth;\n\t\tcheck = inv ? depth : -1;\n\t\tdepth++;\n\t\tfor (i=0; i<336*324*8; i++) {\n\t\t\tif (TwistFlipPrun[i] != select)\n\t\t\t\tcontinue;\n\t\t\tvar twist = ~~(i / 2688);\n\t\t\tvar flip = i % 2688;\n\t\t\tvar fsym = i & 7;\n\t\t\tflip >>>= 3;\n\t\t\tfor (var m=0; m<18; m++) {\n\t\t\t\tvar twistx = TwistMove[twist][m];\n\t\t\t\tvar tsymx = twistx & 7;\n\t\t\t\ttwistx >>>= 3;\n\t\t\t\tvar flipx = FlipMove[flip][Sym8Move[fsym][m]];\n\t\t\t\tvar fsymx = Sym8MultInv[Sym8Mult[flipx & 7][fsym]][tsymx];\n\t\t\t\tflipx >>>= 3;\n\t\t\t\tvar idx = twistx * 2688 + (flipx << 3 | fsymx);\n\t\t\t\tif (TwistFlipPrun[idx] == check) {\n\t\t\t\t\tdone++;\n\t\t\t\t\tif (inv) {\n\t\t\t\t\t\tTwistFlipPrun[i] = depth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTwistFlipPrun[idx] = depth;\n\t\t\t\t\t\tvar sym = SymState[twistx];\n\t\t\t\t\t\tvar symF = SymStateF[flipx];\n\t\t\t\t\t\tif (sym != 1 || symF != 1) {\n\t\t\t\t\t\t\tfor (var j=0; j<8; j++, symF >>= 1) {\n\t\t\t\t\t\t\t\tif ((symF & 1) == 1) {\n\t\t\t\t\t\t\t\t\tvar fsymxx = Sym8MultInv[fsymx][j];\n\t\t\t\t\t\t\t\t\tfor (var k=0; k<8; k++) {\n\t\t\t\t\t\t\t\t\t\tif ((sym & (1 << k)) != 0) {\n\t\t\t\t\t\t\t\t\t\t\tvar idxx = twistx * 2688 + (flipx << 3 | Sym8MultInv[fsymxx][k]);\n\t\t\t\t\t\t\t\t\t\t\tif (TwistFlipPrun[idxx] == -1) {\n\t\t\t\t\t\t\t\t\t\t\t\tTwistFlipPrun[idxx] = depth;\n\t\t\t\t\t\t\t\t\t\t\t\tdone++;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n//\t\t\tSystem.out.println(String.format(\"%2d%10d\", depth, done));\n\t}\n\tfor (i=0; i<495*324; i++) {\n\t\tUDSliceTwistPrun[i] = -1;\n\t}\n\tUDSliceTwistPrun[0] = 0;\n\tdepth = 0;\n\tdone = 1;\n\twhile (done < 495 * 324) {\n\t\tinv = depth > 6;\n\t\tselect = inv ? -1 : depth;\n\t\tcheck = inv ? depth : -1;\n\t\tdepth++;\n\t\tfor (i=0; i<495*324; i++) {\n\t\t\tif (UDSliceTwistPrun[i] == select) {\n\t\t\t\tvar slice = i % 495;\n\t\t\t\tvar twist = ~~(i / 495);\n\t\t\t\tfor (var m=0; m<18; m++) {\n\t\t\t\t\tvar twistx = TwistMove[twist][m];\n\t\t\t\t\tvar symx = twistx & 7;\n\t\t\t\t\tvar slicex = UDSliceConj[UDSliceMove[slice][m]][symx];\n\t\t\t\t\ttwistx >>>= 3;\n\t\t\t\t\tvar idx = twistx * 495 + slicex;\n\t\t\t\t\tif (UDSliceTwistPrun[idx] == check) {\n\t\t\t\t\t\tdone++;\n\t\t\t\t\t\tif (inv) {\n\t\t\t\t\t\t\tUDSliceTwistPrun[i] = depth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUDSliceTwistPrun[idx] = depth;\n\t\t\t\t\t\t\tvar sym = SymState[twistx];\n\t\t\t\t\t\t\tif (sym != 1) {\n\t\t\t\t\t\t\t\tfor (var j=1; j<8; j++) {\n\t\t\t\t\t\t\t\t\tsym >>= 1;\n\t\t\t\t\t\t\t\t\tif ((sym & 1) == 1) {\n\t\t\t\t\t\t\t\t\t\tvar idxx = twistx * 495 + UDSliceConj[slicex][j];\n\t\t\t\t\t\t\t\t\t\tif (UDSliceTwistPrun[idxx] == -1) {\n\t\t\t\t\t\t\t\t\t\t\tUDSliceTwistPrun[idxx] = depth;\n\t\t\t\t\t\t\t\t\t\t\tdone++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n//\t\t\tSystem.out.println(String.format(\"%2d%10d\", depth, done));\n\t}\t\t\n\n\tfor (i=0; i<495*336; i++) {\n\t\tUDSliceFlipPrun[i] = -1;\n\t}\n\tUDSliceFlipPrun[0] = 0;\n\tdepth = 0;\n\tdone = 1;\n\twhile (done < 495 * 336) {\n\t\tinv = depth > 6;\n\t\tselect = inv ? -1 : depth;\n\t\tcheck = inv ? depth : -1;\n\t\tdepth++;\n\t\tfor (i=0; i<495*336; i++) {\n\t\t\tif (UDSliceFlipPrun[i] == select) {\n\t\t\t\tvar slice = i % 495;\n\t\t\t\tvar flip = ~~(i / 495);\n\t\t\t\tfor (var m=0; m<18; m++) {\n\t\t\t\t\tvar flipx = FlipMove[flip][m];\n\t\t\t\t\tvar symx = flipx & 7;\n\t\t\t\t\tvar slicex = UDSliceConj[UDSliceMove[slice][m]][symx];\n\t\t\t\t\tflipx >>>= 3;\n\t\t\t\t\tvar idx = flipx * 495 + slicex;\n\t\t\t\t\tif (UDSliceFlipPrun[idx] == check) {\n\t\t\t\t\t\tdone++;\n\t\t\t\t\t\tif (inv) {\n\t\t\t\t\t\t\tUDSliceFlipPrun[i] = depth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUDSliceFlipPrun[idx] = depth;\n\t\t\t\t\t\t\tvar sym = SymStateF[flipx];\n\t\t\t\t\t\t\tif (sym != 1) {\n\t\t\t\t\t\t\t\tfor (var j=1; j<8; j++) {\n\t\t\t\t\t\t\t\t\tsym >>= 1;\n\t\t\t\t\t\t\t\t\tif ((sym & 1) == 1) {\n\t\t\t\t\t\t\t\t\t\tvar idxx = flipx * 495 + UDSliceConj[slicex][j];\n\t\t\t\t\t\t\t\t\t\tif (UDSliceFlipPrun[idxx] == -1) {\n\t\t\t\t\t\t\t\t\t\t\tUDSliceFlipPrun[idxx] = depth;\n\t\t\t\t\t\t\t\t\t\t\tdone++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n//\t\t\tdepth++;\n//\t\t\tSystem.out.println(String.format(\"%2d%10d\", depth, done));\n\t}\t\n\t\n\tSymState = Array(2768);\n\tfor (i=0; i<2768; i++) {\n\t\tset8Perm(c.ep, EPermS2R[i]);\n\t\tfor (j=1; j<16; j++) {\n\t\t\tEdgeConjugate(c, j, d);\n\t\t\tif (binarySearch(EPermS2R, get8Perm(d.ep)) != 0xffff) {\n\t\t\t\tSymState[i] |= (1 << j);\n\t\t\t}\n\t\t}\n\t}\n\tfor (i=0; i<24*2768; i++) {\n\t\tMEPermPrun[i] = -1;\n\t}\n\tMEPermPrun[0] = 0;\n\twhile (done < 24*2768) {\n\t\tinv = depth > 7;\n\t\tselect = inv ? -1 : depth;\n\t\tcheck = inv ? depth : -1;\n\t\tdepth++;\n\t\tfor (i=0; i<24*2768; i++) {\n\t\t\tif (MEPermPrun[i] == select) {\n\t\t\t\tvar mid = i % 24;\n\t\t\t\tvar edge = ~~(i / 24);\n\t\t\t\tfor (var m=0; m<10; m++) {\n\t\t\t\t\tvar edgex = EPermMove[edge][m];\n\t\t\t\t\tvar symx = edgex & 15;\n\t\t\t\t\tvar midx = MPermConj[MPermMove[mid][m]][symx];\n\t\t\t\t\tedgex >>>= 4;\n\t\t\t\t\tvar idx = edgex * 24 + midx;\n\t\t\t\t\tif (MEPermPrun[idx] == check) {\n\t\t\t\t\t\tdone++;\n\t\t\t\t\t\tif (inv) {\n\t\t\t\t\t\t\tMEPermPrun[i] = depth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tMEPermPrun[idx] = depth;\n\t\t\t\t\t\t\tvar sym = SymState[edgex];\n\t\t\t\t\t\t\tif (sym != 0) {\n\t\t\t\t\t\t\t\tfor (j=1; j<16; j++) {\n\t\t\t\t\t\t\t\t\tsym >>= 1;\n\t\t\t\t\t\t\t\t\tif ((sym & 1) == 1) {\n\t\t\t\t\t\t\t\t\t\tvar idxx = edgex * 24 + MPermConj[midx][j];\n\t\t\t\t\t\t\t\t\t\tif (MEPermPrun[idxx] == -1) {\n\t\t\t\t\t\t\t\t\t\t\tMEPermPrun[idxx] = depth;\n\t\t\t\t\t\t\t\t\t\t\tdone++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n//\t\t\tSystem.out.println(String.format(\"%2d%10d\", depth, done));\n\t}\t\t\n\t\t\n\tfor (i=0; i<24*2768; i++) {\n\t\tMCPermPrun[i] = -1;\n\t}\n\tMCPermPrun[0] = 0;\n\tdepth = 0;\n\tdone = 1;\n\twhile (done < 24*2768) {\n\t\tinv = depth > 7;\n\t\tselect = inv ? -1 : depth;\n\t\tcheck = inv ? depth : -1;\n\t\tdepth++;\n\t\tfor (i=0; i<24*2768; i++) {\n\t\t\tif (MCPermPrun[i] == select) {\n\t\t\t\tvar mid = i % 24;\n\t\t\t\tvar corn = ~~(i / 24);\n\t\t\t\tfor (var m=0; m<10; m++) {\n\t\t\t\t\tvar cornx = CPermMove[corn][ud2std[m]];\n\t\t\t\t\tvar symx = (cornx & 15);\n\t\t\t\t\tvar midx = MPermConj[MPermMove[mid][m]][symx];\n\t\t\t\t\tcornx >>>= 4;\n\t\t\t\t\tvar idx = cornx * 24 + midx;\n\t\t\t\t\tif (MCPermPrun[idx] == check) {\n\t\t\t\t\t\tdone++;\n\t\t\t\t\t\tif (inv) {\n\t\t\t\t\t\t\tMCPermPrun[i] = depth;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tMCPermPrun[idx] = depth;\n\t\t\t\t\t\t\tvar sym = SymState[cornx];\n\t\t\t\t\t\t\tif (sym != 0) {\n\t\t\t\t\t\t\t\tfor (j=1; j<16; j++) {\n\t\t\t\t\t\t\t\t\tsym >>= 1;\n\t\t\t\t\t\t\t\t\tif ((sym & 1) == 1) {\n\t\t\t\t\t\t\t\t\t\tvar idxx = cornx * 24 + MPermConj[midx][j ^ e2c[j]];\n\t\t\t\t\t\t\t\t\t\tif (MCPermPrun[idxx] == -1) {\n\t\t\t\t\t\t\t\t\t\t\tMCPermPrun[idxx] = depth;\n\t\t\t\t\t\t\t\t\t\t\tdone++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n//\t\t\tSystem.out.println(String.format(\"%2d%10d\", depth, done));\n\t}\n}\t\t\t\t\t\n\nfunction randomCube() {\n\tvar eperm;\n\tvar cperm;\n\tdo {\n\t\teperm = ~~(Math.random() * 479001600);\n\t\tcperm = ~~(Math.random() * 40320);\n\t} while (((get8Parity(cperm) ^ get12Parity(eperm))) != 0);\n\tvar c = new CubieCube();\n\tc.init(cperm, ~~(Math.random() * 2187), eperm, ~~(Math.random() * 2048));\n\treturn c;\n}\n\nvar move = Array(31);\n\nvar corn = Array(20);\nvar csym = Array(20);\nvar mid3 = Array(20);\nvar e1 = Array(20);\nvar e2 = Array(20);\nvar urfidx;\n\nvar twist = Array(6);\nvar tsym = Array(6);\nvar flip = Array(6);\nvar fsym = Array(6);\nvar slice = Array(6);\nvar corn0 = Array(6);\nvar csym0 = Array(6);\nvar mid30 = Array(6);\nvar e10 = Array(6);\nvar e20 = Array(6);\nvar prun = Array(6);\n\nvar length1 = 0;\nvar maxlength2 = 0;\nvar sol = 999;\nvar valid1 = 0;\nvar valid2 = 0;\nvar solution = \"\";\nvar useSeparator = false;\n\nfunction Solve(c) {\n\tc.temps = new CubieCube();\n\tfor (var i=0; i<6; i++) {\n\t\ttwist[i] = c.getTwistSym();\n\t\ttsym[i] = twist[i] & 7;\n\t\ttwist[i] >>>= 3;\n\t\tflip[i] = c.getFlipSym();\n\t\tfsym[i] = flip[i] & 7;\n\t\tflip[i] >>>= 3;\n\t\tslice[i] = c.getUDSlice();\n\t\tcorn0[i] = c.getCPermSym();\n\t\tcsym0[i] = corn0[i] & 15;\n\t\tcorn0[i] >>>= 4;\n\t\tmid30[i] = c.getMid3();\n\t\te10[i] = c.getURtoUL();\n\t\te20[i] = c.getDRtoDL();\n\t\tprun[i] = Math.max(Math.max(UDSliceTwistPrun[twist[i] * 495 + UDSliceConj[slice[i]][tsym[i]]],\n\t\t\t\t\t\tUDSliceFlipPrun[flip[i] * 495 + UDSliceConj[slice[i]][fsym[i]]]),\n\t\t\t\t\t\tTwistFlipPrun[twist[i] * 2688 + (flip[i] << 3 | Sym8MultInv[fsym[i]][tsym[i]])]);\n\t\tc.URFConjugate();\n\t\tif (i==2) {\n\t\t\tc.invCubieCube();\n\t\t}\n\t}\n\tsolution = null;\n\tsol = 22;\n\tfor (length1=0; length1<sol; length1++) {\n\t\tmaxlength2 = Math.min(sol/2+1, sol-length1);\n\t\tfor (urfidx=0; urfidx<6; urfidx++) {\n\t\t\tcorn[0] = corn0[urfidx];\n\t\t\tcsym[0] = csym0[urfidx];\n\t\t\tmid3[0] = mid30[urfidx];\n\t\t\te1[0] = e10[urfidx];\n\t\t\te2[0] = e20[urfidx];\n\t\t\tif ((prun[urfidx] <= length1)\n\t\t\t\t\t&& phase1(twist[urfidx], tsym[urfidx], flip[urfidx], fsym[urfidx],\n\t\t\t\t\t\t\t\tslice[urfidx], length1, 18)) {\n\t\t\t\tif (solution == null) {\n\t\t\t\t\treturn \"Error 8\";\n\t\t\t\t} else {\n\t\t\t\t\treturn solution;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn \"Error 7\";\n}\n\nfunction phase1(twist, tsym, flip, fsym, slice, maxl, lm) {\n\tif (twist==0 && flip==0 && slice==0 && maxl < 5) {\n\t\treturn maxl == 0 && init2();\n\t}\n\tfor (var m=0; m<18; m++) {\n\t\tif (ckmv[lm][m]) {\n\t\t\tm+=2;\n\t\t\tcontinue;\n\t\t}\n\t\tvar slicex = UDSliceMove[slice][m];\n\t\tvar twistx = TwistMove[twist][Sym8Move[tsym][m]];\n\t\tvar tsymx = Sym8Mult[twistx & 7][tsym];\n\t\ttwistx >>>= 3;\n\t\tif (UDSliceTwistPrun[twistx * 495 + UDSliceConj[slicex][tsymx]] >= maxl) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar flipx = FlipMove[flip][Sym8Move[fsym][m]];\n\t\tvar fsymx = Sym8Mult[flipx & 7][fsym];\n\t\tflipx >>>= 3;\n\t\tif (TwistFlipPrun[twistx * 2688 + (flipx << 3 | Sym8MultInv[fsymx][tsymx])] >= maxl\n\t\t\t\t||UDSliceFlipPrun[flipx * 495 + UDSliceConj[slicex][fsymx]] >= maxl) {\n\t\t\tcontinue;\n\t\t}\n\t\tmove[length1-maxl] = m;\n\t\tvalid1 = Math.min(valid1, length1-maxl);\n\t\tif (phase1(twistx, tsymx, flipx, fsymx, slicex, maxl-1, m)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction init2() {\n//\tif (System.currentTimeMillis() > timeOut) {\n//\t\treturn true;\n//\t}\n\tvalid2 = Math.min(valid2, valid1);\n\tfor (var i=valid1; i<length1; i++) {\n\t\tvar m = move[i];\n\t\tcorn[i+1] = CPermMove[corn[i]][SymMove[csym[i]][m]];\n\t\tcsym[i+1] = SymMult[corn[i+1] & 15][csym[i]];\n\t\tcorn[i+1] >>>= 4;\n\t\tmid3[i+1] = Mid3Move[mid3[i]][m];\n\t}\n\tvalid1 = length1;\n\tvar mid = Mid32MPerm[mid3[length1] % 24];\n\tvar prun = MCPermPrun[corn[length1] * 24 + MPermConj[mid][csym[length1]]];\n\tif (prun >= maxlength2) {\n\t\treturn false;\n\t}\n\tfor (var i=valid2; i<length1; i++) {\n\t\te1[i+1] = Mid3Move[e1[i]][move[i]];\n\t\te2[i+1] = Mid3Move[e2[i]][move[i]];\n\t}\n\tvalid2 = length1;\n\tvar cornx = corn[length1];\n\tvar ex = merge[~~(e1[length1]/6)][~~(e2[length1]/6)] * 4032\n\t\t\t\t + e1[length1] * 12 + e2[length1] % 6 * 2 + (((CParity[cornx>>>3]>>>(cornx&7))&1) ^ get4Parity(mid));\n\tvar edge = MtoEPerm[ex];\n\tvar esym = edge & 15;\n\tedge >>>= 4;\n\t\tprun = Math.max(MEPermPrun[edge * 24 + MPermConj[mid][esym]], prun);\n\tif (prun >= maxlength2) {\n\t\treturn false;\n\t}\n\t\tvar lm = length1==0 ? 10 : std2ud[~~(move[length1-1]/3)*3+1];\n\tfor (var i=prun; i<maxlength2; i++) {\n\t\tif (phase2(edge, esym, corn[length1], csym[length1], mid, i, length1, lm)) {\n\t\t\tsol = length1 + i;\n\t\t\tvar sb = \"\";\n\t\t\tvar urf = urfidx;\n//\t\t\tif (inverse) {\n\t\t\t\turf = (urf + 3) % 6;\n//\t\t\t}\n\t\t\tif (urf < 3) {\n\t\t\t\tfor (var s=0; s<length1; s++) {\n\t\t\t\t\tsb += move2str[urfMove[urf][move[s]]] + ' ';\n\t\t\t\t}\n\t\t\t\tfor (var s=length1; s<sol; s++) {\n\t\t\t\t\tsb += move2str[urfMove[urf][move[s]]] + ' ';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var s=sol-1; s>=length1; s--) {\n\t\t\t\t\tsb += move2str[urfMove[urf][move[s]]] + ' ';\n\t\t\t\t}\n\t\t\t\tfor (var s=length1-1; s>=0; s--) {\n\t\t\t\t\tsb += move2str[urfMove[urf][move[s]]] + ' ';\n\t\t\t\t}\n\t\t\t}\n\t\t\t// sb += \"(\" + sol + \"f)\";\n\t\t\tsolution = sb;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction phase2(edge, esym, corn, csym, mid, maxl, depth, lm) {\n\tif (edge==0 && corn==0 && mid==0) {\n\t\treturn true;\n\t}\n\tfor (var m=0; m<10; m++) {\n\t\tif (ckmv2[lm][m]) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar midx = MPermMove[mid][m];\n\t\tvar edgex = EPermMove[edge][SymMoveUD[esym][m]];\n\t\tvar esymx = SymMult[edgex & 15][esym];\n\t\tedgex >>>= 4;\n\t\tif (MEPermPrun[edgex * 24 + MPermConj[midx][esymx]] >= maxl) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar cornx = CPermMove[corn][SymMove[csym][ud2std[m]]];\n\t\tvar csymx = SymMult[cornx & 15][csym];\n\t\tcornx >>>= 4;\n\t\tif (MCPermPrun[cornx * 24 + MPermConj[midx][csymx]] >= maxl) {\n\t\t\tcontinue;\n\t\t}\n\t\tmove[depth] = ud2std[m];\n\t\tif (phase2(edgex, esymx, cornx, csymx, midx, maxl-1, depth+1, m)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nvar initialized = false;\n\nfunction initialize() {\n\tif (initialized) {\n\t\treturn;\n\t}\n\tCubieInit();\n\tCoordInit();\n\tinitialized = true;\n}\n\nfunction solve(c) {\n\tinitialize();\n\tconst cc = new CubieCube();\n\tcc.cp = c.cp;\n\tcc.co = c.co;\n\tcc.ep = c.ep;\n\tcc.eo = c.eo;\n\treturn Solve(cc);\n};\n\nmodule.exports.initialize = initialize;\nmodule.exports.solve = solve;\nmodule.exports.randomCube = randomCube;\n"],"sourceRoot":""}